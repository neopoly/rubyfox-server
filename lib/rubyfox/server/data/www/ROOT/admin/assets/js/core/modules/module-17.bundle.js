/*! (c) gotoAndPlay | All rights reserved */
(window["webpackJsonpapplication"] = window["webpackJsonpapplication"] || []).push([["module-17"],{

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./ga": "./node_modules/moment/locale/ga.js",
	"./ga.js": "./node_modules/moment/locale/ga.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it-ch": "./node_modules/moment/locale/it-ch.js",
	"./it-ch.js": "./node_modules/moment/locale/it-ch.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ku": "./node_modules/moment/locale/ku.js",
	"./ku.js": "./node_modules/moment/locale/ku.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mn": "./node_modules/moment/locale/mn.js",
	"./mn.js": "./node_modules/moment/locale/mn.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/components/charts/chart-utils.js":
/*!**********************************************!*\
  !*** ./src/components/charts/chart-utils.js ***!
  \**********************************************/
/*! exports provided: getFormattedDateTime, getBasicSharedTemplate, getMemorySharedTemplate, getMemoryValueAxisLabelTemplate, getNetworkSharedTemplate, getNetworkValueAxisLabelTemplate, getNetworkValueAxisLabelTemplateB, getUserCountSharedTemplate, getTimeRangeTooltipTemplate, getWRBytesLabelTemplate, getBasicTemplate, getMemoryTemplate, getNetworkTemplate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFormattedDateTime", function() { return getFormattedDateTime; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBasicSharedTemplate", function() { return getBasicSharedTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMemorySharedTemplate", function() { return getMemorySharedTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMemoryValueAxisLabelTemplate", function() { return getMemoryValueAxisLabelTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNetworkSharedTemplate", function() { return getNetworkSharedTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNetworkValueAxisLabelTemplate", function() { return getNetworkValueAxisLabelTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNetworkValueAxisLabelTemplateB", function() { return getNetworkValueAxisLabelTemplateB; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUserCountSharedTemplate", function() { return getUserCountSharedTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTimeRangeTooltipTemplate", function() { return getTimeRangeTooltipTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getWRBytesLabelTemplate", function() { return getWRBytesLabelTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBasicTemplate", function() { return getBasicTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMemoryTemplate", function() { return getMemoryTemplate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNetworkTemplate", function() { return getNetworkTemplate; });
/* harmony import */ var _utils_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/utilities */ "./src/utils/utilities.js");


function getFormattedDateTime(date, format = 'dd MMM HH:mm:ss')
{
	return kendo.toString(date, format);
}

function getBasicSharedTemplate(valueFormat = '{0}') {
	return kendo.template(`
		<div class="chart-tooltip-category"><strong>#: category #</strong></div>
		# for (var i = 0; i < points.length; i++) { #
		<div>
			<i class="fas fa-square" style="color: #: points[i].color # "></i>
			#: points[i].series.name# : #: kendo.format('${valueFormat}', points[i].value) #
		</div>
		# } #
	`);
}

function getMemorySharedTemplate() {
	return function(dataItem) {
		dataItem.bytesToSize = _utils_utilities__WEBPACK_IMPORTED_MODULE_0__["bytesToSize"]; // Pass bytesToSize utility function to template
		return kendo.template(`
			<div class="chart-tooltip-category"><strong>#: category #</strong></div>
			# for (var i = 0; i < points.length; i++) { #
			<div>
				<i class="fas fa-square" style="color: #: points[i].color # "></i>
				#: points[i].series.name# : #: bytesToSize(points[i].value) #
			</div>
			# } #
		`)(dataItem);
	};
}

function getMemoryValueAxisLabelTemplate() {
	return function(dataItem) {
		dataItem.bytesToSize = _utils_utilities__WEBPACK_IMPORTED_MODULE_0__["bytesToSize"]; // Pass bytesToSize utility function to template
		return kendo.template(`
			#: bytesToSize(value) #
		`)(dataItem);
	};
}

function getNetworkSharedTemplate(categoryFormat = 'dd MMM HH:mm:ss') {
	return function(dataItem) {
		dataItem.kBytesToSize = _utils_utilities__WEBPACK_IMPORTED_MODULE_0__["kBytesToSize"]; // Pass kBytesToSize utility function to template
		return kendo.template(`
			<div class="chart-tooltip-category"><strong>#: kendo.toString(category, '${categoryFormat}') #</strong></div>
			# for (var i = 0; i < points.length; i++) { #
			<div>
				<i class="fas fa-square" style="color: #: points[i].color # "></i>
				#: points[i].series.name# : #: kBytesToSize(points[i].value, 1, '', '/s') #
			</div>
			# } #
		`)(dataItem);
	};
}

function getNetworkValueAxisLabelTemplate() {
	return function(dataItem) {
		dataItem.kBytesToSize = _utils_utilities__WEBPACK_IMPORTED_MODULE_0__["kBytesToSize"]; // Pass kBytesToSize utility function to template
		return kendo.template(`
			#: kBytesToSize(value, 1, '', '/s') #
		`)(dataItem);
	};
}

function getNetworkValueAxisLabelTemplateB() {
	return function(dataItem) {
		dataItem.bytesToSize = _utils_utilities__WEBPACK_IMPORTED_MODULE_0__["bytesToSize"]; // Pass bytesToSize utility function to template
		return kendo.template(`
			#: bytesToSize(value, 1, '', '/s') #
		`)(dataItem);
	};
}

function getUserCountSharedTemplate(categoryFormat = 'dd MMM HH:mm:ss') {
	return function(dataItem) {
		return kendo.template(`
			<div class="chart-tooltip-category"><strong>#: kendo.toString(category, '${categoryFormat}') #</strong></div>
			# for (var i = 0; i < points.length; i++) { #
			<div>
				<i class="fas fa-square" style="color: #: points[i].color # "></i>
				#: points[i].series.name# : #: points[i].value #
			</div>
			# } #
		`)(dataItem);
	};
}

function getTimeRangeTooltipTemplate() {
	return function(dataItem) {
		dataItem.getTooltipString = function(v1, v2) {
			if (v1 == v2)
			{
				if (v2 == -24)
					v2 = -23;

				v1 = v2 - 1;
			}

			let start = Math.abs(v1);
			let end = Math.abs(v2);

			return `From ${start} hour${start != 1 ? 's' : ''} ago to ${end > 0 ? ('to ' + end + ' hour' + (end != 1 ? 's' : '') + ' ago') : 'now'}`;
		}; // Pass utility function to template
		return kendo.template(`
			#: getTooltipString(selectionStart, selectionEnd) #
		`)(dataItem);
	};
}

function getWRBytesLabelTemplate() {
	return function(dataItem) {
		return kendo.template(`
			#: value # #: dataItem.unit #
		`)(dataItem);
	};
}

function getBasicTemplate(valueFormat = '{0}') {
	return kendo.template(`
		<div>
			<span class="text-nowrap">#: kendo.toString(new Date(value.x), "dd/MM/yy HH:mm") #</span>
			<br>
			<strong class="text-nowrap">#: series.name #: #: kendo.format('${valueFormat}', value.y) # </strong>
		</div>
	`);
}

function getMemoryTemplate() {
	return function(dataItem) {
		dataItem.bytesToSize = _utils_utilities__WEBPACK_IMPORTED_MODULE_0__["bytesToSize"]; // Pass bytesToSize utility function to template
		return kendo.template(`
			<div>
				<span class="text-nowrap">#: kendo.toString(new Date(value.x), "dd/MM/yy HH:mm") #</span>
				<br>
				<strong class="text-nowrap">#: series.name #: #: bytesToSize(value.y) # </strong>
			</div>
		`)(dataItem);
	};
}

function getNetworkTemplate() {
	return function(dataItem) {
		dataItem.bytesToSize = _utils_utilities__WEBPACK_IMPORTED_MODULE_0__["bytesToSize"]; // Pass bytesToSize utility function to template
		return kendo.template(`
			<div>
				<span class="text-nowrap">#: kendo.toString(new Date(value.x), "dd/MM/yy HH:mm") #</span>
				<br>
				<strong class="text-nowrap">#: series.name #: #: bytesToSize(value.y, 1, '', '/s') # </strong>
			</div>
		`)(dataItem);
	};
}


/***/ }),

/***/ "./src/components/charts/user-count-chart.js":
/*!***************************************************!*\
  !*** ./src/components/charts/user-count-chart.js ***!
  \***************************************************/
/*! exports provided: UserCountChart */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserCountChart", function() { return UserCountChart; });
/* harmony import */ var _chart_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chart-utils */ "./src/components/charts/chart-utils.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);



class UserCountChart extends HTMLElement
{
	constructor()
	{
	    super();

		// Create chart html
		let chartHtml = $('<div>');
		$(this).append(chartHtml);

		// Initialize chart
		this._chartWidget = this._initChartWidget(chartHtml);
	}

	_initChartWidget(chartHtml)
	{
		return chartHtml.kendoChart({
			transitions: false,
			chartArea: {
				height: 270,
				background: 'transparent'
			},
	        legend: {
	            visible: false
	        },
	        seriesDefaults: {
	            type: 'area',
	            labels: {
	                visible: false,
	                format: '{0}',
	                background: 'transparent'
	            },
	        },
	        series: [{
				name: 'Users',
	            field: 'users',
	            categoryField: 'time',
				color: '#fd7d24',
				line: {
					width: 2
				}
	        }],
	        valueAxis: {
	            labels: {
	                format: '{0}',
	            },
	            line: {
	                visible: false
	            },
				min: 0,
	        },
	        categoryAxis: {
				majorGridLines: {
	                visible: true,
					step: 60
	            },
				majorTicks: {
					visible: true,
					step: 60
				},
				labels: {
					visible: true,
					step: 60
				},
				baseUnit: 'minutes',
				type: 'date',
	        },
	        tooltip: {
				shared: true,
	            visible: true,
				sharedTemplate: Object(_chart_utils__WEBPACK_IMPORTED_MODULE_0__["getUserCountSharedTemplate"])('dd MMM HH:mm'),
				background: '#e4e4e4'
	        }
	    }).data('kendoChart');
	}

	redraw()
	{
		this._chartWidget.redraw();
	}

	set range(values)
	{
		this._range = values;

		this._updateXAxisLimits();
	}

	get range()
	{
		return this._range;
	}

	addHistoryEntries(userCountData, samplingRateSeconds)
	{
		let date = new Date();
		let start = moment__WEBPACK_IMPORTED_MODULE_1__(date);
		start.subtract((samplingRateSeconds * userCountData.length), 's')

		let dataSource = new kendo.data.DataSource();

		for (let i = 1; i < userCountData.length; i++)
		{
			let date = start.clone();
			date.add(i * samplingRateSeconds, 's');

			this.addEntry(userCountData[i], dataSource, date.toDate(), false);
		}

		// Assign datasource to chart
		this._chartWidget.setDataSource(dataSource);

		// Update axis
		this._updateXAxisLimits();
	}

	addEntry(userCount, dataSource = null, date = null, updateAxis = true)
	{
		if (date == null)
			date = new Date();

		let newEntry = {
			time: date,
			users: userCount
		};

		// Add entry to data source
		if (dataSource == null)
			dataSource = this._dataSource;

		dataSource.add(newEntry);

		if (updateAxis)
			this._updateXAxisLimits();
	}

	_updateXAxisLimits()
	{
		let ds = this._dataSource;

		if (ds.total() > 0)
		{
			const chartMinimum = moment__WEBPACK_IMPORTED_MODULE_1__(this._lastDate).add(this._range[0], 'h');
			const chartMaximum = moment__WEBPACK_IMPORTED_MODULE_1__(this._lastDate).add(this._range[1], 'h');

			this._chartWidget.options.categoryAxis.min = chartMinimum.toDate();
			this._chartWidget.options.categoryAxis.max = chartMaximum.toDate();

			this._chartWidget.redraw();
		}
	}

	get _dataSource()
	{
		return this._chartWidget.dataSource;
	}
}

// DEFINE COMPONENT
if (!window.customElements.get('user-count-chart'))
	window.customElements.define('user-count-chart', UserCountChart);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./src/components/module-specific/match-expression-builder.js":
/*!********************************************************************!*\
  !*** ./src/components/module-specific/match-expression-builder.js ***!
  \********************************************************************/
/*! exports provided: MatchExpressionBuilder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MatchExpressionBuilder", function() { return MatchExpressionBuilder; });
class MatchExpressionBuilder extends HTMLElement
{
	constructor()
	{
	    super();

		this.EXPRESSION_UPDATED_EVENT = 'expressionUpdated';

		this._dialog = $(`
			<div class="modal" id="matchExprBuilderModal" tabindex="-1" role="dialog" aria-labelledby="matchExprBuilderModalTitle" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title text-primary" id="matchExprBuilderModalTitle">...</h5>
						</div>
						<div class="modal-body p-0">
							<form class="bg-color-default p-3">
								<div class="d-inline-flex align-items-center radio-button-group inline-form-groups">
									<div class="custom-control custom-radio custom-control-inline mr-2">
										<input type="radio" id="andOperatorRB" name="operatorRBG" class="custom-control-input" value="AND" checked disabled>
										<label class="custom-control-label" for="andOperatorRB">AND</label>
									</div>
									<div class="custom-control custom-radio custom-control-inline mr-2">
										<input type="radio" id="orOperatorRB" name="operatorRBG" class="custom-control-input" value="OR" disabled>
										<label class="custom-control-label" for="orOperatorRB">OR</label>
									</div>
								</div>
								<div class="d-inline-block">
									<div class="inline-form-groups my-1">
										<input id="varNameCB"/>
									</div>
									<div class="inline-form-groups my-1">
										<input id="typeDD" class="matchTypeDropdown"/>
										<input id="conditionDD" class="matchConditionDropdown"/>
									</div>
								</div>
								<div class="d-inline inline-form-groups">
									<input id="valueIn" class="k-textbox mt-1" placeholder="Value"/>
									<button id="matchExprAddBt" type="button" class="k-button k-secondary mt-1"><i class="fas fa-plus mr-1"></i>Add</button>
								</div>
							</form>

							<div id="matchExprGrid" class="m-3"></div>
						</div>
						<div class="modal-footer d-flex">
							<div class="flex-grow-1 text-left">
								<button id="matchExprApplyBt" type="button" class="k-button k-primary mr-2"><i class="fas fa-check-circle mr-1"></i>Apply</button>
							</div>
							<div class="flex-grow-1 text-right">
								<button id="matchExprRemoveBt" type="button" class="k-button k-secondary" disabled><i class="fas fa-minus-circle mr-1"></i>Remove selected</button>
								<button id="matchExprClearBt" type="button" class="k-button k-secondary"><i class="fas fa-times-circle mr-1"></i>Clear all</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		`);

		$('#matchExprAddBt', this._dialog).on('click', $.proxy(this._onAddBtClick, this));
		$('#matchExprApplyBt', this._dialog).on('click', $.proxy(this._onApplyBtClick, this));
		$('#matchExprRemoveBt', this._dialog).on('click', $.proxy(this._onRemoveBtClick, this));
		$('#matchExprClearBt', this._dialog).on('click', $.proxy(this._onClearBtClick, this));

		// INITIALIZE FORM ITEMS

		this._varNameCb = $('#varNameCB', this._dialog).kendoComboBox({
			dataTextField: 'label',
			dataValueField: 'value',
			placeholder: 'Variable name',
		}).data('kendoComboBox');

		// Set types dropdown data source
		// NOTE: in order to avoid XxxMatch objects to be wrapped by Kendo data source, we have to pass them using _ property names
		let typeDS = [];

		// Boolean ----------------
		typeDS.push({
			label: 'Boolean',
			_value: SFS2X.BoolMatch.EQUALS,
			conditions: [
				{
					label: SFS2X.BoolMatch.EQUALS.symbol,
					_value: SFS2X.BoolMatch.EQUALS,
				},
				{
					label: SFS2X.BoolMatch.NOT_EQUALS.symbol,
					_value: SFS2X.BoolMatch.NOT_EQUALS,
				}
			]
		});

		// Number ----------------
		typeDS.push({
			label: 'Number',
			_value: SFS2X.NumberMatch.EQUALS,
			conditions: [
				{
					label: SFS2X.NumberMatch.EQUALS.symbol,
					_value: SFS2X.NumberMatch.EQUALS,
				},
				{
					label: SFS2X.NumberMatch.NOT_EQUALS.symbol,
					_value: SFS2X.NumberMatch.NOT_EQUALS,
				},
				{
					label: SFS2X.NumberMatch.GREATER_THAN.symbol,
					_value: SFS2X.NumberMatch.GREATER_THAN,
				},
				{
					label: SFS2X.NumberMatch.LESS_THAN.symbol,
					_value: SFS2X.NumberMatch.LESS_THAN,
				},
				{
					label: SFS2X.NumberMatch.GREATER_THAN_OR_EQUAL_TO.symbol,
					_value: SFS2X.NumberMatch.GREATER_THAN_OR_EQUAL_TO,
				},
				{
					label: SFS2X.NumberMatch.LESS_THAN_OR_EQUAL_TO.symbol,
					_value: SFS2X.NumberMatch.LESS_THAN_OR_EQUAL_TO,
				}
			]
		});

		// String ----------------
		typeDS.push({
			label: 'String',
			_value: SFS2X.StringMatch.EQUALS,
			conditions: [
				{
					label: SFS2X.StringMatch.EQUALS.symbol,
					_value: SFS2X.StringMatch.EQUALS,
				},
				{
					label: SFS2X.StringMatch.NOT_EQUALS.symbol,
					_value: SFS2X.StringMatch.NOT_EQUALS,
				},
				{
					label: SFS2X.StringMatch.CONTAINS.symbol,
					_value: SFS2X.StringMatch.CONTAINS,
				},
				{
					label: SFS2X.StringMatch.STARTS_WITH.symbol,
					_value: SFS2X.StringMatch.STARTS_WITH,
				},
				{
					label: SFS2X.StringMatch.ENDS_WITH.symbol,
					_value: SFS2X.StringMatch.ENDS_WITH,
				}
			]
		});

		this._typeDd = $('#typeDD', this._dialog).kendoDropDownList({
			dataSource: typeDS,
			dataTextField: 'label',
			dataValueField: '_value',
			optionLabel: {
				label: 'Type',
				_value: ''
			},
			optionLabelTemplate: '<span class="text-muted">#:label#</span>',
			change: $.proxy(function() {
				if (this._typeDd && this._typeDd.select())
				{
					let selectedType = this._typeDd.dataItem(this._typeDd.select());
					this._conditionDd.setDataSource(selectedType.conditions);
					this._conditionDd.select(1);
				}
			}, this)
		}).data('kendoDropDownList');

		this._conditionDd = $('#conditionDD', this._dialog).kendoDropDownList({
			dataTextField: 'label',
			dataValueField: '_value',
			optionLabel: {
				label: 'Condition',
				_value: ''
			},
			optionLabelTemplate: '<span class="text-muted">#:label#</span>',
		}).data('kendoDropDownList');

		this._valueIn = $('#valueIn', this._dialog);

		// INITIALIZE GRID

		this._grid = $('#matchExprGrid', this._dialog).kendoGrid({
			dataSource: [],
			resizable: true,
			selectable: 'row',
			change: $.proxy(this._onGridSelectionChange, this),
			noRecords: {
				template: 'No entries.'
			},
			columns: [
				{
					field: 'operator',
					title: 'Operator',
					width: 90
				},
				{
					field: 'label',
					title: 'Name',
					width: 120
				},
				{
					field: 'typeLabel',
					title: 'Type',
					width: 85
				},
				{
					field: 'symbol',
					title: 'Condition',
					width: 95
				},
				{
					field: 'value',
					title: 'Value',
					width: 200
				},
			]
		}).data('kendoGrid');
	}

	get title()
	{
		return $('#matchExprBuilderModalTitle', this._dialog).text();
	}

	set title(value)
	{
		$('#matchExprBuilderModalTitle', this._dialog).text(value);
	}

	get predefinedVarNames()
	{
		return this._predefinedVarNames;
	}

	set predefinedVarNames(value)
	{
		this._predefinedVarNames = value;

		this._varNameCb.setDataSource(value);
	}

	get filterExpression()
	{
		return this._filterExpression;
	}

	show()
	{
		this._dialog.modal({
			backdrop: 'static',
			keyboard: false,
			show: true
		});
	}

	_onGridSelectionChange()
	{
		let selectedRows = this._grid.select();
		let selectedDataItems = [];

		for (let i = 0; i < selectedRows.length; i++)
		{
			let dataItem = this._grid.dataItem(selectedRows[i]);
			selectedDataItems.push(dataItem);
		}

		// Enable/disable remove button
		$('#matchExprRemoveBt', this._dialog).attr('disabled', selectedDataItems.length == 0);
	}

	_onAddBtClick()
	{
		if (this._varNameCb.value() != '' && this._typeDd.select())
		{
			// Variable name and label
			let varName, varLabel;

			if (this._varNameCb.select() > -1)
			{
				let dataItem = this._varNameCb.dataItem(this._varNameCb.select());
				varName = dataItem.value;
				varLabel = dataItem.label;
			}
			else
				varName = varLabel = this._varNameCb.value();

			// Variable type's label
			let typeLabel = this._typeDd.dataItem(this._typeDd.select()).label;

			// Match condition
			let condition = this._conditionDd.dataItem(this._conditionDd.select())._value;

			// Expression operator
			let operator = this._grid.dataSource.total() > 0 ? $('input[name=operatorRBG]:checked', this._dialog).val() : null;

			// Variable value
			let val = this._valueIn.val();
			let varValue;

			if (condition instanceof SFS2X.BoolMatch)
				varValue = (val == 'true' ? true : false);
			else if (condition instanceof SFS2X.NumberMatch)
				varValue = (isNaN(Number(val)) ? 0 : Number(val));
			else
				varValue = val;

			// Add item to grid
			let exprPart = this._getExpressionPart(varLabel, varName, varValue, typeLabel, condition, operator);
			this._grid.dataSource.add(exprPart);

			// Reset inputs
			this._varNameCb.value('');
			this._valueIn.val('');

			// Enable operator radio buttons
			this._enableOperatorRb(true);
		}
	}

	_onApplyBtClick()
	{
		// Hide dialog
		this._dialog.modal('hide');

		// Clear grid selection
		this._grid.clearSelection();

		// Build final match expression
		this._filterExpression = null;

		if (this._grid.dataSource.total() > 0)
		{
			let expPart = this._grid.dataSource.at(0);
			this._filterExpression = new SFS2X.MatchExpression(expPart.name, expPart._condition, expPart.value);

			for (let i = 1; i < this._grid.dataSource.total(); i++)
			{
				expPart = this._grid.dataSource.at(i);

				if (expPart.operator == SFS2X.LogicOperator.AND.id)
					this._filterExpression = this._filterExpression.and(expPart.name, expPart._condition, expPart.value);
				else if (expPart.operator == SFS2X.LogicOperator.OR.id)
					this._filterExpression = this._filterExpression.or(expPart.name, expPart._condition, expPart.value);
			}
		}

		// Fire event
		let evt = new CustomEvent(this.EXPRESSION_UPDATED_EVENT, {
		    	detail: null,
				bubbles: false,
				cancelable: false
			});

		this.dispatchEvent(evt);
	}

	_onRemoveBtClick()
	{
		let dataItem = this._grid.dataItem(this._grid.select());
		this._grid.dataSource.remove(dataItem);

		// Clear grid selection
		this._grid.clearSelection();

		if (this._grid.dataSource.total() == 0)
		{
			// Disable operator radio buttons
			this._enableOperatorRb(false);
		}
		else
		{
			// Reset operator on first entry
			this._grid.dataSource.at(0).operator = null;
			this._grid.refresh();
		}
	}

	_onClearBtClick()
	{
		// Reset form
		$('#andOperatorRB', this._dialog).attr('checked', true);
		$('#orOperatorRB', this._dialog).attr('checked', false);
		this._enableOperatorRb(false);

		this._varNameCb.value('');
		this._typeDd.select(0);
		this._conditionDd.select(0);

		this._valueIn.val('');

		// Clear grid selection
		this._grid.clearSelection();

		// Clear table
		this._grid.setDataSource([]);
	}

	_getExpressionPart(varLabel, varName, varValue, typeLabel, condition, operator)
	{
		return {
			'label': varLabel,
			'name': varName,
			'value': varValue,
			'typeLabel': typeLabel,
			'symbol': condition.symbol,
			'operator': operator,
			'_condition': condition,
		};
	}

	_enableOperatorRb(enable)
	{
		$('#andOperatorRB', this._dialog).attr('disabled', !enable);
		$('#orOperatorRB', this._dialog).attr('disabled', !enable);
	}
}

// DEFINE COMPONENT
if (!window.customElements.get('match-expression-builder'))
	window.customElements.define('match-expression-builder', MatchExpressionBuilder);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./src/components/sidebar-layout.js":
/*!******************************************!*\
  !*** ./src/components/sidebar-layout.js ***!
  \******************************************/
/*! exports provided: SidebarLayout */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SidebarLayout", function() { return SidebarLayout; });
class SidebarLayout extends HTMLElement
{
	constructor()
	{
	    super();

		// Attach a shadow root
		const shadowRoot = this.attachShadow({mode: 'open'});
		shadowRoot.innerHTML = `
			<style>
				:host {
					display: flex;
					flex-direction: row;
				}

				@media (max-width: 575.98px) {
					:host(.split-xs) ::slotted(:not([aria-selected="true"])) {
						display: none !important;
				    }

					:host(.split-xs) ::slotted([aria-selected="true"]) {
						flex-grow: 1;
				    }
				}

				@media (max-width: 767.98px) {
					:host(.split-sm) ::slotted(:not([aria-selected="true"])) {
						display: none !important;
				    }

					:host(.split-sm) ::slotted([aria-selected="true"]) {
						flex-grow: 1;
				    }
				}

				@media (max-width: 991.98px) {
					:host(.split-md) ::slotted(:not([aria-selected="true"])) {
						display: none !important;
				    }

					:host(.split-md) ::slotted([aria-selected="true"]) {
						flex-grow: 1;
				    }
				}

				@media (max-width: 1199.98px) {
					:host(.split-lg) ::slotted(:not([aria-selected="true"])) {
						display: none !important;
				    }

					:host(.split-lg) ::slotted([aria-selected="true"]) {
						flex-grow: 1;
				    }
				}

				.side-col::slotted(*) {
				}

				.main-col::slotted(*) {
					flex-grow: 1;
				}
			</style>

			<slot class="side-col" name="side-column"></slot>
			<slot class="main-col" name="main-column"></slot>
		`;

		// Set initial selection
		this.selectedIndex = 0;
	}

	get selectedPanel()
	{
		return this._selectedPanel;
	}

	set selectedPanel(element) // 'side' or 'main'
	{
		if (element != null && element.parentNode == this)
		{
			this._selectedPanel = element;

			for (let element of this.children)
			{
				if (element == this._selectedPanel)
					element.setAttribute('aria-selected', 'true');
				else
					element.removeAttribute('aria-selected');
			}
		}
		else
		{
			console.error('Element is not a child of SidebarLayout');
		}
	}

	get selectedIndex()
	{
		return Array.from(this.children).indexOf(this._selectedPanel);
	}

	set selectedIndex(index)
	{
		if (this.children.length > 0)
		{
			if (this.children[index] == null)
			{
				console.error('Invalid SidebarLayout index');
				return;
			}

			let element = this.children[index];
			this.selectedPanel = element;
		}
	}
}

// DEFINE COMPONENT
if (!window.customElements.get('sidebar-layout'))
	window.customElements.define('sidebar-layout', SidebarLayout);


/***/ }),

/***/ "./src/modules/zone-monitor.js":
/*!*************************************!*\
  !*** ./src/modules/zone-monitor.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ZoneMonitor; });
/* harmony import */ var _base_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-module */ "./src/modules/base-module.js");
/* harmony import */ var _components_sidebar_layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/sidebar-layout */ "./src/components/sidebar-layout.js");
/* harmony import */ var _components_module_specific_match_expression_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/module-specific/match-expression-builder */ "./src/components/module-specific/match-expression-builder.js");
/* harmony import */ var _utils_uibuilder_config_interface_builder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/uibuilder/config-interface-builder */ "./src/utils/uibuilder/config-interface-builder.js");
/* harmony import */ var _utils_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/utilities */ "./src/utils/utilities.js");
/* harmony import */ var _utils_match_properties__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/match-properties */ "./src/utils/match-properties.js");
/* harmony import */ var _components_charts_user_count_chart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/charts/user-count-chart */ "./src/components/charts/user-count-chart.js");
/* harmony import */ var _components_charts_chart_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/charts/chart-utils */ "./src/components/charts/chart-utils.js");









class ZoneMonitor extends _base_module__WEBPACK_IMPORTED_MODULE_0__["BaseModule"]
{
	constructor()
	{
	    super('zoneMonitor');

		this.MONITORED_TYPE_ZONE = 'zone';
		this.MONITORED_TYPE_ROOM = 'room';
		this.MONITORED_TYPE_USER = 'user';

		this.ANY_LABEL = '[any]';
		this.DEFAULT_GROUP_NAME = 'default';
		this.MAX_EXTENSION_LOG_SIZE = 300;
		this.KICK_BAN_DEFAULT_DELAY = 5;

		// Outgoing requests
		this.REQ_GET_DATA = 'getData';
		this.REQ_SET_ZONE_SETTINGS = 'setZoneSettings';
		this.REQ_SET_ROOM_SETTINGS = 'setRoomSettings';
		this.REQ_SET_USER_SETTINGS = 'setUserSettings';
		this.REQ_RELOAD_ZONE_EXT = 'reloadZoneExt';
		this.REQ_RELOAD_WORDS = 'reloadWords';
		this.REQ_DISCONNECT_USER = 'disconnUser';
		this.REQ_KICK_USER = 'kickUser';
		this.REQ_BAN_USER = 'banUser';
		this.REQ_GET_ROOM_CONFIG = 'getRoomConfig';
		this.REQ_CREATE_ROOM = 'createRoom';
		this.REQ_REMOVE_ROOM = 'removeRoom';
		this.REQ_ADMIN_MSG = 'adminMsg';

		// Incoming responses
		this.RESP_DATA = 'data';
		this.RESP_UNEXPECTED_ERROR = 'unexpError';
		this.RESP_UPDATE_ERROR = 'updateError';
		this.RESP_ROOM_CONFIG = 'roomConfig';
		this.RESP_ROOM_CONFIG_ERROR = 'roomConfigErr';
		this.RESP_ROOM_CREATED = 'roomCreated';
		this.RESP_ROOM_CREATION_ERROR = 'roomError';
		this.RESP_LOG_MESSAGES = 'log'; // This response doesn't have a corresponding request because it is managed by a server event listener

		this._currentRequestId = -1;
	}

	//------------------------------------
	// COMMON MODULE INTERFACE METHODS
	// This members are used by the main controller
	// to communicate with the module's controller.
	//------------------------------------

	initialize(idData, shellController)
	{
		// Call super method
		super.initialize(idData, shellController);

		// Set monitoring interface
		this._setMonitoringInterface();

		// Initialize progress bar
		$('#znm-progressBar').kendoProgressBar({
			min: 0,
            max: 100,
			value: false,
            type: 'value',
            animation: {
                duration: 400
            }
        });

		// LISTS

		// Initialize interval dropdown
		this._intervalDropDown = $('#znm-intervalDD').kendoDropDownList({
			valueTemplate: '<span class="text-muted pr-1">Interval:</span><span>#:data.text#</span>',
			change: $.proxy(this._onUpdateIntervalChange, this)
		}).data('kendoDropDownList');

		// Initialize pane bar
		this._accordion = $('#znm-panelbar').kendoPanelBar({
            expandMode: 'single',
			change: $.proxy(this._onEntitiesPanelChange, this)
        }).data('kendoPanelBar');

		// Initialize lists
		this._zoneListBox = $("#znm-zoneList").kendoListBox({
			template: '<div>#:data.name# (#:data.users#)</div>',
			change: $.proxy(this._onZoneSelected, this)
		}).data('kendoListBox');

		this._zoneListBox.wrapper.find('.k-list').on('dblclick', '.k-item', $.proxy(this._onMonitorSelectionBtClick, this));

		this._roomListBox = $("#znm-roomList").kendoListBox({
			template: '<div>#:data.name# (#:data.users#)</div>',
			change: $.proxy(this._onRoomSelected, this)
		}).data('kendoListBox');

		this._roomListBox.wrapper.find('.k-list').on('dblclick', '.k-item', $.proxy(this._onMonitorSelectionBtClick, this));

		this._userListBox = $("#znm-userList").kendoListBox({
			template: '<div>#:data.name#</div>',
			change: $.proxy(this._onUserSelected, this)
		}).data('kendoListBox');

		this._userListBox.wrapper.find('.k-list').on('dblclick', '.k-item', $.proxy(this._onMonitorSelectionBtClick, this));

		// Initialize Room Groups dropdown
		this._groupsDropDown = $('#znm-roomGroupsDD').kendoDropDownList({
			dataTextField: 'label',
  			dataValueField: 'name',
			change: $.proxy(this._onGroupChange, this)
		}).data('kendoDropDownList');

		// Build initial groups list
		this._setGroupsDataProvider(null);

		// Create interface builder instances
		this._interfaceBuilder = new _utils_uibuilder_config_interface_builder__WEBPACK_IMPORTED_MODULE_3__["ConfigInterfaceBuilder"]();
		this._roomCreationIBuilder = new _utils_uibuilder_config_interface_builder__WEBPACK_IMPORTED_MODULE_3__["ConfigInterfaceBuilder"]();

		// Add listener to show limit warning tooltips
		$('#znm-panelbar').kendoTooltip({
			filter: 'i[title].limit-warning',
			position: 'right',
			width: '250px',
			content: function(e) {
				return `<div class="help-tooltip">${e.target.data('title')}</div>`;
			}
		});

		// ROOM CREATION PANEL

		// Add click listener to Create & Remove Room buttons
		$('#znm-createRoomBt').on('click', $.proxy(this._onCreateRoomBtClick, this));
		$('#znm-removeRoomBt').on('click', $.proxy(this._onRemoveRoomBtClick, this));

		// Configure room creation panel
		$('#znm-createRoomModal').modal({
			backdrop: 'static',
			keyboard: false,
			show: false,
		});

		// Add listener for room creation panel's create button click
		$('#znm-roomCreatorCreateBt').on('click', $.proxy(this._onRoomCreatorCreateBtClick, this));

		// Add listener for room creation panel hide
		$('#znm-createRoomModal').on('hidden.bs.modal', $.proxy(this._onCreateRoomModalHidden, this));

		// ROOM & USER FILTERING PANELS

		// Setup match expression builder panel for rooms
		this._roomFilter = document.getElementById('znm-roomFilter');
		this._roomFilter.title = 'Room Filter Expression Builder';
		this._roomFilter.predefinedVarNames = _utils_match_properties__WEBPACK_IMPORTED_MODULE_5__["RoomPropertiesData"].propertiesArray;
		$(this._roomFilter).on(this._roomFilter.EXPRESSION_UPDATED_EVENT, $.proxy(this._onRoomFilterUpdated, this));

		$('#znm-filterRoomBt').on('click', $.proxy(this._onShowRoomFilterBtClick, this));
		$('#znm-applyRoomFilterCB').on('change', $.proxy(this._onApplyBtChange, this));

		// Setup match expression builder panel for users
		this._userFilter = document.getElementById('znm-userFilter');
		this._userFilter.title = 'User Filter Expression Builder';
		this._userFilter.predefinedVarNames = _utils_match_properties__WEBPACK_IMPORTED_MODULE_5__["UserPropertiesData"].propertiesArray;
		$(this._userFilter).on(this._userFilter.EXPRESSION_UPDATED_EVENT, $.proxy(this._onUserFilterUpdated, this));

		$('#znm-filterUserBt').on('click', $.proxy(this._onShowUserFilterBtClick, this));
		$('#znm-applyUserFilterCB').on('change', $.proxy(this._onApplyBtChange, this));

		// MAIN CONTROLS

		$('#znm-monitorBt').on('click', $.proxy(this._onMonitorSelectionBtClick, this));
		$('#znm-sendMessageBt').on('click', $.proxy(this._onSendAdminMsgBtClick, this));
		$('#znm-messageIn').on('keyup', $.proxy(this._onSendAdminMsgInKeyUp, this));

		// MONITORING CONTROLS

		$('#znm-closeMonitorBt').on('click', $.proxy(this._onCloseMonitorBtClick, this));
		$('#znm-editBt').on('click', $.proxy(this._onEditBtClick, this));
		$('#znm-cancelBt').on('click', $.proxy(this._onCancelBtClick, this));
		$('#znm-submitBt').on('click', $.proxy(this._onSubmitBtClick, this));

		// Hide edit controls
		$('#znm-editControls').hide();

		// ZONE MONITOR ---------------------

		// Set reference to user count chart
		this._userCountChart = document.getElementById('znm-userCountChart');

		// Initialize time range slider
		this._timeSlider = $('#znm-timeSlider').kendoRangeSlider({
			min: -24,
            max: 0,
            smallStep: 1,
            largeStep: 0,
			change: $.proxy(this._onTimeRangeChange, this),
			tooltip: {
				template: Object(_components_charts_chart_utils__WEBPACK_IMPORTED_MODULE_7__["getTimeRangeTooltipTemplate"])()
			},
			leftDragHandleTitle: 'Drag',
			rightDragHandleTitle: 'Drag',
		}).data('kendoRangeSlider');

		// Reset time range on user count chart
		this._onTimeRangeChange();

		// Add button click listeners
		$('#znm-reloadWordsBt').on('click', $.proxy(this._onWordsReloadBtClick, this));
		$('#znm-reloadZoneExtBt').on('click', $.proxy(this._onZoneExtReloadBtClick, this));

		// Initialize extension log grid
		this._zoneExtLogGrid = $('#znm-zoneExtLogGrid').kendoGrid({
			dataSource: [],
			resizable: true,
			selectable: false,
			noRecords: {
				template: 'No entries.'
			},
			columns: [
				{
					field: 'timestamp',
					title: 'Timestamp',
					width: 180
				},
				{
					field: 'level',
					title: 'Level',
					width: 100
				},
				{
					field: 'message',
					title: 'Message',
					width: 400
				},
			],
			dataBound: function() {
			    this.content.scrollTop(this.tbody.height()); // Scroll to bottom
			}
		}).data('kendoGrid');

		// ROOM MONITOR ---------------------

		// Initialize extension log grid
		this._roomExtLogGrid = $('#znm-roomExtLogGrid').kendoGrid({
			dataSource: [],
			resizable: true,
			selectable: false,
			noRecords: {
				template: 'No entries.'
			},
			columns: [
				{
					field: 'timestamp',
					title: 'Timestamp',
					width: 180
				},
				{
					field: 'level',
					title: 'Level',
					width: 100
				},
				{
					field: 'message',
					title: 'Message',
					width: 400
				},
			],
			dataBound: function() {
			    this.content.scrollTop(this.tbody.height()); // Scroll to bottom
			}
		}).data('kendoGrid');

		// USER MONITOR ---------------------

		this._kickDelayIn = $('#znm-kickDelayNS').kendoNumericTextBox({
		    min: 0,
		    step: 1,
		    format: '#',
			placeholder: 'Delay (s)'
		}).data('kendoNumericTextBox');

		this._banModeDd = $('#znm-banModeDD').kendoDropDownList({
			dataSource: ['IP', 'NAME'],
			autoWidth: true,
			optionLabel: {
				text: 'Mode'
			},
			optionLabelTemplate: '<span class="text-muted">#:text#</span>',
		}).data('kendoDropDownList');

		this._banDurUnitDd = $('#znm-banDurationUnitDD').kendoDropDownList({
			autoWidth: true,
		}).data('kendoDropDownList');

		this._banDurationIn = $('#znm-banDurationNS').kendoNumericTextBox({
		    min: 1,
		    step: 1,
		    format: '#',
			placeholder: 'Duration'
		}).data('kendoNumericTextBox');

		this._banDelayIn = $('#znm-banDelayNS').kendoNumericTextBox({
		    min: 0,
		    step: 1,
		    format: '#',
			placeholder: 'Delay (s)'
		}).data('kendoNumericTextBox');

		// Add button click listeners
		$('#znm-disconnectBt').on('click', $.proxy(this._onDisconnectBtClick, this));
		$('#znm-kickBt').on('click', $.proxy(this._onKickBtClick, this));
		$('#znm-banBt').on('click', $.proxy(this._onBanBtClick, this));

		// Charts

		this._packetQueueChart = $('#znm-packetQueueChart').kendoChart({
			transitions: false,
			chartArea: {
				height: 100
			},
	        legend: {
	            visible: false
	        },
	        seriesDefaults: {
	            type: 'bar',
	            labels: {
	                visible: true,
	                format: '{0}%',
	                background: 'transparent',
					position: 'insideBase'
	            },
				gap: .5,
				spacing: 0,
				overlay: {
					gradient: 'none'
				},
				border: {
					width: 0
				}
	        },
	        series: [
				{
					name: 'Packet queue',
		            field: 'value',
		            categoryField: 'category',
					color: '#FB7D33'
		        }
			],
	        valueAxis: {
	            labels: {
	                format: '{0}%'
	            },
	            line: {
	                visible: false
	            },
				min: 0,
	    		max: 100
	        },
	        categoryAxis: {
	            majorGridLines: {
	                visible: false
	            },
				majorTicks: {
					visible: false
				},
				labels: {
					visible: false
				}
	        },
			tooltip: {
				visible: false,
	        }
	    }).data('kendoChart');

		this._droppedMsgChart = $('#znm-droppedMsgChart').kendoChart({
			transitions: false,
			chartArea: {
				height: 100
			},
	        legend: {
	            visible: false
	        },
	        seriesDefaults: {
	            type: 'bar',
	            labels: {
	                visible: true,
	                format: '{0}',
	                background: 'transparent',
					position: 'insideBase',
	            },
				gap: .5,
				spacing: 0,
				overlay: {
					gradient: 'none'
				},
				border: {
					width: 0
				}
	        },
	        series: [
				{
					name: 'Dropped messages',
		            field: 'value',
		            categoryField: 'category',
					color: '#FB7D33'
		        }
			],
	        valueAxis: {
	            labels: {
	                format: '{0}'
	            },
	            line: {
	                visible: false
	            },
				min: 0,
	        },
	        categoryAxis: {
	            majorGridLines: {
	                visible: false
	            },
				majorTicks: {
					visible: false
				},
				labels: {
					visible: false
				}
	        },
			tooltip: {
				visible: false,
	        }
	    }).data('kendoChart');

		this._writtenDataChart = $('#znm-writtenDataChart').kendoChart({
			transitions: false,
			chartArea: {
				height: 100
			},
	        legend: {
	            visible: false
	        },
	        seriesDefaults: {
	            type: 'bar',
	            labels: {
	                visible: true,
	                format: '{0}',
	                background: 'transparent',
					position: 'insideBase',
					template: Object(_components_charts_chart_utils__WEBPACK_IMPORTED_MODULE_7__["getWRBytesLabelTemplate"])(),
	            },
				gap: .5,
				spacing: 0,
				overlay: {
					gradient: 'none'
				},
				border: {
					width: 0
				}
	        },
	        series: [
				{
					name: 'Written data',
		            field: 'value',
		            categoryField: 'category',
					color: '#FB7D33'
		        }
			],
	        valueAxis: {
	            labels: {
	                format: '{0}'
	            },
	            line: {
	                visible: false
	            },
				min: 0,
	        },
	        categoryAxis: {
	            majorGridLines: {
	                visible: false
	            },
				majorTicks: {
					visible: false
				},
				labels: {
					visible: false
				}
	        },
			tooltip: {
				visible: false,
	        }
	    }).data('kendoChart');

		this._readDataChart = $('#znm-readDataChart').kendoChart({
			transitions: false,
			chartArea: {
				height: 100
			},
	        legend: {
	            visible: false
	        },
	        seriesDefaults: {
	            type: 'bar',
	            labels: {
	                visible: true,
	                format: '{0}',
	                background: 'transparent',
					position: 'insideBase',
					template: Object(_components_charts_chart_utils__WEBPACK_IMPORTED_MODULE_7__["getWRBytesLabelTemplate"])(),
	            },
				gap: .5,
				spacing: 0,
				overlay: {
					gradient: 'none'
				},
				border: {
					width: 0
				}
	        },
	        series: [
				{
					name: 'Read data',
		            field: 'value',
		            categoryField: 'category',
					color: '#FB7D33'
		        }
			],
	        valueAxis: {
	            labels: {
	                format: '{0}'
	            },
	            line: {
	                visible: false
	            },
				min: 0,
	        },
	        categoryAxis: {
	            majorGridLines: {
	                visible: false
	            },
				majorTicks: {
					visible: false
				},
				labels: {
					visible: false
				}
	        },
			tooltip: {
				visible: false,
	        }
	    }).data('kendoChart');

		//-------------------------------

		// Add listener to redraw all charts in case of window resize
		$(window).on('resize', $.proxy(this._onWindowResize, this));
		this._onWindowResize(); // Also do it immediately

		// Request data to server
		this._requestData(true);
	}

	destroy()
	{
		// Call super method
		super.destroy();

		// Close monitoring
		this._onCloseMonitorBtClick();

		// Remove doubleclick event listeners
		this._zoneListBox.wrapper.find('.k-list').off('dblclick');
		this._roomListBox.wrapper.find('.k-list').off('dblclick');
		this._userListBox.wrapper.find('.k-list').off('dblclick');

		// Remove other event listeners
		$('#znm-createRoomBt').off('click');
		$('#znm-removeRoomBt').off('click');
		$('#znm-roomCreatorCreateBt').off('click');
		$('#znm-filterRoomBt').off('click');
		$('#znm-applyRoomFilterCB').off('change');
		$('#znm-filterUserBt').off('click');
		$('#znm-applyUserFilterCB').off('change');
		$('#znm-monitorBt').off('click');
		$('#znm-sendMessageBt').off('click');
		$('#znm-messageIn').off('keyup');
		$('#znm-closeMonitorBt').off('click');
		$('#znm-editBt').off('click');
		$('#znm-cancelBt').off('click');
		$('#znm-submitBt').off('click');
		$(window).off('resize');
		$('#znm-reloadWordsBt').off('click');
		$('#znm-reloadZoneExtBt').off('click');
		$('#znm-disconnectBt').off('click');
		$('#znm-kickBt').off('click');
		$('#znm-banBt').off('click');

		// Clear request scheduling
		clearTimeout(this._requestTimer);

		// Hide room creation panel
		$('#znm-createRoomModal').modal('hide');

		// Remove room creation panel listener
		$('#znm-createRoomModal').off('hidden.bs.modal');

		// Remove filter panels listeners
		$(this._roomFilter).off(this._roomFilter.EXPRESSION_UPDATED_EVENT);
		$(this._userFilter).off(this._userFilter.EXPRESSION_UPDATED_EVENT);
	}

	onExtensionCommand(command, data)
	{
		// Data received
		if (command == this.RESP_DATA)
		{
			// We have to check if the response id corresponds to the current request id;
			// if not, the response is discarded as it refers to an outdatet request
			const responseId = data.getInt('id');

			if (responseId == this._currentRequestId)
			{
				// --- ZONES LIST ---
				if (data.containsKey('zones'))
				{
					this._setZonesDataProvider(data.getSFSArray('zones'));

					if (this._selectedZone)
						this._setScopeLabel();
				}

				// --- ROOMS LIST ---
				if (data.containsKey('rooms'))
				{
					this._setGroupsDataProvider(data.getUtfStringArray('groups'));

					// -------------------------------

					// If a null rooms list is returned, the zone must have been deleted!
					if (!data.isNull('rooms'))
					{
						this._setRoomsDataProvider(data.getSFSArray('rooms'));

						if (!this._selectedRoom)
							this._setScopeLabel();

						// -------------------------------

						// Show warning if the rooms list exceeds the server-side limit
						if (data.containsKey('rSize'))
							this._showLimitExceededWarning($('#znm-roomListWarning'), 'The received list is incomplete, because its size (' + data.getInt('rSize') + ' Rooms) exceeded this client\'s limit of ' + data.getInt('rLimit') + '; you should refine your search');
						else
							this._showLimitExceededWarning($('#znm-roomListWarning'), '');
					}
					else
					{
						if (this._activePanelType == 'room')
						{
							this._accordion.select('[data-item-type="zone"]');
							this._accordion.expand('[data-item-type="zone"]');
							this._onZoneSelected();
							this._onEntitiesPanelChange();
						}
					}
				}

				// --- USERS LIST ---
				if (data.containsKey('users'))
				{
					// If a null users list is returned, the room must have been deleted!
					if (!data.isNull('users'))
					{
						this._setUsersDataProvider(data.getSFSArray('users'));

						// Show warning if the users list exceeds the server-side limit
						if (data.containsKey('uSize'))
							this._showLimitExceededWarning($('#znm-userListWarning'), 'The received list is incomplete, because its size (' + data.getInt('uSize') + ' users) exceeds this client\'s limit of ' + data.getInt('uLimit') + '; you should refine your search');
						else
							this._showLimitExceededWarning($('#znm-userListWarning'), '');
					}
					else
					{
						if (this._activePanelType == 'user')
						{
							this._accordion.select('[data-item-type="room"]');
							this._accordion.expand('[data-item-type="room"]');
							this._onRoomSelected();
							this._onEntitiesPanelChange();
						}
					}
				}

				// --- MONITORED DATA ---
				if (data.containsKey('monitored'))
				{
					const zone = data.getSFSObject('monitored').getUtfString('zone');
					const type = data.getSFSObject('monitored').getUtfString('type');
					const name = data.getSFSObject('monitored').getUtfString('name');

					if (zone == this._monitoredZone && type == this._monitoredType && name == this._monitoredName)
					{
						if (!data.getSFSObject('monitored').isNull('params'))
						{
							const params = data.getSFSObject('monitored').getSFSArray('params');

							this._setMonitoringInterface();

							// Build interface
							if (!this._isEditing)
							{
								this._interfaceBuilder.buildInterface(params, `znm-${this._monitoredType}TabNavigator`, true);

								if (!this._skipInitTabs)
								{
									$(`#znm-${this._monitoredType}TabNavigator #tabs`).scrollingTabs({
										bootstrapVersion: 4,
										scrollToTabEdge: true,
										enableSwiping: true,
										disableScrollArrowsOnFullyScrolled: true,
										cssClassLeftArrow: 'fa fa-chevron-left',
										cssClassRightArrow: 'fa fa-chevron-right'
									});

									this._skipInitTabs = true;

									// Set first tab panel as active
									this._interfaceBuilder.activateFirstTabPanel();

									// Redraw time range slider to set its width
									this._timeSlider.resize();

									// Add listener to redraw all charts on tab change
									// (to work around an issue with the chart resizing to default width when pane is hidden)
									$('a[data-toggle="tab"]').on('shown.bs.tab', $.proxy(this._onWindowResize, this));
								}
							}

							// Disable categories
							let disabledCat = (data.getSFSObject('monitored').containsKey('exclude') ? data.getSFSObject('monitored').getUtfStringArray('exclude') : []);

							for (let cat of disabledCat)
							{
								let navLink = $(`#znm-${this._monitoredType}TabNavigator #tabs #tab-${cat}`);

								navLink.addClass('disabled');
								navLink.attr('tabindex', -1);
								navLink.attr('aria-disabled', true);
							}

							if (this._monitoredType == this.MONITORED_TYPE_ZONE)
								this._showZoneTrafficData(data.getSFSObject('monitored').getSFSObject('traffic'));

							if (this._monitoredType == this.MONITORED_TYPE_USER)
							{
								// Stats
								this._showUserStatsData(data.getSFSObject('monitored').getSFSObject('stats'));

								// NPC
								const isNpc = data.getSFSObject('monitored').getBool('npc');

								// Disable disconnect, kick and ban buttons
								$('#znm-disconnectBt').attr('disabled', isNpc);
								$('#znm-kickBt').attr('disabled', isNpc);
								$('#znm-banBt').attr('disabled', isNpc);

								// Geo-location
								const geoLocData = data.getSFSObject('monitored').getSFSObject('geoLoc');
								this._setGeoLocationUI(geoLocData);
							}
						}
						else
						{
							// Show alert
							this.shellCtrl.showSimpleAlert(`The ${Object(_utils_utilities__WEBPACK_IMPORTED_MODULE_4__["capitalizeFirst"])(this._monitoredType)} being monitored is no more available on the server, please select another one.`, false);

							// Cancel monitoring
							this._onCloseMonitorBtClick();
						}
					}
				}
			}
		}

		else if (command == this.RESP_UPDATE_ERROR)
		{
			if (data.getUtfString('zone') == this._monitoredZone
				&& data.getUtfString('type') ==  this._monitoredType
				&& data.getUtfString('name') ==  this._monitoredName)
			{
				// Show alert
				this.shellCtrl.showSimpleAlert(`Unable to update ${Object(_utils_utilities__WEBPACK_IMPORTED_MODULE_4__["capitalizeFirst"])(this._monitoredType)} settings; the following error was reported: ${data.getUtfString('message')}.`);
			}
		}

		else if (command == this.RESP_ROOM_CONFIG)
		{
			// Re-enable Create button
			$('#znm-createRoomBt').attr('disabled', false);

			// Show Room creation panel
			this._showRoomCreationPanel(data.getSFSArray('settings'));
		}

		else if (command == this.RESP_ROOM_CONFIG_ERROR)
		{
			// Re-enable Create button
			$('#znm-createRoomBt').attr('disabled', false);

			// Show an alert
			this.shellCtrl.showSimpleAlert(data.getUtfString('error'));
		}

		else if (command == this.RESP_ROOM_CREATED)
		{
			// Re-enable room creation panel
			this._enableCreateRoomPanel(true);

			// Hide room creation panel
			$('#znm-createRoomModal').modal('hide');

			// Update rooms list
			this._requestData(true);
		}

		else if (command == this.RESP_ROOM_CREATION_ERROR)
		{
			// Display error message
			$('#znm-createRoomError').text(data.getUtfString('error'));
			$('#znm-createRoomError').show();

			// Re-enable room creation panel
			this._enableCreateRoomPanel(true);
		}

		// Unexpected error received
		// This error is returned in case something went wrong when retrieving the monitored entity parameters,
		// so we have to stop requesting the same entity
		else if (command == this.RESP_UNEXPECTED_ERROR)
		{
			// Cancel monitoring
			this._onCloseMonitorBtClick();

			// Show an alert
			this.shellCtrl.showSimpleAlert(data.getUtfString('error'));
		}

		// Extension (Zone or Room) log messages received
		else if (command == this.RESP_LOG_MESSAGES)
		{
			let logEntries = data.getSFSArray('entries');

			for (let e = 0; e < logEntries.size(); e++)
			{
				let logEntry = logEntries.getSFSObject(e);

				const logZone = logEntry.getUtfString('zone');
				const logRoom = logEntry.getUtfString('room');

				// Check if the zone is currently monitored
				if (this._monitoredZone == logZone)
				{
					// console.log(logEntry.getLong('time'))
					// console.log(new Date(logEntry.getLong('time'))

					let ele = {
						timestamp: kendo.toString(new Date(logEntry.getLong('time')), 'dd/MM/yyyy HH:mm:ss'),
						level: logEntry.getUtfString('level'),
						message: logEntry.getUtfString('msg'),
					};

					if (this._monitoredType == this.MONITORED_TYPE_ZONE && logRoom == '')
					{
						// Add to zone extension log
						this._addLogEntryToGrid(this._zoneExtLogGrid, ele);
					}
					else
					{
						if (this._monitoredType == this.MONITORED_TYPE_ROOM && this._monitoredName == logRoom)
						{
							// Add to room extension log
							this._addLogEntryToGrid(this._roomExtLogGrid, ele);
						}
					}
				}
			}
		}
	}

	//---------------------------------
	// UI EVENT LISTENERS
	//---------------------------------

	_onUpdateIntervalChange()
	{
		// Request data to server
		this._requestData(false);
	}

	_onEntitiesPanelChange()
	{
		// Set main controls state
		this._setMainControlsEnabled();

		// Request data to server
		this._requestData(true);
	}

	/**
	 * Update the Scope label in the Rooms panel.
	 */
	_onZoneSelected()
	{
		// Clear Room and User lists
		this._resetRoomList();
		this._resetUserList();

		// Set scope label
		this._setScopeLabel();

		// Enable/disable Room and User tools
		const disabled = this._selectedZone == undefined;

		// (NOTE: this enables/disables whole fieldset; this doesn't affect Kendo DropDown, so we have to do it manually)
		$('#roomTools').attr('disabled', disabled);
		$('#userTools').attr('disabled', disabled);

		this._groupsDropDown.enable(!disabled);

		// Set main controls state
		this._setMainControlsEnabled();
	}

	/**
	 * Update the Scope label in the Users panel.
	 */
	_onRoomSelected()
	{
		// Clear User list
		this._resetUserList();

		// Set scope label
		this._setScopeLabel();

		// Enable Remove button
		$('#znm-removeRoomBt').attr('disabled', this._selectedRoom == undefined);

		// Set main controls state
		this._setMainControlsEnabled();
	}

	/**
	 * Update the scope label in the Users panel.
	 */
	_onGroupChange()
	{
		// Clear Room and User lists
		this._resetRoomList();
		this._resetUserList();

		// Set scope label
		this._setScopeLabel();

		// Request data to server
		this._requestData(true);

		// Set main controls state
		this._setMainControlsEnabled();
	}

	_onUserSelected()
	{
		// Set main controls state
		this._setMainControlsEnabled();
	}

	/**
	 * Show room creation panel.
	 */
	_onCreateRoomBtClick()
	{
		// Disable Create button
		$('#znm-createRoomBt').attr('disabled', true);

		// Request default room settings to extension
		this.sendExtensionRequest(this.REQ_GET_ROOM_CONFIG);
	}

	/**
	 * Remove existing room.
	 */
	_onRemoveRoomBtClick()
	{
		this.shellCtrl.showConfirmWarning('Are you sure you want to remove the selected Room?', $.proxy(this._onRemoveRemoveConfirm, this));
	}

	_onRemoveRemoveConfirm()
	{
		const selectedZone = this._zoneListBox.dataItem(this._zoneListBox.select());
		let selectedRoom = this._roomListBox.dataItem(this._roomListBox.select());

		if (selectedRoom)
		{
			// Send request to server
			let params = new SFS2X.SFSObject();
			params.putUtfString('zone', selectedZone.name);
			params.putUtfString('room', selectedRoom.name);

			this.sendExtensionRequest(this.REQ_REMOVE_ROOM, params);

			// Request data to server to update the rooms list
			this._requestData(true);
		}
	}

	/**
	 * Remove content of room creation panel.
	 */
	_onCreateRoomModalHidden(e)
	{
		// If a nested modal is opened, its closing causes the parent modal to be closed too (Bootstrap doesn't support nested modals)
		// As a workaround, here we reset the css class 'modal-open' when the nested modal is closed and skip everything else
		// In addition we had to use a custom listener on the close/cancel buttons of the nested modal (see config-grid.js for example)
		if (e.target !== document.getElementById('znm-createRoomModal'))
		{
			$('body').addClass('modal-open')
			return;
		}

		// Destroy scrolling tabs in room creation panel
		$('#znm-roomCreatorTabNav #tabs').scrollingTabs('destroy');

		// Remove all tab navigator content
		this._roomCreationIBuilder.destroyInterface();

		// Remove listener for custom actions triggered by configuration interface
		$('#znm-roomCreatorTabNav').off('value-set');

		// Reset and hide error message
		this._resetRoomCreationError();
	}

	_onConfigValueSet(e) // SAME METHOD DUPLICATED IN zone-configurator.js
	{
		const configParam = e.target.data;

		// Handle extension name/type dropdowns update and update the main class dropdown datasource accordingly
		if (configParam.name == 'extension.name' || configParam.name == 'extension.type' || configParam.name == 'extension.filterClass')
		{
			// All involved ConfigFormItems must be available and initialized to proceed
			const nameFormItem = this._roomCreationIBuilder.getConfigFormItem('extension.name');
			const typeFormItem = this._roomCreationIBuilder.getConfigFormItem('extension.type');
			const classFormItem = this._roomCreationIBuilder.getConfigFormItem('extension.file');
			const filterFormItem = this._roomCreationIBuilder.getConfigFormItem('extension.filterClass');

			if (nameFormItem != null && typeFormItem != null && classFormItem != null && filterFormItem != null)
			{
				const source = nameFormItem.data;
				let classesList = [];

				let data = source.triggerData;
				for (let i = 0; i < data.size(); i++)
				{
					let ext = data.getSFSObject(i);

					if (ext.getUtfString('name') == nameFormItem.data.value && ext.getUtfString('type') == typeFormItem.data.value)
					{
						let classes = ext.get('classesString').split(','); // We don't use "getUTfString" because the type is Text in case a very large list of classes is returned

						if (filterFormItem.data.value == true)
						{
							let filteredClasses = classes.filter(_utils_utilities__WEBPACK_IMPORTED_MODULE_4__["filterClassName"]);
							classes = filteredClasses;
						}

						classesList = classesList.concat(classes);
					}
				}

				let currentClass = classFormItem.data.value;

				// If the classes list doesn't contain the current value, create an empty entry and reset the value
				if (classesList.indexOf(currentClass) < 0)
				{
					if (classesList.length == 0)
					{
						classesList.push('');
						currentClass = '';
					}
					else
						currentClass = classesList[0];
				}

				let mainClassDropDown = classFormItem._innerWidget;
				mainClassDropDown.setDataSource(classesList);

				classFormItem.data.value = currentClass;
				classFormItem._setWidgetValue();
			}
		}
	}

	_onRoomCreatorCreateBtClick()
	{
		// Reset and hide error message
		this._resetRoomCreationError();

		// Check validity
		if (this._roomCreationIBuilder.checkIsValid())
		{
			let changes = this._roomCreationIBuilder.getChangedData();

			if (changes.size() > 0)
			{
				// Check the room name against the rooms list (duplicate names not allowed!)
				if (true)//this._validateNewRoomName(changes))
				{
					// Disable room creation panel
					this._enableCreateRoomPanel(false);

					// Send settings to server instance
					let params = new SFS2X.SFSObject();
					params.putSFSArray('settings', changes);
					params.putUtfString('zName', this._zoneListBox.dataItem(this._zoneListBox.select()).name);
					params.putBool('notify', $('#znm-notifyClientsCB').prop('checked'));

					// Send settings to extension
					this.sendExtensionRequest(this.REQ_CREATE_ROOM, params);
				}
				else
				{}
			}
		}
		else
		{
			// Show alert
			this.shellCtrl.showSimpleAlert('Unable to submit Room configuration due to an invalid value; please verify the highlighted form fields in all tabs.', true);
		}
	}

	_onShowRoomFilterBtClick()
	{
		this._roomFilter.show();
	}

	_onShowUserFilterBtClick()
	{
		this._userFilter.show();
	}

	_onApplyBtChange()
	{
		// Request data to server
		this._requestData(true);
	}

	_onRoomFilterUpdated()
	{
		// Enable/disable "Apply" checkbox
		$('#znm-applyRoomFilterCB').attr('disabled', this._roomFilter.filterExpression == null);

		// Request data to server
		this._requestData(true);
	}

	_onUserFilterUpdated()
	{
		// Enable/disable "Apply" checkbox
		$('#znm-applyUserFilterCB').attr('disabled', this._userFilter.filterExpression == null);

		// Request data to server
		this._requestData(true);
	}

	_onMonitorSelectionBtClick()
	{
		if (this._selectedZone)
		{
			// Cancel previous monitoring
			this._onCloseMonitorBtClick();

			let getZoneUserCountHistory = false;

			this._monitoredZone = this._selectedZone.name;

			// Zone must be monitored
			if (this._activePanelType == 'zone')
			{
				this._monitoredType = this.MONITORED_TYPE_ZONE;
				this._monitoredName = this._monitoredZone;

				getZoneUserCountHistory = true;
			}

			// Room must be monitored
			if (this._activePanelType == 'room' && this._selectedRoom != undefined)
			{
				this._monitoredType = this.MONITORED_TYPE_ROOM;
				this._monitoredName = this._selectedRoom.name;
			}

			// User must be monitored
			if (this._activePanelType == 'user' && this._selectedUser != undefined)
			{
				this._monitoredType = this.MONITORED_TYPE_USER;
				this._monitoredName = this._selectedUser.name;
			}

			// Show loading bar
			this._switchView('znm-loading');

			// Request data to server
			this._requestData(true, getZoneUserCountHistory);
		}
	}

	_onSendAdminMsgInKeyUp(event)
	{
		if (event.key !== 'Enter')
			return;

		event.preventDefault();
		this._onSendAdminMsgBtClick();
	}

	_onSendAdminMsgBtClick()
	{
		if (this._selectedZone && $('#znm-messageIn').val() != '')
		{
			// Build request parameters
			let params = new SFS2X.SFSObject();

			// Always include zone
			params.putUtfString('zone', this._selectedZone.name);

			// Send message to room?
			if (this._activePanelType == 'room' && this._selectedRoom != undefined)
				params.putUtfString('room', this._selectedRoom.name);

			// Send message to user?
			if (this._activePanelType == 'user' && this._selectedUser != undefined)
				params.putUtfString('user', this._selectedUser.name);

			// Add message
			params.putUtfString('msg', $('#znm-messageIn').val());

			// Send request to extension
			this.sendExtensionRequest(this.REQ_ADMIN_MSG, params);

			// Clear text input
			$('#znm-messageIn').val('');
		}
	}

	_onCloseMonitorBtClick()
	{
		// Save ref. for later usage
		const monitoredType = this._monitoredType;

		this._monitoredZone = null;
		this._monitoredType = null;
		this._monitoredName = null;

		// Clear geolocation UI
		this._clearGeoLocationUI();

		// Clear log datagrids dataproviders
		// NOTE: a try-catch is used here because, for an unknown reason, Kendo is throwing an error when resetting the data sources when the module is destroyed
		try
		{
			this._zoneExtLogGrid.setDataSource([]);
			this._roomExtLogGrid.setDataSource([]);
		}
		catch (e) { /* Ignore */ }

		// Leave edit mode
		this._onCancelBtClick();

		// Rearrange monitoring interface
		this._setMonitoringInterface();

		// Clear tab navigator
		this._clearTabs(monitoredType);
	}

	_onEditBtClick()
	{
		if (!this._isEditing)
		{
			// Show edit controls
			$('#znm-editControls').show();

			// Hide edit button
			$('#znm-editBt').hide();

			// Enable editable fields
			this._interfaceBuilder.disableInterface(false);

			this._isEditMode = true;
		}
	}

	_onCancelBtClick()
	{
		if (this._isEditing)
		{
			// Hide edit controls
			$('#znm-editControls').hide();

			// Show edit button
			$('#znm-editBt').show();

			// Disable editable fields
			this._interfaceBuilder.disableInterface(true);

			this._isEditMode = false;

			// Hide validation messages
			this._interfaceBuilder.resetValidation();

			// Request data to update interface (updating suspended in edit mode)
			this._requestData(true);
		}
	}

	_onSubmitBtClick()
	{
		if (this._isEditing)
		{
			// Check validity
			if (this._interfaceBuilder.checkIsValid())
			{
				let changes = this._interfaceBuilder.getChangedData();

				if (changes.size() > 0)
				{
					//console.log(changes.getDump())

					// Send settings to server instance
					let params = new SFS2X.SFSObject();
					params.putSFSArray('settings', changes);
					params.putUtfString('zone', this._monitoredZone);

					if (this._monitoredType == this.MONITORED_TYPE_ROOM)
					{
						// Submit room settings
						params.putUtfString('room', this._monitoredName);
						this.sendExtensionRequest(this.REQ_SET_ROOM_SETTINGS, params);
					}
					else if (this._monitoredType == this.MONITORED_TYPE_USER)
					{
						// Submit user settings
						params.putUtfString('user', this._monitoredName);
						this.sendExtensionRequest(this.REQ_SET_USER_SETTINGS, params);
					}
					else
					{
						// Submit zone settings
						this.sendExtensionRequest(this.REQ_SET_ZONE_SETTINGS, params);
					}

					// Leave edit mode
					this._onCancelBtClick();
				}
			}
			else
			{
				// Show alert
				this.shellCtrl.showSimpleAlert('Unable to submit changes due to an invalid value; please verify the highlighted form fields in all tabs.', true);
			}
		}
	}

	_onTimeRangeChange()
	{
		let values = this._timeSlider.value();

		if (values[0] == values[1])
		{
			if (values[1] == -24)
				values[1] = -23;

			values[0] = values[1] - 1;

			// Reset the time range slider value (we need to use setTimeout
			// bacause doing it in the change event listener doesn't redraw the slider)
			setTimeout($.proxy( function(values) { this._timeSlider.value(values); }, this), 10, values);
		}

		this._userCountChart.range = values;
	}

	_onWindowResize()
	{
		// Redraw charts
		this._userCountChart.redraw();
		this._packetQueueChart.redraw();
		this._droppedMsgChart.redraw();
		this._writtenDataChart.redraw();
		this._readDataChart.redraw();

		// Redraw time range slider
		this._timeSlider.resize();
	}

	_onWordsReloadBtClick()
	{
		if (this._monitoredType == this.MONITORED_TYPE_ZONE)
		{
			// Send request to extension
			let params = new SFS2X.SFSObject();
			params.putUtfString('zone', this._monitoredName);

			this.sendExtensionRequest(this.REQ_RELOAD_WORDS, params);
		}
	}

	_onZoneExtReloadBtClick()
	{
		if (this._monitoredType == this.MONITORED_TYPE_ZONE)
		{
			// Send request to extension
			let params = new SFS2X.SFSObject();
			params.putUtfString('zone', this._monitoredName);

			this.sendExtensionRequest(this.REQ_RELOAD_ZONE_EXT, params);
		}
	}

	_onDisconnectBtClick()
	{
		if (this._monitoredType == this.MONITORED_TYPE_USER)
		{
			// Send request to extension
			let params = new SFS2X.SFSObject();
			params.putUtfString('zone', this._monitoredZone);
			params.putUtfString('user', this._monitoredName);

			this.sendExtensionRequest(this.REQ_DISCONNECT_USER, params);
		}
	}

	_onKickBtClick()
	{
		if (this._monitoredType == this.MONITORED_TYPE_USER)
		{
			// Send request to extension
			let params = new SFS2X.SFSObject();
			params.putUtfString('zone', this._monitoredZone);
			params.putUtfString('user', this._monitoredName);
			params.putUtfString('msg', $('#znm-kickMsgIn').val());
			params.putInt('delay', (this._kickDelayIn.value() != null ? Number(this._kickDelayIn.value()) : this.KICK_BAN_DEFAULT_DELAY));

			this.sendExtensionRequest(this.REQ_KICK_USER, params);

			// Reset message
			$('#znm-kickMsgIn').val('');
		}
	}

	_onBanBtClick()
	{
		if (this._monitoredType == this.MONITORED_TYPE_USER)
		{
			// Send request to extension
			let params = new SFS2X.SFSObject();
			params.putUtfString('zone', this._monitoredZone);
			params.putUtfString('user', this._monitoredName);
			params.putUtfString('msg', $('#znm-banMsgIn').val());
			params.putUtfString('rsn', $('#znm-banRsnIn').val());
			params.putUtfString('mode', this._banModeDd.select() > 0 ? this._banModeDd.value() : 'NAME');
			params.putInt('delay', (this._banDelayIn.value() != null ? Number(this._banDelayIn.value()) : this.KICK_BAN_DEFAULT_DELAY));

			let duration = this._banDurationIn.value() != null ? Number(this._banDurationIn.value()) : 1;

			if (this._banDurUnitDd.value() == 'hours')
				duration = duration * 60;
			else if (this._banDurUnitDd.value() == 'days')
				duration = duration * 60 * 24;

			params.putInt('duration', duration);

			this.sendExtensionRequest(this.REQ_BAN_USER, params);

			// Reset message and reason
			$('#znm-banMsgIn').val('');
			$('#znm-banRsnIn').val('');
		}
	}

	//------------------------------------
	// PRIVATE METHODS
	//------------------------------------

	_setMonitoringInterface()
	{
		const enabled = (this._monitoredType != null && this._monitoredName != null);

		// Show/hide header and footer
		if (enabled)
		{
			this._switchView(`znm-${this._monitoredType}Monitor`);

			// Header title
			let title = 'Now monitoring ';

			if (this._monitoredType == this.MONITORED_TYPE_USER)
				title += `User: <strong>${this._monitoredName}</strong> (Zone: ${this._monitoredZone})`;
			else if (this._monitoredType == this.MONITORED_TYPE_ROOM)
				title += `Room: <strong>${this._monitoredName}</strong> (Zone: ${this._monitoredZone})`;
			else
				title += `Zone: <strong>${this._monitoredZone}</strong>`;

			$('#znm-monitoredHeader').html(title);
			$('#znm-monitoredFooter').show();

			// Show panel
			this._switchPanel('znm-mainPanel');
		}
		else
		{
			this._switchView('znm-select');

			$('#znm-monitoredHeader').html('');
			$('#znm-monitoredFooter').hide();

			// Show panel
			this._switchPanel('znm-sidebarPanel');
		}
	}

	_switchView(viewId)
	{
		document.getElementById('znm-viewstack').selectedElement = document.getElementById(viewId);
	}

	_switchPanel(panelId)
	{
		document.getElementById('znm-view').selectedPanel = document.getElementById(panelId);
	}

	/**
	 * Build the polling request to be sent to the server, based on the selections and other settings in the accordion.
	 */
	_requestData(newId = false, getZoneUserCountHistory = false)
	{
		// Clear previous request scheduling
		clearTimeout(this._requestTimer);

		// Check if connection is still available
		if (this.smartFox.isConnected)
		{
			if (newId)
				this._currentRequestId++;

			// Build request parameters
			let params = new SFS2X.SFSObject();

			// The updated zones/rooms/users lists are requested if the corresponding panel is displayed only
			const getZones = (this._activePanelType == 'zone');
			const getRooms = (this._activePanelType == 'room' && this._selectedZone != undefined);
			const getUsers = (this._activePanelType == 'user' && this._selectedZone != undefined);

			// --- ZONES ---
			params.putBool('zones', getZones);

			// ROOMS & USERS
			if (getRooms || getUsers)
			{
				// Common filtering params:

				// a) zone name
				params.putUtfString('zone', this._selectedZone.name);

				// b) group name
				params.putUtfString('group', this._selectedGroup.name);
			}

			// ROOMS
			params.putBool('rooms', getRooms);
			if (getRooms)
			{
				// Filtering params:

				// c) advanced filtering params
				if ($('#znm-applyRoomFilterCB').prop('checked') && this._roomFilter.filterExpression != null)
					params.putSFSArray('rFilter', this._roomFilter.filterExpression.toSFSArray());
			}

			// USERS
			params.putBool('users', getUsers);
			if (getUsers)
			{
				// Filtering params:

				// c) room name
				if (this._selectedRoom)
					params.putUtfString('room', this._selectedRoom.name);

				// d) advanced filtering params
				if ($('#znm-applyUserFilterCB').prop('checked') && this._userFilter.filterExpression != null)
					params.putSFSArray('uFilter', this._userFilter.filterExpression.toSFSArray());
			}

			// --- CURRENTLY MONITORED DATA ---
			if (this._monitoredType != null && this._monitoredName != null)
			{
				let monitoredObj = this._getBasicMonitoredObject();

				if (this._monitoredType == this.MONITORED_TYPE_ZONE)
					monitoredObj.putBool('uc', getZoneUserCountHistory);

				params.putSFSObject('monitored', monitoredObj);
			}

			// Set request id; when a response is received, we check its id matches the current request id: if not, the response is discarded
			params.putInt('id', this._currentRequestId);

			// Send request to extension
			this.sendExtensionRequest(this.REQ_GET_DATA, params);

			// Schedule next request
			this._requestTimer = setTimeout($.proxy(this._requestData, this), Number(this._intervalDropDown.value()) * 1000);
		}
	}

	_getBasicMonitoredObject()
	{
		let monitoredObj = new SFS2X.SFSObject();

		monitoredObj.putUtfString('zone', this._monitoredZone);
		monitoredObj.putUtfString('type', this._monitoredType);
		monitoredObj.putUtfString('name', this._monitoredName);

		return monitoredObj;
	}

	_setZonesDataProvider(zonesData)
	{
		this._setListDataProvider(this._zoneListBox, zonesData, true);
	}

	_setRoomsDataProvider(roomsData)
	{
		this._setListDataProvider(this._roomListBox, roomsData, true);

		// Set Remove button state
		$('#znm-removeRoomBt').attr('disabled', this._selectedRoom == undefined);
	}

	_setUsersDataProvider(usersData)
	{
		this._setListDataProvider(this._userListBox, usersData);
	}

	_setListDataProvider(listWidget, listData, countUsers = false)
	{
		// Save reference to selected item name
		// NOTE: as we are substituting the whole data source, we need it to re-select the same item after update
		let selectedDataItem = listWidget.dataItem(listWidget.select());
		let selectedDataItemName = selectedDataItem ? selectedDataItem.name : null;

		let dataArray = [];

		// Convert data coming from server
		for (let i = 0; i < listData.size(); i++)
		{
			let itemData = listData.getSFSObject(i);

			let item = {};
			item.name = itemData.getUtfString('name');

			if (countUsers)
				item.users = itemData.getInt('users');

			dataArray.push(item);
		}

		// Create new data source
		let listDS = new kendo.data.DataSource({
			data: dataArray,
			schema: {
				model: {
					id: 'name'
				}
			},
			sort: {
				field: 'name',
				dir: 'asc'
			}
		});

		// Assign data source to list
		listWidget.setDataSource(listDS);

		// Select again previously selected item
		if (selectedDataItemName != null)
		{
			selectedDataItem = listDS.get(selectedDataItemName);

			if (selectedDataItem)
			{
				let selectedElement = listWidget.wrapper.find('[data-uid="' + selectedDataItem.uid + '"]');
				listWidget.select(selectedElement);
			}
		}

		// Reset main control state
		this._setMainControlsEnabled();
	}

	_setGroupsDataProvider(groupsData)
	{
		// Create Groups array, adding common entries
		let groupsArray = [
			this._getGroupObj('', this.ANY_LABEL),
			this._getGroupObj(this.DEFAULT_GROUP_NAME)
		];

		// Save reference to selected group name
		// NOTE: as we are substituting the whole data source, we need it to re-select the same item after update
		let selectedDataItem = this._selectedGroup;
		let selectedDataItemName = selectedDataItem ? selectedDataItem.name : null;

		if (groupsData != null)
		{
			for (let i = 0; i < groupsData.length; i++)
			{
				if (groupsData[i] != this.DEFAULT_GROUP_NAME) // Default group was added before
					groupsArray.push(this._getGroupObj(groupsData[i]));
			}
		}

		// Create new data source
		let groupDS = new kendo.data.DataSource({
			data: groupsArray,
			schema: {
				model: {
					id: 'name'
				}
			}
		});

		// Assign data source to dropdown
		this._groupsDropDown.setDataSource(groupDS);

		//--------------------------------

		// Select previously selected item
		selectedDataItem = groupDS.get(selectedDataItemName);

		// If group is not found, select the default one
		if (selectedDataItem == undefined)
			selectedDataItem = groupDS.get(this.DEFAULT_GROUP_NAME);

		this._groupsDropDown.select(function(dataItem) {
			return dataItem.name === selectedDataItem.name;
		});
	}

	_getGroupObj(name, label = null)
	{
		return {
			name: name,
			label: (label != null ? label : name)
		}
	}

	/**
	 * Update the Scope label in the Rooms panel and in the Users panel.
	 */
	_setScopeLabel()
	{
		let roomScope = '';
		let userScope = '';

		if (this._selectedZone)
		{
			let zoneName = this._selectedZone.name;
			roomScope = this._getScopeLabelPart('Zone:', zoneName);

			let selectedGroup = this._selectedGroup;
			let groupName = (selectedGroup && selectedGroup.name != '') ? selectedGroup.name : this.ANY_LABEL;
			let roomName = (this._selectedRoom) ? this._selectedRoom.name : this.ANY_LABEL;

			userScope = this._getScopeLabelPart('Zone:', zoneName) + '<br>' + this._getScopeLabelPart('Group:', groupName) + '<br>' + this._getScopeLabelPart('Room:', roomName);
		}

		$('#znm-roomScopeLb').html(roomScope);
		$('#znm-userScopeLb').html(userScope);
	}

	_getScopeLabelPart(label, text)
	{
		return `<span class="text-muted">${label}</span> <span>${text}</span>`;
	}

	_resetRoomList()
	{
		this._roomListBox.setDataSource([]);

		// Also disable Remove button
		$('#znm-removeRoomBt').attr('disabled', true);
	}

	_resetUserList()
	{
		this._userListBox.setDataSource([]);
	}

	_setMainControlsEnabled()
	{
		let enabled = (this._activePanelType == 'zone' && this._selectedZone != undefined)
					|| (this._activePanelType == 'room' && this._selectedRoom != undefined)
					|| (this._activePanelType == 'user' && this._selectedUser != undefined);

		$('#znm-mainControls').attr('disabled', !enabled);

		$('#znm-monitorTargetLb').text(enabled ? Object(_utils_utilities__WEBPACK_IMPORTED_MODULE_4__["capitalizeFirst"])(this._activePanelType) : 'selection');
		$('#znm-messageIn').attr('placeholder', 'Message to ' + (enabled ? Object(_utils_utilities__WEBPACK_IMPORTED_MODULE_4__["capitalizeFirst"])(this._activePanelType) : 'selection'));
	}

	_showLimitExceededWarning(icon, title)
	{
		icon.attr('title', title);

		if (title != '')
			icon.removeClass('hidden');
		else
			icon.addClass('hidden');
	}

	_showRoomCreationPanel(roomSettings)
	{
		// Build user interface based on passed data
		this._roomCreationIBuilder.buildInterface(roomSettings, 'znm-roomCreatorTabNav', false, 'rc');

		// Enable scrolling tabs
		$('#znm-roomCreatorTabNav > #tabs').scrollingTabs({
			bootstrapVersion: 4,
			scrollToTabEdge: true,
			enableSwiping: true,
			disableScrollArrowsOnFullyScrolled: true,
			cssClassLeftArrow: 'fa fa-chevron-left',
			cssClassRightArrow: 'fa fa-chevron-right'
		});

		// Reset Notify clients checkbox
		$('#znm-notifyClientsCB').prop('checked', true);

		// Set listener for custom actions triggered by configuration interface
		$('#znm-roomCreatorTabNav').on('value-set', $.proxy(this._onConfigValueSet, this));

		// Display panel
		$('#znm-createRoomModal').modal('show');

		// Reset and hide error message
		this._resetRoomCreationError();
	}

	_resetRoomCreationError()
	{
		// Reset and hide error message
		$('#znm-createRoomError').text('');
		$('#znm-createRoomError').hide();
	}

	_validateNewRoomName(changes)
	{
		for (let i = 0; i < changes.size(); i++)
		{
			const setting = changes.getSFSObject(i);

			if (setting.containsKey('name') && setting.getUtfString('name') == 'name')
			{
				// Get name value
				const name = setting.getText('value');

				// Get data source
				const ds = this._roomListBox.dataSource.data();

				// Check if name exists in data source
				for (let j = 0; j < ds.length; j++)
				{
					if (ds[j].name == name)
						return false;
				}

				break;
			}
		}

		return true;
	}

	_enableCreateRoomPanel(enable)
	{
		let modalElement = $('#znm-createRoomModal');

		// Enable modal close buttons
		$('button[data-dismiss="modal"]', modalElement).attr('disabled', !enable);

		// Enable create button
		$('#znm-roomCreatorCreateBt', modalElement).attr('disabled', !enable);

		// Enable checkbox
		$('#znm-notifyClientsCB', modalElement).attr('disabled', !enable);

		// Enable configuration interface
		this._roomCreationIBuilder.disableInterface(!enable);
	}

	_clearTabs(monitoredType)
	{
		// Destroy scrolling tabs
		$(`#znm-${monitoredType}TabNavigator #tabs`).scrollingTabs('destroy');

		// Remove all tab navigator content
		this._interfaceBuilder.destroyInterface();

		// Set all tab panels as inactive
		$(`#znm-${monitoredType}TabNavigator #tabPanels .tab-pane`).removeClass('show active');

		// Remove tab change event listener
		$('a[data-toggle="tab"]').off('shown.bs.tab');

		this._skipInitTabs = false;
	}

	_showZoneTrafficData(data)
	{
		// Build user count monitor history
		if (data.containsKey('history'))
		{
			let userCountData = data.getIntArray('history');
			let samplingRateMins = data.getInt('rate');

			this._userCountChart.addHistoryEntries(userCountData, samplingRateMins * 60);
		}

		// Add last user count value
		this._userCountChart.addEntry(data.getInt('current'));
	}

	_addLogEntryToGrid(grid, item)
	{
		let ds = grid.dataSource;

		// Check items limit
		if (ds.total() == this.MAX_EXTENSION_LOG_SIZE)
			ds.remove(ds.at(0));

		ds.add(item);
	}

	_showUserStatsData(data)
	{
		// Packet queue filling %
		let packetQueue = Object(_utils_utilities__WEBPACK_IMPORTED_MODULE_4__["roundToDecimals"])(data.getFloat('packet'), 2);
		this._packetQueueChart.setDataSource([{category: 'Queue', value: packetQueue}]);

		// Dropped messages
		let droppedMsg = data.getInt('dropped');
		this._droppedMsgChart.setDataSource([{category: 'Dropped', value: droppedMsg}]);

		// Written data amount
		let writtenDataObj = Object(_utils_utilities__WEBPACK_IMPORTED_MODULE_4__["scaleBytes"])(data.getLong('wBytes'), 2);
		this._writtenDataChart.setDataSource([{category: 'Written', value: writtenDataObj.value, unit: writtenDataObj.unit}]);

		// Read data amount
		let readDataObj = Object(_utils_utilities__WEBPACK_IMPORTED_MODULE_4__["scaleBytes"])(data.getLong('rBytes'), 2);
		this._readDataChart.setDataSource([{category: 'Read', value: readDataObj.value, unit: readDataObj.unit}]);
	}

	_setGeoLocationUI(geoLocData)
	{
		const location = geoLocData.getUtfString('location');
		const error = geoLocData.getUtfString('error');
		const latitude = geoLocData.getUtfString('latitude');
		const longitude = geoLocData.getUtfString('longitude');

		// Show location
		$('#znm-geoLocationLb').text(location);

		// Log error
		if (error != '')
			this.shellCtrl.logMessage(error, 'warn');

		// Enable/disable Show map button
		if (latitude != '' && longitude != '')
		{
			$('#znm-showMapBt').attr('disabled', false);

			const url = `https://www.google.com/maps/search/?api=1&query=${Number(latitude) + ',' + Number(longitude)}`;
			$('#znm-showMapBt').attr('href', url);
		}
	}

	_clearGeoLocationUI()
	{
		$('#znm-geoLocationLb').text('');
		$('#znm-showMapBt').attr('disabled', true);
		$('#znm-showMapBt').attr('href', '#');
	}

	//---------------------------------
	// PRIVATE GETTERS
	//---------------------------------

	get _activePanelType()
	{
		return this._accordion.select().data('itemType');
	}

	get _selectedZone()
	{
		return this._zoneListBox.dataItem(this._zoneListBox.select());
	}

	get _selectedGroup()
	{
		return this._groupsDropDown.dataItem(this._groupsDropDown.select());
	}

	get _selectedRoom()
	{
		return this._roomListBox.dataItem(this._roomListBox.select());
	}

	get _selectedUser()
	{
		return this._userListBox.dataItem(this._userListBox.select());
	}

	get _isEditing()
	{
		return (this._monitoredType != null && this._monitoredName != null && this._isEditMode);
	}
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./src/utils/match-properties.js":
/*!***************************************!*\
  !*** ./src/utils/match-properties.js ***!
  \***************************************/
/*! exports provided: RoomPropertiesData, UserPropertiesData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoomPropertiesData", function() { return RoomPropertiesData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserPropertiesData", function() { return UserPropertiesData; });
class RoomPropertiesData
{
	static get LABELS() {
		let map = new Map();

		map.set(SFS2X.RoomProperties.NAME, 'name');
		map.set(SFS2X.RoomProperties.GROUP_ID, 'groupId');
		map.set(SFS2X.RoomProperties.MAX_USERS, 'maxUsers');
		map.set(SFS2X.RoomProperties.MAX_SPECTATORS, 'maxSpectators');
		map.set(SFS2X.RoomProperties.USER_COUNT, 'userCount');
		map.set(SFS2X.RoomProperties.SPECTATOR_COUNT, 'spectatorCount');
		map.set(SFS2X.RoomProperties.IS_GAME, 'isGame');
		map.set(SFS2X.RoomProperties.IS_PRIVATE, 'isPrivate');
		map.set(SFS2X.RoomProperties.HAS_FREE_PLAYER_SLOTS, 'hasFreePlayerSlots');
		map.set(SFS2X.RoomProperties.IS_TYPE_SFSGAME, 'isSFSGameType');

		return map;
	}

	static getLabel(propName)
	{
		return 'Room.' + RoomPropertiesData.LABELS.get(propName);
	}

	static get propertiesArray()
	{
		const arr = [];

		for (const [key, value] of RoomPropertiesData.LABELS.entries())
		{
			arr.push({
				label: RoomPropertiesData.getLabel(key),
				value: key
			});
		}

		return arr;
	}
}

class UserPropertiesData
{
	static get LABELS() {
		let map = new Map();

		map.set(SFS2X.UserProperties.NAME, 'name');
		map.set(SFS2X.UserProperties.IS_PLAYER, 'isPlayer');
		map.set(SFS2X.UserProperties.IS_SPECTATOR, 'isSpectator');
		map.set(SFS2X.UserProperties.IS_NPC, 'isNPC');
		map.set(SFS2X.UserProperties.PRIVILEGE_ID, 'privilegeId');

		return map;
	}

	static getLabel(propName)
	{
		return 'User.' + UserPropertiesData.LABELS.get(propName);
	}

	static get propertiesArray()
	{
		const arr = [];

		for (const [key, value] of UserPropertiesData.LABELS.entries())
		{
			arr.push({
				label: UserPropertiesData.getLabel(key),
				value: key
			});
		}

		return arr;
	}
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXRzL2pzL2NvcmUvbW9kdWxlcy9tb2R1bGUtMTcuYnVuZGxlLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXBwbGljYXRpb24vLi9zcmMvY29tcG9uZW50cy9jaGFydHMvY2hhcnQtdXRpbHMuanMiLCJ3ZWJwYWNrOi8vYXBwbGljYXRpb24vLi9zcmMvY29tcG9uZW50cy9jaGFydHMvdXNlci1jb3VudC1jaGFydC5qcyIsIndlYnBhY2s6Ly9hcHBsaWNhdGlvbi8uL3NyYy9jb21wb25lbnRzL21vZHVsZS1zcGVjaWZpYy9tYXRjaC1leHByZXNzaW9uLWJ1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vYXBwbGljYXRpb24vLi9zcmMvY29tcG9uZW50cy9zaWRlYmFyLWxheW91dC5qcyIsIndlYnBhY2s6Ly9hcHBsaWNhdGlvbi8uL3NyYy9tb2R1bGVzL3pvbmUtbW9uaXRvci5qcyIsIndlYnBhY2s6Ly9hcHBsaWNhdGlvbi8uL3NyYy91dGlscy9tYXRjaC1wcm9wZXJ0aWVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Ynl0ZXNUb1NpemUsIGtCeXRlc1RvU2l6ZX0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbGl0aWVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1hdHRlZERhdGVUaW1lKGRhdGUsIGZvcm1hdCA9ICdkZCBNTU0gSEg6bW06c3MnKVxue1xuXHRyZXR1cm4ga2VuZG8udG9TdHJpbmcoZGF0ZSwgZm9ybWF0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJhc2ljU2hhcmVkVGVtcGxhdGUodmFsdWVGb3JtYXQgPSAnezB9Jykge1xuXHRyZXR1cm4ga2VuZG8udGVtcGxhdGUoYFxuXHRcdDxkaXYgY2xhc3M9XCJjaGFydC10b29sdGlwLWNhdGVnb3J5XCI+PHN0cm9uZz4jOiBjYXRlZ29yeSAjPC9zdHJvbmc+PC9kaXY+XG5cdFx0IyBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykgeyAjXG5cdFx0PGRpdj5cblx0XHRcdDxpIGNsYXNzPVwiZmFzIGZhLXNxdWFyZVwiIHN0eWxlPVwiY29sb3I6ICM6IHBvaW50c1tpXS5jb2xvciAjIFwiPjwvaT5cblx0XHRcdCM6IHBvaW50c1tpXS5zZXJpZXMubmFtZSMgOiAjOiBrZW5kby5mb3JtYXQoJyR7dmFsdWVGb3JtYXR9JywgcG9pbnRzW2ldLnZhbHVlKSAjXG5cdFx0PC9kaXY+XG5cdFx0IyB9ICNcblx0YCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNZW1vcnlTaGFyZWRUZW1wbGF0ZSgpIHtcblx0cmV0dXJuIGZ1bmN0aW9uKGRhdGFJdGVtKSB7XG5cdFx0ZGF0YUl0ZW0uYnl0ZXNUb1NpemUgPSBieXRlc1RvU2l6ZTsgLy8gUGFzcyBieXRlc1RvU2l6ZSB1dGlsaXR5IGZ1bmN0aW9uIHRvIHRlbXBsYXRlXG5cdFx0cmV0dXJuIGtlbmRvLnRlbXBsYXRlKGBcblx0XHRcdDxkaXYgY2xhc3M9XCJjaGFydC10b29sdGlwLWNhdGVnb3J5XCI+PHN0cm9uZz4jOiBjYXRlZ29yeSAjPC9zdHJvbmc+PC9kaXY+XG5cdFx0XHQjIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7ICNcblx0XHRcdDxkaXY+XG5cdFx0XHRcdDxpIGNsYXNzPVwiZmFzIGZhLXNxdWFyZVwiIHN0eWxlPVwiY29sb3I6ICM6IHBvaW50c1tpXS5jb2xvciAjIFwiPjwvaT5cblx0XHRcdFx0IzogcG9pbnRzW2ldLnNlcmllcy5uYW1lIyA6ICM6IGJ5dGVzVG9TaXplKHBvaW50c1tpXS52YWx1ZSkgI1xuXHRcdFx0PC9kaXY+XG5cdFx0XHQjIH0gI1xuXHRcdGApKGRhdGFJdGVtKTtcblx0fTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1lbW9yeVZhbHVlQXhpc0xhYmVsVGVtcGxhdGUoKSB7XG5cdHJldHVybiBmdW5jdGlvbihkYXRhSXRlbSkge1xuXHRcdGRhdGFJdGVtLmJ5dGVzVG9TaXplID0gYnl0ZXNUb1NpemU7IC8vIFBhc3MgYnl0ZXNUb1NpemUgdXRpbGl0eSBmdW5jdGlvbiB0byB0ZW1wbGF0ZVxuXHRcdHJldHVybiBrZW5kby50ZW1wbGF0ZShgXG5cdFx0XHQjOiBieXRlc1RvU2l6ZSh2YWx1ZSkgI1xuXHRcdGApKGRhdGFJdGVtKTtcblx0fTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ldHdvcmtTaGFyZWRUZW1wbGF0ZShjYXRlZ29yeUZvcm1hdCA9ICdkZCBNTU0gSEg6bW06c3MnKSB7XG5cdHJldHVybiBmdW5jdGlvbihkYXRhSXRlbSkge1xuXHRcdGRhdGFJdGVtLmtCeXRlc1RvU2l6ZSA9IGtCeXRlc1RvU2l6ZTsgLy8gUGFzcyBrQnl0ZXNUb1NpemUgdXRpbGl0eSBmdW5jdGlvbiB0byB0ZW1wbGF0ZVxuXHRcdHJldHVybiBrZW5kby50ZW1wbGF0ZShgXG5cdFx0XHQ8ZGl2IGNsYXNzPVwiY2hhcnQtdG9vbHRpcC1jYXRlZ29yeVwiPjxzdHJvbmc+Izoga2VuZG8udG9TdHJpbmcoY2F0ZWdvcnksICcke2NhdGVnb3J5Rm9ybWF0fScpICM8L3N0cm9uZz48L2Rpdj5cblx0XHRcdCMgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHsgI1xuXHRcdFx0PGRpdj5cblx0XHRcdFx0PGkgY2xhc3M9XCJmYXMgZmEtc3F1YXJlXCIgc3R5bGU9XCJjb2xvcjogIzogcG9pbnRzW2ldLmNvbG9yICMgXCI+PC9pPlxuXHRcdFx0XHQjOiBwb2ludHNbaV0uc2VyaWVzLm5hbWUjIDogIzoga0J5dGVzVG9TaXplKHBvaW50c1tpXS52YWx1ZSwgMSwgJycsICcvcycpICNcblx0XHRcdDwvZGl2PlxuXHRcdFx0IyB9ICNcblx0XHRgKShkYXRhSXRlbSk7XG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrVmFsdWVBeGlzTGFiZWxUZW1wbGF0ZSgpIHtcblx0cmV0dXJuIGZ1bmN0aW9uKGRhdGFJdGVtKSB7XG5cdFx0ZGF0YUl0ZW0ua0J5dGVzVG9TaXplID0ga0J5dGVzVG9TaXplOyAvLyBQYXNzIGtCeXRlc1RvU2l6ZSB1dGlsaXR5IGZ1bmN0aW9uIHRvIHRlbXBsYXRlXG5cdFx0cmV0dXJuIGtlbmRvLnRlbXBsYXRlKGBcblx0XHRcdCM6IGtCeXRlc1RvU2l6ZSh2YWx1ZSwgMSwgJycsICcvcycpICNcblx0XHRgKShkYXRhSXRlbSk7XG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrVmFsdWVBeGlzTGFiZWxUZW1wbGF0ZUIoKSB7XG5cdHJldHVybiBmdW5jdGlvbihkYXRhSXRlbSkge1xuXHRcdGRhdGFJdGVtLmJ5dGVzVG9TaXplID0gYnl0ZXNUb1NpemU7IC8vIFBhc3MgYnl0ZXNUb1NpemUgdXRpbGl0eSBmdW5jdGlvbiB0byB0ZW1wbGF0ZVxuXHRcdHJldHVybiBrZW5kby50ZW1wbGF0ZShgXG5cdFx0XHQjOiBieXRlc1RvU2l6ZSh2YWx1ZSwgMSwgJycsICcvcycpICNcblx0XHRgKShkYXRhSXRlbSk7XG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyQ291bnRTaGFyZWRUZW1wbGF0ZShjYXRlZ29yeUZvcm1hdCA9ICdkZCBNTU0gSEg6bW06c3MnKSB7XG5cdHJldHVybiBmdW5jdGlvbihkYXRhSXRlbSkge1xuXHRcdHJldHVybiBrZW5kby50ZW1wbGF0ZShgXG5cdFx0XHQ8ZGl2IGNsYXNzPVwiY2hhcnQtdG9vbHRpcC1jYXRlZ29yeVwiPjxzdHJvbmc+Izoga2VuZG8udG9TdHJpbmcoY2F0ZWdvcnksICcke2NhdGVnb3J5Rm9ybWF0fScpICM8L3N0cm9uZz48L2Rpdj5cblx0XHRcdCMgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHsgI1xuXHRcdFx0PGRpdj5cblx0XHRcdFx0PGkgY2xhc3M9XCJmYXMgZmEtc3F1YXJlXCIgc3R5bGU9XCJjb2xvcjogIzogcG9pbnRzW2ldLmNvbG9yICMgXCI+PC9pPlxuXHRcdFx0XHQjOiBwb2ludHNbaV0uc2VyaWVzLm5hbWUjIDogIzogcG9pbnRzW2ldLnZhbHVlICNcblx0XHRcdDwvZGl2PlxuXHRcdFx0IyB9ICNcblx0XHRgKShkYXRhSXRlbSk7XG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lUmFuZ2VUb29sdGlwVGVtcGxhdGUoKSB7XG5cdHJldHVybiBmdW5jdGlvbihkYXRhSXRlbSkge1xuXHRcdGRhdGFJdGVtLmdldFRvb2x0aXBTdHJpbmcgPSBmdW5jdGlvbih2MSwgdjIpIHtcblx0XHRcdGlmICh2MSA9PSB2Milcblx0XHRcdHtcblx0XHRcdFx0aWYgKHYyID09IC0yNClcblx0XHRcdFx0XHR2MiA9IC0yMztcblxuXHRcdFx0XHR2MSA9IHYyIC0gMTtcblx0XHRcdH1cblxuXHRcdFx0bGV0IHN0YXJ0ID0gTWF0aC5hYnModjEpO1xuXHRcdFx0bGV0IGVuZCA9IE1hdGguYWJzKHYyKTtcblxuXHRcdFx0cmV0dXJuIGBGcm9tICR7c3RhcnR9IGhvdXIke3N0YXJ0ICE9IDEgPyAncycgOiAnJ30gYWdvIHRvICR7ZW5kID4gMCA/ICgndG8gJyArIGVuZCArICcgaG91cicgKyAoZW5kICE9IDEgPyAncycgOiAnJykgKyAnIGFnbycpIDogJ25vdyd9YDtcblx0XHR9OyAvLyBQYXNzIHV0aWxpdHkgZnVuY3Rpb24gdG8gdGVtcGxhdGVcblx0XHRyZXR1cm4ga2VuZG8udGVtcGxhdGUoYFxuXHRcdFx0IzogZ2V0VG9vbHRpcFN0cmluZyhzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKSAjXG5cdFx0YCkoZGF0YUl0ZW0pO1xuXHR9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V1JCeXRlc0xhYmVsVGVtcGxhdGUoKSB7XG5cdHJldHVybiBmdW5jdGlvbihkYXRhSXRlbSkge1xuXHRcdHJldHVybiBrZW5kby50ZW1wbGF0ZShgXG5cdFx0XHQjOiB2YWx1ZSAjICM6IGRhdGFJdGVtLnVuaXQgI1xuXHRcdGApKGRhdGFJdGVtKTtcblx0fTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJhc2ljVGVtcGxhdGUodmFsdWVGb3JtYXQgPSAnezB9Jykge1xuXHRyZXR1cm4ga2VuZG8udGVtcGxhdGUoYFxuXHRcdDxkaXY+XG5cdFx0XHQ8c3BhbiBjbGFzcz1cInRleHQtbm93cmFwXCI+Izoga2VuZG8udG9TdHJpbmcobmV3IERhdGUodmFsdWUueCksIFwiZGQvTU0veXkgSEg6bW1cIikgIzwvc3Bhbj5cblx0XHRcdDxicj5cblx0XHRcdDxzdHJvbmcgY2xhc3M9XCJ0ZXh0LW5vd3JhcFwiPiM6IHNlcmllcy5uYW1lICM6ICM6IGtlbmRvLmZvcm1hdCgnJHt2YWx1ZUZvcm1hdH0nLCB2YWx1ZS55KSAjIDwvc3Ryb25nPlxuXHRcdDwvZGl2PlxuXHRgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1lbW9yeVRlbXBsYXRlKCkge1xuXHRyZXR1cm4gZnVuY3Rpb24oZGF0YUl0ZW0pIHtcblx0XHRkYXRhSXRlbS5ieXRlc1RvU2l6ZSA9IGJ5dGVzVG9TaXplOyAvLyBQYXNzIGJ5dGVzVG9TaXplIHV0aWxpdHkgZnVuY3Rpb24gdG8gdGVtcGxhdGVcblx0XHRyZXR1cm4ga2VuZG8udGVtcGxhdGUoYFxuXHRcdFx0PGRpdj5cblx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0ZXh0LW5vd3JhcFwiPiM6IGtlbmRvLnRvU3RyaW5nKG5ldyBEYXRlKHZhbHVlLngpLCBcImRkL01NL3l5IEhIOm1tXCIpICM8L3NwYW4+XG5cdFx0XHRcdDxicj5cblx0XHRcdFx0PHN0cm9uZyBjbGFzcz1cInRleHQtbm93cmFwXCI+Izogc2VyaWVzLm5hbWUgIzogIzogYnl0ZXNUb1NpemUodmFsdWUueSkgIyA8L3N0cm9uZz5cblx0XHRcdDwvZGl2PlxuXHRcdGApKGRhdGFJdGVtKTtcblx0fTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ldHdvcmtUZW1wbGF0ZSgpIHtcblx0cmV0dXJuIGZ1bmN0aW9uKGRhdGFJdGVtKSB7XG5cdFx0ZGF0YUl0ZW0uYnl0ZXNUb1NpemUgPSBieXRlc1RvU2l6ZTsgLy8gUGFzcyBieXRlc1RvU2l6ZSB1dGlsaXR5IGZ1bmN0aW9uIHRvIHRlbXBsYXRlXG5cdFx0cmV0dXJuIGtlbmRvLnRlbXBsYXRlKGBcblx0XHRcdDxkaXY+XG5cdFx0XHRcdDxzcGFuIGNsYXNzPVwidGV4dC1ub3dyYXBcIj4jOiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZSh2YWx1ZS54KSwgXCJkZC9NTS95eSBISDptbVwiKSAjPC9zcGFuPlxuXHRcdFx0XHQ8YnI+XG5cdFx0XHRcdDxzdHJvbmcgY2xhc3M9XCJ0ZXh0LW5vd3JhcFwiPiM6IHNlcmllcy5uYW1lICM6ICM6IGJ5dGVzVG9TaXplKHZhbHVlLnksIDEsICcnLCAnL3MnKSAjIDwvc3Ryb25nPlxuXHRcdFx0PC9kaXY+XG5cdFx0YCkoZGF0YUl0ZW0pO1xuXHR9O1xufVxuIiwiaW1wb3J0IHtnZXRVc2VyQ291bnRTaGFyZWRUZW1wbGF0ZX0gZnJvbSAnLi9jaGFydC11dGlscyc7XG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuZXhwb3J0IGNsYXNzIFVzZXJDb3VudENoYXJ0IGV4dGVuZHMgSFRNTEVsZW1lbnRcbntcblx0Y29uc3RydWN0b3IoKVxuXHR7XG5cdCAgICBzdXBlcigpO1xuXG5cdFx0Ly8gQ3JlYXRlIGNoYXJ0IGh0bWxcblx0XHRsZXQgY2hhcnRIdG1sID0gJCgnPGRpdj4nKTtcblx0XHQkKHRoaXMpLmFwcGVuZChjaGFydEh0bWwpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBjaGFydFxuXHRcdHRoaXMuX2NoYXJ0V2lkZ2V0ID0gdGhpcy5faW5pdENoYXJ0V2lkZ2V0KGNoYXJ0SHRtbCk7XG5cdH1cblxuXHRfaW5pdENoYXJ0V2lkZ2V0KGNoYXJ0SHRtbClcblx0e1xuXHRcdHJldHVybiBjaGFydEh0bWwua2VuZG9DaGFydCh7XG5cdFx0XHR0cmFuc2l0aW9uczogZmFsc2UsXG5cdFx0XHRjaGFydEFyZWE6IHtcblx0XHRcdFx0aGVpZ2h0OiAyNzAsXG5cdFx0XHRcdGJhY2tncm91bmQ6ICd0cmFuc3BhcmVudCdcblx0XHRcdH0sXG5cdCAgICAgICAgbGVnZW5kOiB7XG5cdCAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXJpZXNEZWZhdWx0czoge1xuXHQgICAgICAgICAgICB0eXBlOiAnYXJlYScsXG5cdCAgICAgICAgICAgIGxhYmVsczoge1xuXHQgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBmb3JtYXQ6ICd7MH0nLFxuXHQgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50J1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2VyaWVzOiBbe1xuXHRcdFx0XHRuYW1lOiAnVXNlcnMnLFxuXHQgICAgICAgICAgICBmaWVsZDogJ3VzZXJzJyxcblx0ICAgICAgICAgICAgY2F0ZWdvcnlGaWVsZDogJ3RpbWUnLFxuXHRcdFx0XHRjb2xvcjogJyNmZDdkMjQnLFxuXHRcdFx0XHRsaW5lOiB7XG5cdFx0XHRcdFx0d2lkdGg6IDJcblx0XHRcdFx0fVxuXHQgICAgICAgIH1dLFxuXHQgICAgICAgIHZhbHVlQXhpczoge1xuXHQgICAgICAgICAgICBsYWJlbHM6IHtcblx0ICAgICAgICAgICAgICAgIGZvcm1hdDogJ3swfScsXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGxpbmU6IHtcblx0ICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG5cdCAgICAgICAgICAgIH0sXG5cdFx0XHRcdG1pbjogMCxcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGNhdGVnb3J5QXhpczoge1xuXHRcdFx0XHRtYWpvckdyaWRMaW5lczoge1xuXHQgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRzdGVwOiA2MFxuXHQgICAgICAgICAgICB9LFxuXHRcdFx0XHRtYWpvclRpY2tzOiB7XG5cdFx0XHRcdFx0dmlzaWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRzdGVwOiA2MFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRsYWJlbHM6IHtcblx0XHRcdFx0XHR2aXNpYmxlOiB0cnVlLFxuXHRcdFx0XHRcdHN0ZXA6IDYwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJhc2VVbml0OiAnbWludXRlcycsXG5cdFx0XHRcdHR5cGU6ICdkYXRlJyxcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRvb2x0aXA6IHtcblx0XHRcdFx0c2hhcmVkOiB0cnVlLFxuXHQgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuXHRcdFx0XHRzaGFyZWRUZW1wbGF0ZTogZ2V0VXNlckNvdW50U2hhcmVkVGVtcGxhdGUoJ2RkIE1NTSBISDptbScpLFxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAnI2U0ZTRlNCdcblx0ICAgICAgICB9XG5cdCAgICB9KS5kYXRhKCdrZW5kb0NoYXJ0Jyk7XG5cdH1cblxuXHRyZWRyYXcoKVxuXHR7XG5cdFx0dGhpcy5fY2hhcnRXaWRnZXQucmVkcmF3KCk7XG5cdH1cblxuXHRzZXQgcmFuZ2UodmFsdWVzKVxuXHR7XG5cdFx0dGhpcy5fcmFuZ2UgPSB2YWx1ZXM7XG5cblx0XHR0aGlzLl91cGRhdGVYQXhpc0xpbWl0cygpO1xuXHR9XG5cblx0Z2V0IHJhbmdlKClcblx0e1xuXHRcdHJldHVybiB0aGlzLl9yYW5nZTtcblx0fVxuXG5cdGFkZEhpc3RvcnlFbnRyaWVzKHVzZXJDb3VudERhdGEsIHNhbXBsaW5nUmF0ZVNlY29uZHMpXG5cdHtcblx0XHRsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0bGV0IHN0YXJ0ID0gbW9tZW50KGRhdGUpO1xuXHRcdHN0YXJ0LnN1YnRyYWN0KChzYW1wbGluZ1JhdGVTZWNvbmRzICogdXNlckNvdW50RGF0YS5sZW5ndGgpLCAncycpXG5cblx0XHRsZXQgZGF0YVNvdXJjZSA9IG5ldyBrZW5kby5kYXRhLkRhdGFTb3VyY2UoKTtcblxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDwgdXNlckNvdW50RGF0YS5sZW5ndGg7IGkrKylcblx0XHR7XG5cdFx0XHRsZXQgZGF0ZSA9IHN0YXJ0LmNsb25lKCk7XG5cdFx0XHRkYXRlLmFkZChpICogc2FtcGxpbmdSYXRlU2Vjb25kcywgJ3MnKTtcblxuXHRcdFx0dGhpcy5hZGRFbnRyeSh1c2VyQ291bnREYXRhW2ldLCBkYXRhU291cmNlLCBkYXRlLnRvRGF0ZSgpLCBmYWxzZSk7XG5cdFx0fVxuXG5cdFx0Ly8gQXNzaWduIGRhdGFzb3VyY2UgdG8gY2hhcnRcblx0XHR0aGlzLl9jaGFydFdpZGdldC5zZXREYXRhU291cmNlKGRhdGFTb3VyY2UpO1xuXG5cdFx0Ly8gVXBkYXRlIGF4aXNcblx0XHR0aGlzLl91cGRhdGVYQXhpc0xpbWl0cygpO1xuXHR9XG5cblx0YWRkRW50cnkodXNlckNvdW50LCBkYXRhU291cmNlID0gbnVsbCwgZGF0ZSA9IG51bGwsIHVwZGF0ZUF4aXMgPSB0cnVlKVxuXHR7XG5cdFx0aWYgKGRhdGUgPT0gbnVsbClcblx0XHRcdGRhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0bGV0IG5ld0VudHJ5ID0ge1xuXHRcdFx0dGltZTogZGF0ZSxcblx0XHRcdHVzZXJzOiB1c2VyQ291bnRcblx0XHR9O1xuXG5cdFx0Ly8gQWRkIGVudHJ5IHRvIGRhdGEgc291cmNlXG5cdFx0aWYgKGRhdGFTb3VyY2UgPT0gbnVsbClcblx0XHRcdGRhdGFTb3VyY2UgPSB0aGlzLl9kYXRhU291cmNlO1xuXG5cdFx0ZGF0YVNvdXJjZS5hZGQobmV3RW50cnkpO1xuXG5cdFx0aWYgKHVwZGF0ZUF4aXMpXG5cdFx0XHR0aGlzLl91cGRhdGVYQXhpc0xpbWl0cygpO1xuXHR9XG5cblx0X3VwZGF0ZVhBeGlzTGltaXRzKClcblx0e1xuXHRcdGxldCBkcyA9IHRoaXMuX2RhdGFTb3VyY2U7XG5cblx0XHRpZiAoZHMudG90YWwoKSA+IDApXG5cdFx0e1xuXHRcdFx0Y29uc3QgY2hhcnRNaW5pbXVtID0gbW9tZW50KHRoaXMuX2xhc3REYXRlKS5hZGQodGhpcy5fcmFuZ2VbMF0sICdoJyk7XG5cdFx0XHRjb25zdCBjaGFydE1heGltdW0gPSBtb21lbnQodGhpcy5fbGFzdERhdGUpLmFkZCh0aGlzLl9yYW5nZVsxXSwgJ2gnKTtcblxuXHRcdFx0dGhpcy5fY2hhcnRXaWRnZXQub3B0aW9ucy5jYXRlZ29yeUF4aXMubWluID0gY2hhcnRNaW5pbXVtLnRvRGF0ZSgpO1xuXHRcdFx0dGhpcy5fY2hhcnRXaWRnZXQub3B0aW9ucy5jYXRlZ29yeUF4aXMubWF4ID0gY2hhcnRNYXhpbXVtLnRvRGF0ZSgpO1xuXG5cdFx0XHR0aGlzLl9jaGFydFdpZGdldC5yZWRyYXcoKTtcblx0XHR9XG5cdH1cblxuXHRnZXQgX2RhdGFTb3VyY2UoKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2NoYXJ0V2lkZ2V0LmRhdGFTb3VyY2U7XG5cdH1cbn1cblxuLy8gREVGSU5FIENPTVBPTkVOVFxuaWYgKCF3aW5kb3cuY3VzdG9tRWxlbWVudHMuZ2V0KCd1c2VyLWNvdW50LWNoYXJ0JykpXG5cdHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3VzZXItY291bnQtY2hhcnQnLCBVc2VyQ291bnRDaGFydCk7XG4iLCJleHBvcnQgY2xhc3MgTWF0Y2hFeHByZXNzaW9uQnVpbGRlciBleHRlbmRzIEhUTUxFbGVtZW50XG57XG5cdGNvbnN0cnVjdG9yKClcblx0e1xuXHQgICAgc3VwZXIoKTtcblxuXHRcdHRoaXMuRVhQUkVTU0lPTl9VUERBVEVEX0VWRU5UID0gJ2V4cHJlc3Npb25VcGRhdGVkJztcblxuXHRcdHRoaXMuX2RpYWxvZyA9ICQoYFxuXHRcdFx0PGRpdiBjbGFzcz1cIm1vZGFsXCIgaWQ9XCJtYXRjaEV4cHJCdWlsZGVyTW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiIGFyaWEtbGFiZWxsZWRieT1cIm1hdGNoRXhwckJ1aWxkZXJNb2RhbFRpdGxlXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2cgbW9kYWwtZGlhbG9nLWNlbnRlcmVkIG1vZGFsLWxnXCIgcm9sZT1cImRvY3VtZW50XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cblx0XHRcdFx0XHRcdFx0PGg1IGNsYXNzPVwibW9kYWwtdGl0bGUgdGV4dC1wcmltYXJ5XCIgaWQ9XCJtYXRjaEV4cHJCdWlsZGVyTW9kYWxUaXRsZVwiPi4uLjwvaDU+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5IHAtMFwiPlxuXHRcdFx0XHRcdFx0XHQ8Zm9ybSBjbGFzcz1cImJnLWNvbG9yLWRlZmF1bHQgcC0zXCI+XG5cdFx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImQtaW5saW5lLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIHJhZGlvLWJ1dHRvbi1ncm91cCBpbmxpbmUtZm9ybS1ncm91cHNcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjdXN0b20tY29udHJvbCBjdXN0b20tcmFkaW8gY3VzdG9tLWNvbnRyb2wtaW5saW5lIG1yLTJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGlucHV0IHR5cGU9XCJyYWRpb1wiIGlkPVwiYW5kT3BlcmF0b3JSQlwiIG5hbWU9XCJvcGVyYXRvclJCR1wiIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtaW5wdXRcIiB2YWx1ZT1cIkFORFwiIGNoZWNrZWQgZGlzYWJsZWQ+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxsYWJlbCBjbGFzcz1cImN1c3RvbS1jb250cm9sLWxhYmVsXCIgZm9yPVwiYW5kT3BlcmF0b3JSQlwiPkFORDwvbGFiZWw+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjdXN0b20tY29udHJvbCBjdXN0b20tcmFkaW8gY3VzdG9tLWNvbnRyb2wtaW5saW5lIG1yLTJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGlucHV0IHR5cGU9XCJyYWRpb1wiIGlkPVwib3JPcGVyYXRvclJCXCIgbmFtZT1cIm9wZXJhdG9yUkJHXCIgY2xhc3M9XCJjdXN0b20tY29udHJvbC1pbnB1dFwiIHZhbHVlPVwiT1JcIiBkaXNhYmxlZD5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGxhYmVsIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtbGFiZWxcIiBmb3I9XCJvck9wZXJhdG9yUkJcIj5PUjwvbGFiZWw+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiZC1pbmxpbmUtYmxvY2tcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJpbmxpbmUtZm9ybS1ncm91cHMgbXktMVwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8aW5wdXQgaWQ9XCJ2YXJOYW1lQ0JcIi8+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJpbmxpbmUtZm9ybS1ncm91cHMgbXktMVwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8aW5wdXQgaWQ9XCJ0eXBlRERcIiBjbGFzcz1cIm1hdGNoVHlwZURyb3Bkb3duXCIvPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8aW5wdXQgaWQ9XCJjb25kaXRpb25ERFwiIGNsYXNzPVwibWF0Y2hDb25kaXRpb25Ecm9wZG93blwiLz5cblx0XHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJkLWlubGluZSBpbmxpbmUtZm9ybS1ncm91cHNcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbnB1dCBpZD1cInZhbHVlSW5cIiBjbGFzcz1cImstdGV4dGJveCBtdC0xXCIgcGxhY2Vob2xkZXI9XCJWYWx1ZVwiLz5cblx0XHRcdFx0XHRcdFx0XHRcdDxidXR0b24gaWQ9XCJtYXRjaEV4cHJBZGRCdFwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImstYnV0dG9uIGstc2Vjb25kYXJ5IG10LTFcIj48aSBjbGFzcz1cImZhcyBmYS1wbHVzIG1yLTFcIj48L2k+QWRkPC9idXR0b24+XG5cdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdDwvZm9ybT5cblxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGlkPVwibWF0Y2hFeHByR3JpZFwiIGNsYXNzPVwibS0zXCI+PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXIgZC1mbGV4XCI+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJmbGV4LWdyb3ctMSB0ZXh0LWxlZnRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8YnV0dG9uIGlkPVwibWF0Y2hFeHByQXBwbHlCdFwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImstYnV0dG9uIGstcHJpbWFyeSBtci0yXCI+PGkgY2xhc3M9XCJmYXMgZmEtY2hlY2stY2lyY2xlIG1yLTFcIj48L2k+QXBwbHk8L2J1dHRvbj5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJmbGV4LWdyb3ctMSB0ZXh0LXJpZ2h0XCI+XG5cdFx0XHRcdFx0XHRcdFx0PGJ1dHRvbiBpZD1cIm1hdGNoRXhwclJlbW92ZUJ0XCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiay1idXR0b24gay1zZWNvbmRhcnlcIiBkaXNhYmxlZD48aSBjbGFzcz1cImZhcyBmYS1taW51cy1jaXJjbGUgbXItMVwiPjwvaT5SZW1vdmUgc2VsZWN0ZWQ8L2J1dHRvbj5cblx0XHRcdFx0XHRcdFx0XHQ8YnV0dG9uIGlkPVwibWF0Y2hFeHByQ2xlYXJCdFwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImstYnV0dG9uIGstc2Vjb25kYXJ5XCI+PGkgY2xhc3M9XCJmYXMgZmEtdGltZXMtY2lyY2xlIG1yLTFcIj48L2k+Q2xlYXIgYWxsPC9idXR0b24+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9kaXY+XG5cdFx0YCk7XG5cblx0XHQkKCcjbWF0Y2hFeHByQWRkQnQnLCB0aGlzLl9kaWFsb2cpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25BZGRCdENsaWNrLCB0aGlzKSk7XG5cdFx0JCgnI21hdGNoRXhwckFwcGx5QnQnLCB0aGlzLl9kaWFsb2cpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25BcHBseUJ0Q2xpY2ssIHRoaXMpKTtcblx0XHQkKCcjbWF0Y2hFeHByUmVtb3ZlQnQnLCB0aGlzLl9kaWFsb2cpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25SZW1vdmVCdENsaWNrLCB0aGlzKSk7XG5cdFx0JCgnI21hdGNoRXhwckNsZWFyQnQnLCB0aGlzLl9kaWFsb2cpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25DbGVhckJ0Q2xpY2ssIHRoaXMpKTtcblxuXHRcdC8vIElOSVRJQUxJWkUgRk9STSBJVEVNU1xuXG5cdFx0dGhpcy5fdmFyTmFtZUNiID0gJCgnI3Zhck5hbWVDQicsIHRoaXMuX2RpYWxvZykua2VuZG9Db21ib0JveCh7XG5cdFx0XHRkYXRhVGV4dEZpZWxkOiAnbGFiZWwnLFxuXHRcdFx0ZGF0YVZhbHVlRmllbGQ6ICd2YWx1ZScsXG5cdFx0XHRwbGFjZWhvbGRlcjogJ1ZhcmlhYmxlIG5hbWUnLFxuXHRcdH0pLmRhdGEoJ2tlbmRvQ29tYm9Cb3gnKTtcblxuXHRcdC8vIFNldCB0eXBlcyBkcm9wZG93biBkYXRhIHNvdXJjZVxuXHRcdC8vIE5PVEU6IGluIG9yZGVyIHRvIGF2b2lkIFh4eE1hdGNoIG9iamVjdHMgdG8gYmUgd3JhcHBlZCBieSBLZW5kbyBkYXRhIHNvdXJjZSwgd2UgaGF2ZSB0byBwYXNzIHRoZW0gdXNpbmcgXyBwcm9wZXJ0eSBuYW1lc1xuXHRcdGxldCB0eXBlRFMgPSBbXTtcblxuXHRcdC8vIEJvb2xlYW4gLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHR5cGVEUy5wdXNoKHtcblx0XHRcdGxhYmVsOiAnQm9vbGVhbicsXG5cdFx0XHRfdmFsdWU6IFNGUzJYLkJvb2xNYXRjaC5FUVVBTFMsXG5cdFx0XHRjb25kaXRpb25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogU0ZTMlguQm9vbE1hdGNoLkVRVUFMUy5zeW1ib2wsXG5cdFx0XHRcdFx0X3ZhbHVlOiBTRlMyWC5Cb29sTWF0Y2guRVFVQUxTLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bGFiZWw6IFNGUzJYLkJvb2xNYXRjaC5OT1RfRVFVQUxTLnN5bWJvbCxcblx0XHRcdFx0XHRfdmFsdWU6IFNGUzJYLkJvb2xNYXRjaC5OT1RfRVFVQUxTLFxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fSk7XG5cblx0XHQvLyBOdW1iZXIgLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHR5cGVEUy5wdXNoKHtcblx0XHRcdGxhYmVsOiAnTnVtYmVyJyxcblx0XHRcdF92YWx1ZTogU0ZTMlguTnVtYmVyTWF0Y2guRVFVQUxTLFxuXHRcdFx0Y29uZGl0aW9uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bGFiZWw6IFNGUzJYLk51bWJlck1hdGNoLkVRVUFMUy5zeW1ib2wsXG5cdFx0XHRcdFx0X3ZhbHVlOiBTRlMyWC5OdW1iZXJNYXRjaC5FUVVBTFMsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogU0ZTMlguTnVtYmVyTWF0Y2guTk9UX0VRVUFMUy5zeW1ib2wsXG5cdFx0XHRcdFx0X3ZhbHVlOiBTRlMyWC5OdW1iZXJNYXRjaC5OT1RfRVFVQUxTLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bGFiZWw6IFNGUzJYLk51bWJlck1hdGNoLkdSRUFURVJfVEhBTi5zeW1ib2wsXG5cdFx0XHRcdFx0X3ZhbHVlOiBTRlMyWC5OdW1iZXJNYXRjaC5HUkVBVEVSX1RIQU4sXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogU0ZTMlguTnVtYmVyTWF0Y2guTEVTU19USEFOLnN5bWJvbCxcblx0XHRcdFx0XHRfdmFsdWU6IFNGUzJYLk51bWJlck1hdGNoLkxFU1NfVEhBTixcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiBTRlMyWC5OdW1iZXJNYXRjaC5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE8uc3ltYm9sLFxuXHRcdFx0XHRcdF92YWx1ZTogU0ZTMlguTnVtYmVyTWF0Y2guR1JFQVRFUl9USEFOX09SX0VRVUFMX1RPLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bGFiZWw6IFNGUzJYLk51bWJlck1hdGNoLkxFU1NfVEhBTl9PUl9FUVVBTF9UTy5zeW1ib2wsXG5cdFx0XHRcdFx0X3ZhbHVlOiBTRlMyWC5OdW1iZXJNYXRjaC5MRVNTX1RIQU5fT1JfRVFVQUxfVE8sXG5cdFx0XHRcdH1cblx0XHRcdF1cblx0XHR9KTtcblxuXHRcdC8vIFN0cmluZyAtLS0tLS0tLS0tLS0tLS0tXG5cdFx0dHlwZURTLnB1c2goe1xuXHRcdFx0bGFiZWw6ICdTdHJpbmcnLFxuXHRcdFx0X3ZhbHVlOiBTRlMyWC5TdHJpbmdNYXRjaC5FUVVBTFMsXG5cdFx0XHRjb25kaXRpb25zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogU0ZTMlguU3RyaW5nTWF0Y2guRVFVQUxTLnN5bWJvbCxcblx0XHRcdFx0XHRfdmFsdWU6IFNGUzJYLlN0cmluZ01hdGNoLkVRVUFMUyxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiBTRlMyWC5TdHJpbmdNYXRjaC5OT1RfRVFVQUxTLnN5bWJvbCxcblx0XHRcdFx0XHRfdmFsdWU6IFNGUzJYLlN0cmluZ01hdGNoLk5PVF9FUVVBTFMsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogU0ZTMlguU3RyaW5nTWF0Y2guQ09OVEFJTlMuc3ltYm9sLFxuXHRcdFx0XHRcdF92YWx1ZTogU0ZTMlguU3RyaW5nTWF0Y2guQ09OVEFJTlMsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogU0ZTMlguU3RyaW5nTWF0Y2guU1RBUlRTX1dJVEguc3ltYm9sLFxuXHRcdFx0XHRcdF92YWx1ZTogU0ZTMlguU3RyaW5nTWF0Y2guU1RBUlRTX1dJVEgsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogU0ZTMlguU3RyaW5nTWF0Y2guRU5EU19XSVRILnN5bWJvbCxcblx0XHRcdFx0XHRfdmFsdWU6IFNGUzJYLlN0cmluZ01hdGNoLkVORFNfV0lUSCxcblx0XHRcdFx0fVxuXHRcdFx0XVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5fdHlwZURkID0gJCgnI3R5cGVERCcsIHRoaXMuX2RpYWxvZykua2VuZG9Ecm9wRG93bkxpc3Qoe1xuXHRcdFx0ZGF0YVNvdXJjZTogdHlwZURTLFxuXHRcdFx0ZGF0YVRleHRGaWVsZDogJ2xhYmVsJyxcblx0XHRcdGRhdGFWYWx1ZUZpZWxkOiAnX3ZhbHVlJyxcblx0XHRcdG9wdGlvbkxhYmVsOiB7XG5cdFx0XHRcdGxhYmVsOiAnVHlwZScsXG5cdFx0XHRcdF92YWx1ZTogJydcblx0XHRcdH0sXG5cdFx0XHRvcHRpb25MYWJlbFRlbXBsYXRlOiAnPHNwYW4gY2xhc3M9XCJ0ZXh0LW11dGVkXCI+IzpsYWJlbCM8L3NwYW4+Jyxcblx0XHRcdGNoYW5nZTogJC5wcm94eShmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKHRoaXMuX3R5cGVEZCAmJiB0aGlzLl90eXBlRGQuc2VsZWN0KCkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsZXQgc2VsZWN0ZWRUeXBlID0gdGhpcy5fdHlwZURkLmRhdGFJdGVtKHRoaXMuX3R5cGVEZC5zZWxlY3QoKSk7XG5cdFx0XHRcdFx0dGhpcy5fY29uZGl0aW9uRGQuc2V0RGF0YVNvdXJjZShzZWxlY3RlZFR5cGUuY29uZGl0aW9ucyk7XG5cdFx0XHRcdFx0dGhpcy5fY29uZGl0aW9uRGQuc2VsZWN0KDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0aGlzKVxuXHRcdH0pLmRhdGEoJ2tlbmRvRHJvcERvd25MaXN0Jyk7XG5cblx0XHR0aGlzLl9jb25kaXRpb25EZCA9ICQoJyNjb25kaXRpb25ERCcsIHRoaXMuX2RpYWxvZykua2VuZG9Ecm9wRG93bkxpc3Qoe1xuXHRcdFx0ZGF0YVRleHRGaWVsZDogJ2xhYmVsJyxcblx0XHRcdGRhdGFWYWx1ZUZpZWxkOiAnX3ZhbHVlJyxcblx0XHRcdG9wdGlvbkxhYmVsOiB7XG5cdFx0XHRcdGxhYmVsOiAnQ29uZGl0aW9uJyxcblx0XHRcdFx0X3ZhbHVlOiAnJ1xuXHRcdFx0fSxcblx0XHRcdG9wdGlvbkxhYmVsVGVtcGxhdGU6ICc8c3BhbiBjbGFzcz1cInRleHQtbXV0ZWRcIj4jOmxhYmVsIzwvc3Bhbj4nLFxuXHRcdH0pLmRhdGEoJ2tlbmRvRHJvcERvd25MaXN0Jyk7XG5cblx0XHR0aGlzLl92YWx1ZUluID0gJCgnI3ZhbHVlSW4nLCB0aGlzLl9kaWFsb2cpO1xuXG5cdFx0Ly8gSU5JVElBTElaRSBHUklEXG5cblx0XHR0aGlzLl9ncmlkID0gJCgnI21hdGNoRXhwckdyaWQnLCB0aGlzLl9kaWFsb2cpLmtlbmRvR3JpZCh7XG5cdFx0XHRkYXRhU291cmNlOiBbXSxcblx0XHRcdHJlc2l6YWJsZTogdHJ1ZSxcblx0XHRcdHNlbGVjdGFibGU6ICdyb3cnLFxuXHRcdFx0Y2hhbmdlOiAkLnByb3h5KHRoaXMuX29uR3JpZFNlbGVjdGlvbkNoYW5nZSwgdGhpcyksXG5cdFx0XHRub1JlY29yZHM6IHtcblx0XHRcdFx0dGVtcGxhdGU6ICdObyBlbnRyaWVzLidcblx0XHRcdH0sXG5cdFx0XHRjb2x1bW5zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRmaWVsZDogJ29wZXJhdG9yJyxcblx0XHRcdFx0XHR0aXRsZTogJ09wZXJhdG9yJyxcblx0XHRcdFx0XHR3aWR0aDogOTBcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGZpZWxkOiAnbGFiZWwnLFxuXHRcdFx0XHRcdHRpdGxlOiAnTmFtZScsXG5cdFx0XHRcdFx0d2lkdGg6IDEyMFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZmllbGQ6ICd0eXBlTGFiZWwnLFxuXHRcdFx0XHRcdHRpdGxlOiAnVHlwZScsXG5cdFx0XHRcdFx0d2lkdGg6IDg1XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRmaWVsZDogJ3N5bWJvbCcsXG5cdFx0XHRcdFx0dGl0bGU6ICdDb25kaXRpb24nLFxuXHRcdFx0XHRcdHdpZHRoOiA5NVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZmllbGQ6ICd2YWx1ZScsXG5cdFx0XHRcdFx0dGl0bGU6ICdWYWx1ZScsXG5cdFx0XHRcdFx0d2lkdGg6IDIwMFxuXHRcdFx0XHR9LFxuXHRcdFx0XVxuXHRcdH0pLmRhdGEoJ2tlbmRvR3JpZCcpO1xuXHR9XG5cblx0Z2V0IHRpdGxlKClcblx0e1xuXHRcdHJldHVybiAkKCcjbWF0Y2hFeHByQnVpbGRlck1vZGFsVGl0bGUnLCB0aGlzLl9kaWFsb2cpLnRleHQoKTtcblx0fVxuXG5cdHNldCB0aXRsZSh2YWx1ZSlcblx0e1xuXHRcdCQoJyNtYXRjaEV4cHJCdWlsZGVyTW9kYWxUaXRsZScsIHRoaXMuX2RpYWxvZykudGV4dCh2YWx1ZSk7XG5cdH1cblxuXHRnZXQgcHJlZGVmaW5lZFZhck5hbWVzKClcblx0e1xuXHRcdHJldHVybiB0aGlzLl9wcmVkZWZpbmVkVmFyTmFtZXM7XG5cdH1cblxuXHRzZXQgcHJlZGVmaW5lZFZhck5hbWVzKHZhbHVlKVxuXHR7XG5cdFx0dGhpcy5fcHJlZGVmaW5lZFZhck5hbWVzID0gdmFsdWU7XG5cblx0XHR0aGlzLl92YXJOYW1lQ2Iuc2V0RGF0YVNvdXJjZSh2YWx1ZSk7XG5cdH1cblxuXHRnZXQgZmlsdGVyRXhwcmVzc2lvbigpXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fZmlsdGVyRXhwcmVzc2lvbjtcblx0fVxuXG5cdHNob3coKVxuXHR7XG5cdFx0dGhpcy5fZGlhbG9nLm1vZGFsKHtcblx0XHRcdGJhY2tkcm9wOiAnc3RhdGljJyxcblx0XHRcdGtleWJvYXJkOiBmYWxzZSxcblx0XHRcdHNob3c6IHRydWVcblx0XHR9KTtcblx0fVxuXG5cdF9vbkdyaWRTZWxlY3Rpb25DaGFuZ2UoKVxuXHR7XG5cdFx0bGV0IHNlbGVjdGVkUm93cyA9IHRoaXMuX2dyaWQuc2VsZWN0KCk7XG5cdFx0bGV0IHNlbGVjdGVkRGF0YUl0ZW1zID0gW107XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkUm93cy5sZW5ndGg7IGkrKylcblx0XHR7XG5cdFx0XHRsZXQgZGF0YUl0ZW0gPSB0aGlzLl9ncmlkLmRhdGFJdGVtKHNlbGVjdGVkUm93c1tpXSk7XG5cdFx0XHRzZWxlY3RlZERhdGFJdGVtcy5wdXNoKGRhdGFJdGVtKTtcblx0XHR9XG5cblx0XHQvLyBFbmFibGUvZGlzYWJsZSByZW1vdmUgYnV0dG9uXG5cdFx0JCgnI21hdGNoRXhwclJlbW92ZUJ0JywgdGhpcy5fZGlhbG9nKS5hdHRyKCdkaXNhYmxlZCcsIHNlbGVjdGVkRGF0YUl0ZW1zLmxlbmd0aCA9PSAwKTtcblx0fVxuXG5cdF9vbkFkZEJ0Q2xpY2soKVxuXHR7XG5cdFx0aWYgKHRoaXMuX3Zhck5hbWVDYi52YWx1ZSgpICE9ICcnICYmIHRoaXMuX3R5cGVEZC5zZWxlY3QoKSlcblx0XHR7XG5cdFx0XHQvLyBWYXJpYWJsZSBuYW1lIGFuZCBsYWJlbFxuXHRcdFx0bGV0IHZhck5hbWUsIHZhckxhYmVsO1xuXG5cdFx0XHRpZiAodGhpcy5fdmFyTmFtZUNiLnNlbGVjdCgpID4gLTEpXG5cdFx0XHR7XG5cdFx0XHRcdGxldCBkYXRhSXRlbSA9IHRoaXMuX3Zhck5hbWVDYi5kYXRhSXRlbSh0aGlzLl92YXJOYW1lQ2Iuc2VsZWN0KCkpO1xuXHRcdFx0XHR2YXJOYW1lID0gZGF0YUl0ZW0udmFsdWU7XG5cdFx0XHRcdHZhckxhYmVsID0gZGF0YUl0ZW0ubGFiZWw7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHZhck5hbWUgPSB2YXJMYWJlbCA9IHRoaXMuX3Zhck5hbWVDYi52YWx1ZSgpO1xuXG5cdFx0XHQvLyBWYXJpYWJsZSB0eXBlJ3MgbGFiZWxcblx0XHRcdGxldCB0eXBlTGFiZWwgPSB0aGlzLl90eXBlRGQuZGF0YUl0ZW0odGhpcy5fdHlwZURkLnNlbGVjdCgpKS5sYWJlbDtcblxuXHRcdFx0Ly8gTWF0Y2ggY29uZGl0aW9uXG5cdFx0XHRsZXQgY29uZGl0aW9uID0gdGhpcy5fY29uZGl0aW9uRGQuZGF0YUl0ZW0odGhpcy5fY29uZGl0aW9uRGQuc2VsZWN0KCkpLl92YWx1ZTtcblxuXHRcdFx0Ly8gRXhwcmVzc2lvbiBvcGVyYXRvclxuXHRcdFx0bGV0IG9wZXJhdG9yID0gdGhpcy5fZ3JpZC5kYXRhU291cmNlLnRvdGFsKCkgPiAwID8gJCgnaW5wdXRbbmFtZT1vcGVyYXRvclJCR106Y2hlY2tlZCcsIHRoaXMuX2RpYWxvZykudmFsKCkgOiBudWxsO1xuXG5cdFx0XHQvLyBWYXJpYWJsZSB2YWx1ZVxuXHRcdFx0bGV0IHZhbCA9IHRoaXMuX3ZhbHVlSW4udmFsKCk7XG5cdFx0XHRsZXQgdmFyVmFsdWU7XG5cblx0XHRcdGlmIChjb25kaXRpb24gaW5zdGFuY2VvZiBTRlMyWC5Cb29sTWF0Y2gpXG5cdFx0XHRcdHZhclZhbHVlID0gKHZhbCA9PSAndHJ1ZScgPyB0cnVlIDogZmFsc2UpO1xuXHRcdFx0ZWxzZSBpZiAoY29uZGl0aW9uIGluc3RhbmNlb2YgU0ZTMlguTnVtYmVyTWF0Y2gpXG5cdFx0XHRcdHZhclZhbHVlID0gKGlzTmFOKE51bWJlcih2YWwpKSA/IDAgOiBOdW1iZXIodmFsKSk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHZhclZhbHVlID0gdmFsO1xuXG5cdFx0XHQvLyBBZGQgaXRlbSB0byBncmlkXG5cdFx0XHRsZXQgZXhwclBhcnQgPSB0aGlzLl9nZXRFeHByZXNzaW9uUGFydCh2YXJMYWJlbCwgdmFyTmFtZSwgdmFyVmFsdWUsIHR5cGVMYWJlbCwgY29uZGl0aW9uLCBvcGVyYXRvcik7XG5cdFx0XHR0aGlzLl9ncmlkLmRhdGFTb3VyY2UuYWRkKGV4cHJQYXJ0KTtcblxuXHRcdFx0Ly8gUmVzZXQgaW5wdXRzXG5cdFx0XHR0aGlzLl92YXJOYW1lQ2IudmFsdWUoJycpO1xuXHRcdFx0dGhpcy5fdmFsdWVJbi52YWwoJycpO1xuXG5cdFx0XHQvLyBFbmFibGUgb3BlcmF0b3IgcmFkaW8gYnV0dG9uc1xuXHRcdFx0dGhpcy5fZW5hYmxlT3BlcmF0b3JSYih0cnVlKTtcblx0XHR9XG5cdH1cblxuXHRfb25BcHBseUJ0Q2xpY2soKVxuXHR7XG5cdFx0Ly8gSGlkZSBkaWFsb2dcblx0XHR0aGlzLl9kaWFsb2cubW9kYWwoJ2hpZGUnKTtcblxuXHRcdC8vIENsZWFyIGdyaWQgc2VsZWN0aW9uXG5cdFx0dGhpcy5fZ3JpZC5jbGVhclNlbGVjdGlvbigpO1xuXG5cdFx0Ly8gQnVpbGQgZmluYWwgbWF0Y2ggZXhwcmVzc2lvblxuXHRcdHRoaXMuX2ZpbHRlckV4cHJlc3Npb24gPSBudWxsO1xuXG5cdFx0aWYgKHRoaXMuX2dyaWQuZGF0YVNvdXJjZS50b3RhbCgpID4gMClcblx0XHR7XG5cdFx0XHRsZXQgZXhwUGFydCA9IHRoaXMuX2dyaWQuZGF0YVNvdXJjZS5hdCgwKTtcblx0XHRcdHRoaXMuX2ZpbHRlckV4cHJlc3Npb24gPSBuZXcgU0ZTMlguTWF0Y2hFeHByZXNzaW9uKGV4cFBhcnQubmFtZSwgZXhwUGFydC5fY29uZGl0aW9uLCBleHBQYXJ0LnZhbHVlKTtcblxuXHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLl9ncmlkLmRhdGFTb3VyY2UudG90YWwoKTsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHRleHBQYXJ0ID0gdGhpcy5fZ3JpZC5kYXRhU291cmNlLmF0KGkpO1xuXG5cdFx0XHRcdGlmIChleHBQYXJ0Lm9wZXJhdG9yID09IFNGUzJYLkxvZ2ljT3BlcmF0b3IuQU5ELmlkKVxuXHRcdFx0XHRcdHRoaXMuX2ZpbHRlckV4cHJlc3Npb24gPSB0aGlzLl9maWx0ZXJFeHByZXNzaW9uLmFuZChleHBQYXJ0Lm5hbWUsIGV4cFBhcnQuX2NvbmRpdGlvbiwgZXhwUGFydC52YWx1ZSk7XG5cdFx0XHRcdGVsc2UgaWYgKGV4cFBhcnQub3BlcmF0b3IgPT0gU0ZTMlguTG9naWNPcGVyYXRvci5PUi5pZClcblx0XHRcdFx0XHR0aGlzLl9maWx0ZXJFeHByZXNzaW9uID0gdGhpcy5fZmlsdGVyRXhwcmVzc2lvbi5vcihleHBQYXJ0Lm5hbWUsIGV4cFBhcnQuX2NvbmRpdGlvbiwgZXhwUGFydC52YWx1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBldmVudFxuXHRcdGxldCBldnQgPSBuZXcgQ3VzdG9tRXZlbnQodGhpcy5FWFBSRVNTSU9OX1VQREFURURfRVZFTlQsIHtcblx0XHQgICAgXHRkZXRhaWw6IG51bGwsXG5cdFx0XHRcdGJ1YmJsZXM6IGZhbHNlLFxuXHRcdFx0XHRjYW5jZWxhYmxlOiBmYWxzZVxuXHRcdFx0fSk7XG5cblx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoZXZ0KTtcblx0fVxuXG5cdF9vblJlbW92ZUJ0Q2xpY2soKVxuXHR7XG5cdFx0bGV0IGRhdGFJdGVtID0gdGhpcy5fZ3JpZC5kYXRhSXRlbSh0aGlzLl9ncmlkLnNlbGVjdCgpKTtcblx0XHR0aGlzLl9ncmlkLmRhdGFTb3VyY2UucmVtb3ZlKGRhdGFJdGVtKTtcblxuXHRcdC8vIENsZWFyIGdyaWQgc2VsZWN0aW9uXG5cdFx0dGhpcy5fZ3JpZC5jbGVhclNlbGVjdGlvbigpO1xuXG5cdFx0aWYgKHRoaXMuX2dyaWQuZGF0YVNvdXJjZS50b3RhbCgpID09IDApXG5cdFx0e1xuXHRcdFx0Ly8gRGlzYWJsZSBvcGVyYXRvciByYWRpbyBidXR0b25zXG5cdFx0XHR0aGlzLl9lbmFibGVPcGVyYXRvclJiKGZhbHNlKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdC8vIFJlc2V0IG9wZXJhdG9yIG9uIGZpcnN0IGVudHJ5XG5cdFx0XHR0aGlzLl9ncmlkLmRhdGFTb3VyY2UuYXQoMCkub3BlcmF0b3IgPSBudWxsO1xuXHRcdFx0dGhpcy5fZ3JpZC5yZWZyZXNoKCk7XG5cdFx0fVxuXHR9XG5cblx0X29uQ2xlYXJCdENsaWNrKClcblx0e1xuXHRcdC8vIFJlc2V0IGZvcm1cblx0XHQkKCcjYW5kT3BlcmF0b3JSQicsIHRoaXMuX2RpYWxvZykuYXR0cignY2hlY2tlZCcsIHRydWUpO1xuXHRcdCQoJyNvck9wZXJhdG9yUkInLCB0aGlzLl9kaWFsb2cpLmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XG5cdFx0dGhpcy5fZW5hYmxlT3BlcmF0b3JSYihmYWxzZSk7XG5cblx0XHR0aGlzLl92YXJOYW1lQ2IudmFsdWUoJycpO1xuXHRcdHRoaXMuX3R5cGVEZC5zZWxlY3QoMCk7XG5cdFx0dGhpcy5fY29uZGl0aW9uRGQuc2VsZWN0KDApO1xuXG5cdFx0dGhpcy5fdmFsdWVJbi52YWwoJycpO1xuXG5cdFx0Ly8gQ2xlYXIgZ3JpZCBzZWxlY3Rpb25cblx0XHR0aGlzLl9ncmlkLmNsZWFyU2VsZWN0aW9uKCk7XG5cblx0XHQvLyBDbGVhciB0YWJsZVxuXHRcdHRoaXMuX2dyaWQuc2V0RGF0YVNvdXJjZShbXSk7XG5cdH1cblxuXHRfZ2V0RXhwcmVzc2lvblBhcnQodmFyTGFiZWwsIHZhck5hbWUsIHZhclZhbHVlLCB0eXBlTGFiZWwsIGNvbmRpdGlvbiwgb3BlcmF0b3IpXG5cdHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0J2xhYmVsJzogdmFyTGFiZWwsXG5cdFx0XHQnbmFtZSc6IHZhck5hbWUsXG5cdFx0XHQndmFsdWUnOiB2YXJWYWx1ZSxcblx0XHRcdCd0eXBlTGFiZWwnOiB0eXBlTGFiZWwsXG5cdFx0XHQnc3ltYm9sJzogY29uZGl0aW9uLnN5bWJvbCxcblx0XHRcdCdvcGVyYXRvcic6IG9wZXJhdG9yLFxuXHRcdFx0J19jb25kaXRpb24nOiBjb25kaXRpb24sXG5cdFx0fTtcblx0fVxuXG5cdF9lbmFibGVPcGVyYXRvclJiKGVuYWJsZSlcblx0e1xuXHRcdCQoJyNhbmRPcGVyYXRvclJCJywgdGhpcy5fZGlhbG9nKS5hdHRyKCdkaXNhYmxlZCcsICFlbmFibGUpO1xuXHRcdCQoJyNvck9wZXJhdG9yUkInLCB0aGlzLl9kaWFsb2cpLmF0dHIoJ2Rpc2FibGVkJywgIWVuYWJsZSk7XG5cdH1cbn1cblxuLy8gREVGSU5FIENPTVBPTkVOVFxuaWYgKCF3aW5kb3cuY3VzdG9tRWxlbWVudHMuZ2V0KCdtYXRjaC1leHByZXNzaW9uLWJ1aWxkZXInKSlcblx0d2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbWF0Y2gtZXhwcmVzc2lvbi1idWlsZGVyJywgTWF0Y2hFeHByZXNzaW9uQnVpbGRlcik7XG4iLCJleHBvcnQgY2xhc3MgU2lkZWJhckxheW91dCBleHRlbmRzIEhUTUxFbGVtZW50XG57XG5cdGNvbnN0cnVjdG9yKClcblx0e1xuXHQgICAgc3VwZXIoKTtcblxuXHRcdC8vIEF0dGFjaCBhIHNoYWRvdyByb290XG5cdFx0Y29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHttb2RlOiAnb3Blbid9KTtcblx0XHRzaGFkb3dSb290LmlubmVySFRNTCA9IGBcblx0XHRcdDxzdHlsZT5cblx0XHRcdFx0Omhvc3Qge1xuXHRcdFx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRcdFx0ZmxleC1kaXJlY3Rpb246IHJvdztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdEBtZWRpYSAobWF4LXdpZHRoOiA1NzUuOThweCkge1xuXHRcdFx0XHRcdDpob3N0KC5zcGxpdC14cykgOjpzbG90dGVkKDpub3QoW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdKSkge1xuXHRcdFx0XHRcdFx0ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuXHRcdFx0XHQgICAgfVxuXG5cdFx0XHRcdFx0Omhvc3QoLnNwbGl0LXhzKSA6OnNsb3R0ZWQoW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdKSB7XG5cdFx0XHRcdFx0XHRmbGV4LWdyb3c6IDE7XG5cdFx0XHRcdCAgICB9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRAbWVkaWEgKG1heC13aWR0aDogNzY3Ljk4cHgpIHtcblx0XHRcdFx0XHQ6aG9zdCguc3BsaXQtc20pIDo6c2xvdHRlZCg6bm90KFthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXSkpIHtcblx0XHRcdFx0XHRcdGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcblx0XHRcdFx0ICAgIH1cblxuXHRcdFx0XHRcdDpob3N0KC5zcGxpdC1zbSkgOjpzbG90dGVkKFthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXSkge1xuXHRcdFx0XHRcdFx0ZmxleC1ncm93OiAxO1xuXHRcdFx0XHQgICAgfVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0QG1lZGlhIChtYXgtd2lkdGg6IDk5MS45OHB4KSB7XG5cdFx0XHRcdFx0Omhvc3QoLnNwbGl0LW1kKSA6OnNsb3R0ZWQoOm5vdChbYXJpYS1zZWxlY3RlZD1cInRydWVcIl0pKSB7XG5cdFx0XHRcdFx0XHRkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG5cdFx0XHRcdCAgICB9XG5cblx0XHRcdFx0XHQ6aG9zdCguc3BsaXQtbWQpIDo6c2xvdHRlZChbYXJpYS1zZWxlY3RlZD1cInRydWVcIl0pIHtcblx0XHRcdFx0XHRcdGZsZXgtZ3JvdzogMTtcblx0XHRcdFx0ICAgIH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdEBtZWRpYSAobWF4LXdpZHRoOiAxMTk5Ljk4cHgpIHtcblx0XHRcdFx0XHQ6aG9zdCguc3BsaXQtbGcpIDo6c2xvdHRlZCg6bm90KFthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXSkpIHtcblx0XHRcdFx0XHRcdGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcblx0XHRcdFx0ICAgIH1cblxuXHRcdFx0XHRcdDpob3N0KC5zcGxpdC1sZykgOjpzbG90dGVkKFthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXSkge1xuXHRcdFx0XHRcdFx0ZmxleC1ncm93OiAxO1xuXHRcdFx0XHQgICAgfVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0LnNpZGUtY29sOjpzbG90dGVkKCopIHtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5tYWluLWNvbDo6c2xvdHRlZCgqKSB7XG5cdFx0XHRcdFx0ZmxleC1ncm93OiAxO1xuXHRcdFx0XHR9XG5cdFx0XHQ8L3N0eWxlPlxuXG5cdFx0XHQ8c2xvdCBjbGFzcz1cInNpZGUtY29sXCIgbmFtZT1cInNpZGUtY29sdW1uXCI+PC9zbG90PlxuXHRcdFx0PHNsb3QgY2xhc3M9XCJtYWluLWNvbFwiIG5hbWU9XCJtYWluLWNvbHVtblwiPjwvc2xvdD5cblx0XHRgO1xuXG5cdFx0Ly8gU2V0IGluaXRpYWwgc2VsZWN0aW9uXG5cdFx0dGhpcy5zZWxlY3RlZEluZGV4ID0gMDtcblx0fVxuXG5cdGdldCBzZWxlY3RlZFBhbmVsKClcblx0e1xuXHRcdHJldHVybiB0aGlzLl9zZWxlY3RlZFBhbmVsO1xuXHR9XG5cblx0c2V0IHNlbGVjdGVkUGFuZWwoZWxlbWVudCkgLy8gJ3NpZGUnIG9yICdtYWluJ1xuXHR7XG5cdFx0aWYgKGVsZW1lbnQgIT0gbnVsbCAmJiBlbGVtZW50LnBhcmVudE5vZGUgPT0gdGhpcylcblx0XHR7XG5cdFx0XHR0aGlzLl9zZWxlY3RlZFBhbmVsID0gZWxlbWVudDtcblxuXHRcdFx0Zm9yIChsZXQgZWxlbWVudCBvZiB0aGlzLmNoaWxkcmVuKVxuXHRcdFx0e1xuXHRcdFx0XHRpZiAoZWxlbWVudCA9PSB0aGlzLl9zZWxlY3RlZFBhbmVsKVxuXHRcdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFbGVtZW50IGlzIG5vdCBhIGNoaWxkIG9mIFNpZGViYXJMYXlvdXQnKTtcblx0XHR9XG5cdH1cblxuXHRnZXQgc2VsZWN0ZWRJbmRleCgpXG5cdHtcblx0XHRyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNoaWxkcmVuKS5pbmRleE9mKHRoaXMuX3NlbGVjdGVkUGFuZWwpO1xuXHR9XG5cblx0c2V0IHNlbGVjdGVkSW5kZXgoaW5kZXgpXG5cdHtcblx0XHRpZiAodGhpcy5jaGlsZHJlbi5sZW5ndGggPiAwKVxuXHRcdHtcblx0XHRcdGlmICh0aGlzLmNoaWxkcmVuW2luZGV4XSA9PSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdJbnZhbGlkIFNpZGViYXJMYXlvdXQgaW5kZXgnKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgZWxlbWVudCA9IHRoaXMuY2hpbGRyZW5baW5kZXhdO1xuXHRcdFx0dGhpcy5zZWxlY3RlZFBhbmVsID0gZWxlbWVudDtcblx0XHR9XG5cdH1cbn1cblxuLy8gREVGSU5FIENPTVBPTkVOVFxuaWYgKCF3aW5kb3cuY3VzdG9tRWxlbWVudHMuZ2V0KCdzaWRlYmFyLWxheW91dCcpKVxuXHR3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdzaWRlYmFyLWxheW91dCcsIFNpZGViYXJMYXlvdXQpO1xuIiwiaW1wb3J0IHtCYXNlTW9kdWxlfSBmcm9tICcuL2Jhc2UtbW9kdWxlJztcbmltcG9ydCB7U2lkZWJhckxheW91dH0gZnJvbSAnLi4vY29tcG9uZW50cy9zaWRlYmFyLWxheW91dCc7XG5pbXBvcnQge01hdGNoRXhwcmVzc2lvbkJ1aWxkZXJ9IGZyb20gJy4uL2NvbXBvbmVudHMvbW9kdWxlLXNwZWNpZmljL21hdGNoLWV4cHJlc3Npb24tYnVpbGRlcic7XG5pbXBvcnQge0NvbmZpZ0ludGVyZmFjZUJ1aWxkZXJ9IGZyb20gJy4uL3V0aWxzL3VpYnVpbGRlci9jb25maWctaW50ZXJmYWNlLWJ1aWxkZXInO1xuaW1wb3J0IHtjYXBpdGFsaXplRmlyc3QsIGZpbHRlckNsYXNzTmFtZSwgcm91bmRUb0RlY2ltYWxzLCBzY2FsZUJ5dGVzfSBmcm9tICcuLi91dGlscy91dGlsaXRpZXMnO1xuaW1wb3J0IHtSb29tUHJvcGVydGllc0RhdGEsVXNlclByb3BlcnRpZXNEYXRhfSBmcm9tICcuLi91dGlscy9tYXRjaC1wcm9wZXJ0aWVzJztcbmltcG9ydCB7VXNlckNvdW50Q2hhcnR9IGZyb20gJy4uL2NvbXBvbmVudHMvY2hhcnRzL3VzZXItY291bnQtY2hhcnQnO1xuaW1wb3J0IHtnZXRUaW1lUmFuZ2VUb29sdGlwVGVtcGxhdGUsIGdldFdSQnl0ZXNMYWJlbFRlbXBsYXRlfSBmcm9tICcuLi9jb21wb25lbnRzL2NoYXJ0cy9jaGFydC11dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFpvbmVNb25pdG9yIGV4dGVuZHMgQmFzZU1vZHVsZVxue1xuXHRjb25zdHJ1Y3RvcigpXG5cdHtcblx0ICAgIHN1cGVyKCd6b25lTW9uaXRvcicpO1xuXG5cdFx0dGhpcy5NT05JVE9SRURfVFlQRV9aT05FID0gJ3pvbmUnO1xuXHRcdHRoaXMuTU9OSVRPUkVEX1RZUEVfUk9PTSA9ICdyb29tJztcblx0XHR0aGlzLk1PTklUT1JFRF9UWVBFX1VTRVIgPSAndXNlcic7XG5cblx0XHR0aGlzLkFOWV9MQUJFTCA9ICdbYW55XSc7XG5cdFx0dGhpcy5ERUZBVUxUX0dST1VQX05BTUUgPSAnZGVmYXVsdCc7XG5cdFx0dGhpcy5NQVhfRVhURU5TSU9OX0xPR19TSVpFID0gMzAwO1xuXHRcdHRoaXMuS0lDS19CQU5fREVGQVVMVF9ERUxBWSA9IDU7XG5cblx0XHQvLyBPdXRnb2luZyByZXF1ZXN0c1xuXHRcdHRoaXMuUkVRX0dFVF9EQVRBID0gJ2dldERhdGEnO1xuXHRcdHRoaXMuUkVRX1NFVF9aT05FX1NFVFRJTkdTID0gJ3NldFpvbmVTZXR0aW5ncyc7XG5cdFx0dGhpcy5SRVFfU0VUX1JPT01fU0VUVElOR1MgPSAnc2V0Um9vbVNldHRpbmdzJztcblx0XHR0aGlzLlJFUV9TRVRfVVNFUl9TRVRUSU5HUyA9ICdzZXRVc2VyU2V0dGluZ3MnO1xuXHRcdHRoaXMuUkVRX1JFTE9BRF9aT05FX0VYVCA9ICdyZWxvYWRab25lRXh0Jztcblx0XHR0aGlzLlJFUV9SRUxPQURfV09SRFMgPSAncmVsb2FkV29yZHMnO1xuXHRcdHRoaXMuUkVRX0RJU0NPTk5FQ1RfVVNFUiA9ICdkaXNjb25uVXNlcic7XG5cdFx0dGhpcy5SRVFfS0lDS19VU0VSID0gJ2tpY2tVc2VyJztcblx0XHR0aGlzLlJFUV9CQU5fVVNFUiA9ICdiYW5Vc2VyJztcblx0XHR0aGlzLlJFUV9HRVRfUk9PTV9DT05GSUcgPSAnZ2V0Um9vbUNvbmZpZyc7XG5cdFx0dGhpcy5SRVFfQ1JFQVRFX1JPT00gPSAnY3JlYXRlUm9vbSc7XG5cdFx0dGhpcy5SRVFfUkVNT1ZFX1JPT00gPSAncmVtb3ZlUm9vbSc7XG5cdFx0dGhpcy5SRVFfQURNSU5fTVNHID0gJ2FkbWluTXNnJztcblxuXHRcdC8vIEluY29taW5nIHJlc3BvbnNlc1xuXHRcdHRoaXMuUkVTUF9EQVRBID0gJ2RhdGEnO1xuXHRcdHRoaXMuUkVTUF9VTkVYUEVDVEVEX0VSUk9SID0gJ3VuZXhwRXJyb3InO1xuXHRcdHRoaXMuUkVTUF9VUERBVEVfRVJST1IgPSAndXBkYXRlRXJyb3InO1xuXHRcdHRoaXMuUkVTUF9ST09NX0NPTkZJRyA9ICdyb29tQ29uZmlnJztcblx0XHR0aGlzLlJFU1BfUk9PTV9DT05GSUdfRVJST1IgPSAncm9vbUNvbmZpZ0Vycic7XG5cdFx0dGhpcy5SRVNQX1JPT01fQ1JFQVRFRCA9ICdyb29tQ3JlYXRlZCc7XG5cdFx0dGhpcy5SRVNQX1JPT01fQ1JFQVRJT05fRVJST1IgPSAncm9vbUVycm9yJztcblx0XHR0aGlzLlJFU1BfTE9HX01FU1NBR0VTID0gJ2xvZyc7IC8vIFRoaXMgcmVzcG9uc2UgZG9lc24ndCBoYXZlIGEgY29ycmVzcG9uZGluZyByZXF1ZXN0IGJlY2F1c2UgaXQgaXMgbWFuYWdlZCBieSBhIHNlcnZlciBldmVudCBsaXN0ZW5lclxuXG5cdFx0dGhpcy5fY3VycmVudFJlcXVlc3RJZCA9IC0xO1xuXHR9XG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gQ09NTU9OIE1PRFVMRSBJTlRFUkZBQ0UgTUVUSE9EU1xuXHQvLyBUaGlzIG1lbWJlcnMgYXJlIHVzZWQgYnkgdGhlIG1haW4gY29udHJvbGxlclxuXHQvLyB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBtb2R1bGUncyBjb250cm9sbGVyLlxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdGluaXRpYWxpemUoaWREYXRhLCBzaGVsbENvbnRyb2xsZXIpXG5cdHtcblx0XHQvLyBDYWxsIHN1cGVyIG1ldGhvZFxuXHRcdHN1cGVyLmluaXRpYWxpemUoaWREYXRhLCBzaGVsbENvbnRyb2xsZXIpO1xuXG5cdFx0Ly8gU2V0IG1vbml0b3JpbmcgaW50ZXJmYWNlXG5cdFx0dGhpcy5fc2V0TW9uaXRvcmluZ0ludGVyZmFjZSgpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBwcm9ncmVzcyBiYXJcblx0XHQkKCcjem5tLXByb2dyZXNzQmFyJykua2VuZG9Qcm9ncmVzc0Jhcih7XG5cdFx0XHRtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDEwMCxcblx0XHRcdHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgICAgICBhbmltYXRpb246IHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cdFx0Ly8gTElTVFNcblxuXHRcdC8vIEluaXRpYWxpemUgaW50ZXJ2YWwgZHJvcGRvd25cblx0XHR0aGlzLl9pbnRlcnZhbERyb3BEb3duID0gJCgnI3pubS1pbnRlcnZhbEREJykua2VuZG9Ecm9wRG93bkxpc3Qoe1xuXHRcdFx0dmFsdWVUZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwidGV4dC1tdXRlZCBwci0xXCI+SW50ZXJ2YWw6PC9zcGFuPjxzcGFuPiM6ZGF0YS50ZXh0Izwvc3Bhbj4nLFxuXHRcdFx0Y2hhbmdlOiAkLnByb3h5KHRoaXMuX29uVXBkYXRlSW50ZXJ2YWxDaGFuZ2UsIHRoaXMpXG5cdFx0fSkuZGF0YSgna2VuZG9Ecm9wRG93bkxpc3QnKTtcblxuXHRcdC8vIEluaXRpYWxpemUgcGFuZSBiYXJcblx0XHR0aGlzLl9hY2NvcmRpb24gPSAkKCcjem5tLXBhbmVsYmFyJykua2VuZG9QYW5lbEJhcih7XG4gICAgICAgICAgICBleHBhbmRNb2RlOiAnc2luZ2xlJyxcblx0XHRcdGNoYW5nZTogJC5wcm94eSh0aGlzLl9vbkVudGl0aWVzUGFuZWxDaGFuZ2UsIHRoaXMpXG4gICAgICAgIH0pLmRhdGEoJ2tlbmRvUGFuZWxCYXInKTtcblxuXHRcdC8vIEluaXRpYWxpemUgbGlzdHNcblx0XHR0aGlzLl96b25lTGlzdEJveCA9ICQoXCIjem5tLXpvbmVMaXN0XCIpLmtlbmRvTGlzdEJveCh7XG5cdFx0XHR0ZW1wbGF0ZTogJzxkaXY+IzpkYXRhLm5hbWUjICgjOmRhdGEudXNlcnMjKTwvZGl2PicsXG5cdFx0XHRjaGFuZ2U6ICQucHJveHkodGhpcy5fb25ab25lU2VsZWN0ZWQsIHRoaXMpXG5cdFx0fSkuZGF0YSgna2VuZG9MaXN0Qm94Jyk7XG5cblx0XHR0aGlzLl96b25lTGlzdEJveC53cmFwcGVyLmZpbmQoJy5rLWxpc3QnKS5vbignZGJsY2xpY2snLCAnLmstaXRlbScsICQucHJveHkodGhpcy5fb25Nb25pdG9yU2VsZWN0aW9uQnRDbGljaywgdGhpcykpO1xuXG5cdFx0dGhpcy5fcm9vbUxpc3RCb3ggPSAkKFwiI3pubS1yb29tTGlzdFwiKS5rZW5kb0xpc3RCb3goe1xuXHRcdFx0dGVtcGxhdGU6ICc8ZGl2PiM6ZGF0YS5uYW1lIyAoIzpkYXRhLnVzZXJzIyk8L2Rpdj4nLFxuXHRcdFx0Y2hhbmdlOiAkLnByb3h5KHRoaXMuX29uUm9vbVNlbGVjdGVkLCB0aGlzKVxuXHRcdH0pLmRhdGEoJ2tlbmRvTGlzdEJveCcpO1xuXG5cdFx0dGhpcy5fcm9vbUxpc3RCb3gud3JhcHBlci5maW5kKCcuay1saXN0Jykub24oJ2RibGNsaWNrJywgJy5rLWl0ZW0nLCAkLnByb3h5KHRoaXMuX29uTW9uaXRvclNlbGVjdGlvbkJ0Q2xpY2ssIHRoaXMpKTtcblxuXHRcdHRoaXMuX3VzZXJMaXN0Qm94ID0gJChcIiN6bm0tdXNlckxpc3RcIikua2VuZG9MaXN0Qm94KHtcblx0XHRcdHRlbXBsYXRlOiAnPGRpdj4jOmRhdGEubmFtZSM8L2Rpdj4nLFxuXHRcdFx0Y2hhbmdlOiAkLnByb3h5KHRoaXMuX29uVXNlclNlbGVjdGVkLCB0aGlzKVxuXHRcdH0pLmRhdGEoJ2tlbmRvTGlzdEJveCcpO1xuXG5cdFx0dGhpcy5fdXNlckxpc3RCb3gud3JhcHBlci5maW5kKCcuay1saXN0Jykub24oJ2RibGNsaWNrJywgJy5rLWl0ZW0nLCAkLnByb3h5KHRoaXMuX29uTW9uaXRvclNlbGVjdGlvbkJ0Q2xpY2ssIHRoaXMpKTtcblxuXHRcdC8vIEluaXRpYWxpemUgUm9vbSBHcm91cHMgZHJvcGRvd25cblx0XHR0aGlzLl9ncm91cHNEcm9wRG93biA9ICQoJyN6bm0tcm9vbUdyb3Vwc0REJykua2VuZG9Ecm9wRG93bkxpc3Qoe1xuXHRcdFx0ZGF0YVRleHRGaWVsZDogJ2xhYmVsJyxcbiAgXHRcdFx0ZGF0YVZhbHVlRmllbGQ6ICduYW1lJyxcblx0XHRcdGNoYW5nZTogJC5wcm94eSh0aGlzLl9vbkdyb3VwQ2hhbmdlLCB0aGlzKVxuXHRcdH0pLmRhdGEoJ2tlbmRvRHJvcERvd25MaXN0Jyk7XG5cblx0XHQvLyBCdWlsZCBpbml0aWFsIGdyb3VwcyBsaXN0XG5cdFx0dGhpcy5fc2V0R3JvdXBzRGF0YVByb3ZpZGVyKG51bGwpO1xuXG5cdFx0Ly8gQ3JlYXRlIGludGVyZmFjZSBidWlsZGVyIGluc3RhbmNlc1xuXHRcdHRoaXMuX2ludGVyZmFjZUJ1aWxkZXIgPSBuZXcgQ29uZmlnSW50ZXJmYWNlQnVpbGRlcigpO1xuXHRcdHRoaXMuX3Jvb21DcmVhdGlvbklCdWlsZGVyID0gbmV3IENvbmZpZ0ludGVyZmFjZUJ1aWxkZXIoKTtcblxuXHRcdC8vIEFkZCBsaXN0ZW5lciB0byBzaG93IGxpbWl0IHdhcm5pbmcgdG9vbHRpcHNcblx0XHQkKCcjem5tLXBhbmVsYmFyJykua2VuZG9Ub29sdGlwKHtcblx0XHRcdGZpbHRlcjogJ2lbdGl0bGVdLmxpbWl0LXdhcm5pbmcnLFxuXHRcdFx0cG9zaXRpb246ICdyaWdodCcsXG5cdFx0XHR3aWR0aDogJzI1MHB4Jyxcblx0XHRcdGNvbnRlbnQ6IGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0cmV0dXJuIGA8ZGl2IGNsYXNzPVwiaGVscC10b29sdGlwXCI+JHtlLnRhcmdldC5kYXRhKCd0aXRsZScpfTwvZGl2PmA7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBST09NIENSRUFUSU9OIFBBTkVMXG5cblx0XHQvLyBBZGQgY2xpY2sgbGlzdGVuZXIgdG8gQ3JlYXRlICYgUmVtb3ZlIFJvb20gYnV0dG9uc1xuXHRcdCQoJyN6bm0tY3JlYXRlUm9vbUJ0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vbkNyZWF0ZVJvb21CdENsaWNrLCB0aGlzKSk7XG5cdFx0JCgnI3pubS1yZW1vdmVSb29tQnQnKS5vbignY2xpY2snLCAkLnByb3h5KHRoaXMuX29uUmVtb3ZlUm9vbUJ0Q2xpY2ssIHRoaXMpKTtcblxuXHRcdC8vIENvbmZpZ3VyZSByb29tIGNyZWF0aW9uIHBhbmVsXG5cdFx0JCgnI3pubS1jcmVhdGVSb29tTW9kYWwnKS5tb2RhbCh7XG5cdFx0XHRiYWNrZHJvcDogJ3N0YXRpYycsXG5cdFx0XHRrZXlib2FyZDogZmFsc2UsXG5cdFx0XHRzaG93OiBmYWxzZSxcblx0XHR9KTtcblxuXHRcdC8vIEFkZCBsaXN0ZW5lciBmb3Igcm9vbSBjcmVhdGlvbiBwYW5lbCdzIGNyZWF0ZSBidXR0b24gY2xpY2tcblx0XHQkKCcjem5tLXJvb21DcmVhdG9yQ3JlYXRlQnQnKS5vbignY2xpY2snLCAkLnByb3h5KHRoaXMuX29uUm9vbUNyZWF0b3JDcmVhdGVCdENsaWNrLCB0aGlzKSk7XG5cblx0XHQvLyBBZGQgbGlzdGVuZXIgZm9yIHJvb20gY3JlYXRpb24gcGFuZWwgaGlkZVxuXHRcdCQoJyN6bm0tY3JlYXRlUm9vbU1vZGFsJykub24oJ2hpZGRlbi5icy5tb2RhbCcsICQucHJveHkodGhpcy5fb25DcmVhdGVSb29tTW9kYWxIaWRkZW4sIHRoaXMpKTtcblxuXHRcdC8vIFJPT00gJiBVU0VSIEZJTFRFUklORyBQQU5FTFNcblxuXHRcdC8vIFNldHVwIG1hdGNoIGV4cHJlc3Npb24gYnVpbGRlciBwYW5lbCBmb3Igcm9vbXNcblx0XHR0aGlzLl9yb29tRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pubS1yb29tRmlsdGVyJyk7XG5cdFx0dGhpcy5fcm9vbUZpbHRlci50aXRsZSA9ICdSb29tIEZpbHRlciBFeHByZXNzaW9uIEJ1aWxkZXInO1xuXHRcdHRoaXMuX3Jvb21GaWx0ZXIucHJlZGVmaW5lZFZhck5hbWVzID0gUm9vbVByb3BlcnRpZXNEYXRhLnByb3BlcnRpZXNBcnJheTtcblx0XHQkKHRoaXMuX3Jvb21GaWx0ZXIpLm9uKHRoaXMuX3Jvb21GaWx0ZXIuRVhQUkVTU0lPTl9VUERBVEVEX0VWRU5ULCAkLnByb3h5KHRoaXMuX29uUm9vbUZpbHRlclVwZGF0ZWQsIHRoaXMpKTtcblxuXHRcdCQoJyN6bm0tZmlsdGVyUm9vbUJ0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vblNob3dSb29tRmlsdGVyQnRDbGljaywgdGhpcykpO1xuXHRcdCQoJyN6bm0tYXBwbHlSb29tRmlsdGVyQ0InKS5vbignY2hhbmdlJywgJC5wcm94eSh0aGlzLl9vbkFwcGx5QnRDaGFuZ2UsIHRoaXMpKTtcblxuXHRcdC8vIFNldHVwIG1hdGNoIGV4cHJlc3Npb24gYnVpbGRlciBwYW5lbCBmb3IgdXNlcnNcblx0XHR0aGlzLl91c2VyRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pubS11c2VyRmlsdGVyJyk7XG5cdFx0dGhpcy5fdXNlckZpbHRlci50aXRsZSA9ICdVc2VyIEZpbHRlciBFeHByZXNzaW9uIEJ1aWxkZXInO1xuXHRcdHRoaXMuX3VzZXJGaWx0ZXIucHJlZGVmaW5lZFZhck5hbWVzID0gVXNlclByb3BlcnRpZXNEYXRhLnByb3BlcnRpZXNBcnJheTtcblx0XHQkKHRoaXMuX3VzZXJGaWx0ZXIpLm9uKHRoaXMuX3VzZXJGaWx0ZXIuRVhQUkVTU0lPTl9VUERBVEVEX0VWRU5ULCAkLnByb3h5KHRoaXMuX29uVXNlckZpbHRlclVwZGF0ZWQsIHRoaXMpKTtcblxuXHRcdCQoJyN6bm0tZmlsdGVyVXNlckJ0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vblNob3dVc2VyRmlsdGVyQnRDbGljaywgdGhpcykpO1xuXHRcdCQoJyN6bm0tYXBwbHlVc2VyRmlsdGVyQ0InKS5vbignY2hhbmdlJywgJC5wcm94eSh0aGlzLl9vbkFwcGx5QnRDaGFuZ2UsIHRoaXMpKTtcblxuXHRcdC8vIE1BSU4gQ09OVFJPTFNcblxuXHRcdCQoJyN6bm0tbW9uaXRvckJ0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vbk1vbml0b3JTZWxlY3Rpb25CdENsaWNrLCB0aGlzKSk7XG5cdFx0JCgnI3pubS1zZW5kTWVzc2FnZUJ0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vblNlbmRBZG1pbk1zZ0J0Q2xpY2ssIHRoaXMpKTtcblx0XHQkKCcjem5tLW1lc3NhZ2VJbicpLm9uKCdrZXl1cCcsICQucHJveHkodGhpcy5fb25TZW5kQWRtaW5Nc2dJbktleVVwLCB0aGlzKSk7XG5cblx0XHQvLyBNT05JVE9SSU5HIENPTlRST0xTXG5cblx0XHQkKCcjem5tLWNsb3NlTW9uaXRvckJ0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vbkNsb3NlTW9uaXRvckJ0Q2xpY2ssIHRoaXMpKTtcblx0XHQkKCcjem5tLWVkaXRCdCcpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25FZGl0QnRDbGljaywgdGhpcykpO1xuXHRcdCQoJyN6bm0tY2FuY2VsQnQnKS5vbignY2xpY2snLCAkLnByb3h5KHRoaXMuX29uQ2FuY2VsQnRDbGljaywgdGhpcykpO1xuXHRcdCQoJyN6bm0tc3VibWl0QnQnKS5vbignY2xpY2snLCAkLnByb3h5KHRoaXMuX29uU3VibWl0QnRDbGljaywgdGhpcykpO1xuXG5cdFx0Ly8gSGlkZSBlZGl0IGNvbnRyb2xzXG5cdFx0JCgnI3pubS1lZGl0Q29udHJvbHMnKS5oaWRlKCk7XG5cblx0XHQvLyBaT05FIE1PTklUT1IgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHQvLyBTZXQgcmVmZXJlbmNlIHRvIHVzZXIgY291bnQgY2hhcnRcblx0XHR0aGlzLl91c2VyQ291bnRDaGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6bm0tdXNlckNvdW50Q2hhcnQnKTtcblxuXHRcdC8vIEluaXRpYWxpemUgdGltZSByYW5nZSBzbGlkZXJcblx0XHR0aGlzLl90aW1lU2xpZGVyID0gJCgnI3pubS10aW1lU2xpZGVyJykua2VuZG9SYW5nZVNsaWRlcih7XG5cdFx0XHRtaW46IC0yNCxcbiAgICAgICAgICAgIG1heDogMCxcbiAgICAgICAgICAgIHNtYWxsU3RlcDogMSxcbiAgICAgICAgICAgIGxhcmdlU3RlcDogMCxcblx0XHRcdGNoYW5nZTogJC5wcm94eSh0aGlzLl9vblRpbWVSYW5nZUNoYW5nZSwgdGhpcyksXG5cdFx0XHR0b29sdGlwOiB7XG5cdFx0XHRcdHRlbXBsYXRlOiBnZXRUaW1lUmFuZ2VUb29sdGlwVGVtcGxhdGUoKVxuXHRcdFx0fSxcblx0XHRcdGxlZnREcmFnSGFuZGxlVGl0bGU6ICdEcmFnJyxcblx0XHRcdHJpZ2h0RHJhZ0hhbmRsZVRpdGxlOiAnRHJhZycsXG5cdFx0fSkuZGF0YSgna2VuZG9SYW5nZVNsaWRlcicpO1xuXG5cdFx0Ly8gUmVzZXQgdGltZSByYW5nZSBvbiB1c2VyIGNvdW50IGNoYXJ0XG5cdFx0dGhpcy5fb25UaW1lUmFuZ2VDaGFuZ2UoKTtcblxuXHRcdC8vIEFkZCBidXR0b24gY2xpY2sgbGlzdGVuZXJzXG5cdFx0JCgnI3pubS1yZWxvYWRXb3Jkc0J0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vbldvcmRzUmVsb2FkQnRDbGljaywgdGhpcykpO1xuXHRcdCQoJyN6bm0tcmVsb2FkWm9uZUV4dEJ0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vblpvbmVFeHRSZWxvYWRCdENsaWNrLCB0aGlzKSk7XG5cblx0XHQvLyBJbml0aWFsaXplIGV4dGVuc2lvbiBsb2cgZ3JpZFxuXHRcdHRoaXMuX3pvbmVFeHRMb2dHcmlkID0gJCgnI3pubS16b25lRXh0TG9nR3JpZCcpLmtlbmRvR3JpZCh7XG5cdFx0XHRkYXRhU291cmNlOiBbXSxcblx0XHRcdHJlc2l6YWJsZTogdHJ1ZSxcblx0XHRcdHNlbGVjdGFibGU6IGZhbHNlLFxuXHRcdFx0bm9SZWNvcmRzOiB7XG5cdFx0XHRcdHRlbXBsYXRlOiAnTm8gZW50cmllcy4nXG5cdFx0XHR9LFxuXHRcdFx0Y29sdW1uczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZmllbGQ6ICd0aW1lc3RhbXAnLFxuXHRcdFx0XHRcdHRpdGxlOiAnVGltZXN0YW1wJyxcblx0XHRcdFx0XHR3aWR0aDogMTgwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRmaWVsZDogJ2xldmVsJyxcblx0XHRcdFx0XHR0aXRsZTogJ0xldmVsJyxcblx0XHRcdFx0XHR3aWR0aDogMTAwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRmaWVsZDogJ21lc3NhZ2UnLFxuXHRcdFx0XHRcdHRpdGxlOiAnTWVzc2FnZScsXG5cdFx0XHRcdFx0d2lkdGg6IDQwMFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdGRhdGFCb3VuZDogZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgdGhpcy5jb250ZW50LnNjcm9sbFRvcCh0aGlzLnRib2R5LmhlaWdodCgpKTsgLy8gU2Nyb2xsIHRvIGJvdHRvbVxuXHRcdFx0fVxuXHRcdH0pLmRhdGEoJ2tlbmRvR3JpZCcpO1xuXG5cdFx0Ly8gUk9PTSBNT05JVE9SIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBleHRlbnNpb24gbG9nIGdyaWRcblx0XHR0aGlzLl9yb29tRXh0TG9nR3JpZCA9ICQoJyN6bm0tcm9vbUV4dExvZ0dyaWQnKS5rZW5kb0dyaWQoe1xuXHRcdFx0ZGF0YVNvdXJjZTogW10sXG5cdFx0XHRyZXNpemFibGU6IHRydWUsXG5cdFx0XHRzZWxlY3RhYmxlOiBmYWxzZSxcblx0XHRcdG5vUmVjb3Jkczoge1xuXHRcdFx0XHR0ZW1wbGF0ZTogJ05vIGVudHJpZXMuJ1xuXHRcdFx0fSxcblx0XHRcdGNvbHVtbnM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGZpZWxkOiAndGltZXN0YW1wJyxcblx0XHRcdFx0XHR0aXRsZTogJ1RpbWVzdGFtcCcsXG5cdFx0XHRcdFx0d2lkdGg6IDE4MFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZmllbGQ6ICdsZXZlbCcsXG5cdFx0XHRcdFx0dGl0bGU6ICdMZXZlbCcsXG5cdFx0XHRcdFx0d2lkdGg6IDEwMFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZmllbGQ6ICdtZXNzYWdlJyxcblx0XHRcdFx0XHR0aXRsZTogJ01lc3NhZ2UnLFxuXHRcdFx0XHRcdHdpZHRoOiA0MDBcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRkYXRhQm91bmQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0ICAgIHRoaXMuY29udGVudC5zY3JvbGxUb3AodGhpcy50Ym9keS5oZWlnaHQoKSk7IC8vIFNjcm9sbCB0byBib3R0b21cblx0XHRcdH1cblx0XHR9KS5kYXRhKCdrZW5kb0dyaWQnKTtcblxuXHRcdC8vIFVTRVIgTU9OSVRPUiAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHRoaXMuX2tpY2tEZWxheUluID0gJCgnI3pubS1raWNrRGVsYXlOUycpLmtlbmRvTnVtZXJpY1RleHRCb3goe1xuXHRcdCAgICBtaW46IDAsXG5cdFx0ICAgIHN0ZXA6IDEsXG5cdFx0ICAgIGZvcm1hdDogJyMnLFxuXHRcdFx0cGxhY2Vob2xkZXI6ICdEZWxheSAocyknXG5cdFx0fSkuZGF0YSgna2VuZG9OdW1lcmljVGV4dEJveCcpO1xuXG5cdFx0dGhpcy5fYmFuTW9kZURkID0gJCgnI3pubS1iYW5Nb2RlREQnKS5rZW5kb0Ryb3BEb3duTGlzdCh7XG5cdFx0XHRkYXRhU291cmNlOiBbJ0lQJywgJ05BTUUnXSxcblx0XHRcdGF1dG9XaWR0aDogdHJ1ZSxcblx0XHRcdG9wdGlvbkxhYmVsOiB7XG5cdFx0XHRcdHRleHQ6ICdNb2RlJ1xuXHRcdFx0fSxcblx0XHRcdG9wdGlvbkxhYmVsVGVtcGxhdGU6ICc8c3BhbiBjbGFzcz1cInRleHQtbXV0ZWRcIj4jOnRleHQjPC9zcGFuPicsXG5cdFx0fSkuZGF0YSgna2VuZG9Ecm9wRG93bkxpc3QnKTtcblxuXHRcdHRoaXMuX2JhbkR1clVuaXREZCA9ICQoJyN6bm0tYmFuRHVyYXRpb25Vbml0REQnKS5rZW5kb0Ryb3BEb3duTGlzdCh7XG5cdFx0XHRhdXRvV2lkdGg6IHRydWUsXG5cdFx0fSkuZGF0YSgna2VuZG9Ecm9wRG93bkxpc3QnKTtcblxuXHRcdHRoaXMuX2JhbkR1cmF0aW9uSW4gPSAkKCcjem5tLWJhbkR1cmF0aW9uTlMnKS5rZW5kb051bWVyaWNUZXh0Qm94KHtcblx0XHQgICAgbWluOiAxLFxuXHRcdCAgICBzdGVwOiAxLFxuXHRcdCAgICBmb3JtYXQ6ICcjJyxcblx0XHRcdHBsYWNlaG9sZGVyOiAnRHVyYXRpb24nXG5cdFx0fSkuZGF0YSgna2VuZG9OdW1lcmljVGV4dEJveCcpO1xuXG5cdFx0dGhpcy5fYmFuRGVsYXlJbiA9ICQoJyN6bm0tYmFuRGVsYXlOUycpLmtlbmRvTnVtZXJpY1RleHRCb3goe1xuXHRcdCAgICBtaW46IDAsXG5cdFx0ICAgIHN0ZXA6IDEsXG5cdFx0ICAgIGZvcm1hdDogJyMnLFxuXHRcdFx0cGxhY2Vob2xkZXI6ICdEZWxheSAocyknXG5cdFx0fSkuZGF0YSgna2VuZG9OdW1lcmljVGV4dEJveCcpO1xuXG5cdFx0Ly8gQWRkIGJ1dHRvbiBjbGljayBsaXN0ZW5lcnNcblx0XHQkKCcjem5tLWRpc2Nvbm5lY3RCdCcpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25EaXNjb25uZWN0QnRDbGljaywgdGhpcykpO1xuXHRcdCQoJyN6bm0ta2lja0J0Jykub24oJ2NsaWNrJywgJC5wcm94eSh0aGlzLl9vbktpY2tCdENsaWNrLCB0aGlzKSk7XG5cdFx0JCgnI3pubS1iYW5CdCcpLm9uKCdjbGljaycsICQucHJveHkodGhpcy5fb25CYW5CdENsaWNrLCB0aGlzKSk7XG5cblx0XHQvLyBDaGFydHNcblxuXHRcdHRoaXMuX3BhY2tldFF1ZXVlQ2hhcnQgPSAkKCcjem5tLXBhY2tldFF1ZXVlQ2hhcnQnKS5rZW5kb0NoYXJ0KHtcblx0XHRcdHRyYW5zaXRpb25zOiBmYWxzZSxcblx0XHRcdGNoYXJ0QXJlYToge1xuXHRcdFx0XHRoZWlnaHQ6IDEwMFxuXHRcdFx0fSxcblx0ICAgICAgICBsZWdlbmQ6IHtcblx0ICAgICAgICAgICAgdmlzaWJsZTogZmFsc2Vcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHNlcmllc0RlZmF1bHRzOiB7XG5cdCAgICAgICAgICAgIHR5cGU6ICdiYXInLFxuXHQgICAgICAgICAgICBsYWJlbHM6IHtcblx0ICAgICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG5cdCAgICAgICAgICAgICAgICBmb3JtYXQ6ICd7MH0lJyxcblx0ICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICd0cmFuc3BhcmVudCcsXG5cdFx0XHRcdFx0cG9zaXRpb246ICdpbnNpZGVCYXNlJ1xuXHQgICAgICAgICAgICB9LFxuXHRcdFx0XHRnYXA6IC41LFxuXHRcdFx0XHRzcGFjaW5nOiAwLFxuXHRcdFx0XHRvdmVybGF5OiB7XG5cdFx0XHRcdFx0Z3JhZGllbnQ6ICdub25lJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRib3JkZXI6IHtcblx0XHRcdFx0XHR3aWR0aDogMFxuXHRcdFx0XHR9XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXJpZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6ICdQYWNrZXQgcXVldWUnLFxuXHRcdCAgICAgICAgICAgIGZpZWxkOiAndmFsdWUnLFxuXHRcdCAgICAgICAgICAgIGNhdGVnb3J5RmllbGQ6ICdjYXRlZ29yeScsXG5cdFx0XHRcdFx0Y29sb3I6ICcjRkI3RDMzJ1xuXHRcdCAgICAgICAgfVxuXHRcdFx0XSxcblx0ICAgICAgICB2YWx1ZUF4aXM6IHtcblx0ICAgICAgICAgICAgbGFiZWxzOiB7XG5cdCAgICAgICAgICAgICAgICBmb3JtYXQ6ICd7MH0lJ1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBsaW5lOiB7XG5cdCAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZVxuXHQgICAgICAgICAgICB9LFxuXHRcdFx0XHRtaW46IDAsXG5cdCAgICBcdFx0bWF4OiAxMDBcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGNhdGVnb3J5QXhpczoge1xuXHQgICAgICAgICAgICBtYWpvckdyaWRMaW5lczoge1xuXHQgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2Vcblx0ICAgICAgICAgICAgfSxcblx0XHRcdFx0bWFqb3JUaWNrczoge1xuXHRcdFx0XHRcdHZpc2libGU6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxhYmVsczoge1xuXHRcdFx0XHRcdHZpc2libGU6IGZhbHNlXG5cdFx0XHRcdH1cblx0ICAgICAgICB9LFxuXHRcdFx0dG9vbHRpcDoge1xuXHRcdFx0XHR2aXNpYmxlOiBmYWxzZSxcblx0ICAgICAgICB9XG5cdCAgICB9KS5kYXRhKCdrZW5kb0NoYXJ0Jyk7XG5cblx0XHR0aGlzLl9kcm9wcGVkTXNnQ2hhcnQgPSAkKCcjem5tLWRyb3BwZWRNc2dDaGFydCcpLmtlbmRvQ2hhcnQoe1xuXHRcdFx0dHJhbnNpdGlvbnM6IGZhbHNlLFxuXHRcdFx0Y2hhcnRBcmVhOiB7XG5cdFx0XHRcdGhlaWdodDogMTAwXG5cdFx0XHR9LFxuXHQgICAgICAgIGxlZ2VuZDoge1xuXHQgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZVxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2VyaWVzRGVmYXVsdHM6IHtcblx0ICAgICAgICAgICAgdHlwZTogJ2JhcicsXG5cdCAgICAgICAgICAgIGxhYmVsczoge1xuXHQgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcblx0ICAgICAgICAgICAgICAgIGZvcm1hdDogJ3swfScsXG5cdCAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLFxuXHRcdFx0XHRcdHBvc2l0aW9uOiAnaW5zaWRlQmFzZScsXG5cdCAgICAgICAgICAgIH0sXG5cdFx0XHRcdGdhcDogLjUsXG5cdFx0XHRcdHNwYWNpbmc6IDAsXG5cdFx0XHRcdG92ZXJsYXk6IHtcblx0XHRcdFx0XHRncmFkaWVudDogJ25vbmUnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJvcmRlcjoge1xuXHRcdFx0XHRcdHdpZHRoOiAwXG5cdFx0XHRcdH1cblx0ICAgICAgICB9LFxuXHQgICAgICAgIHNlcmllczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogJ0Ryb3BwZWQgbWVzc2FnZXMnLFxuXHRcdCAgICAgICAgICAgIGZpZWxkOiAndmFsdWUnLFxuXHRcdCAgICAgICAgICAgIGNhdGVnb3J5RmllbGQ6ICdjYXRlZ29yeScsXG5cdFx0XHRcdFx0Y29sb3I6ICcjRkI3RDMzJ1xuXHRcdCAgICAgICAgfVxuXHRcdFx0XSxcblx0ICAgICAgICB2YWx1ZUF4aXM6IHtcblx0ICAgICAgICAgICAgbGFiZWxzOiB7XG5cdCAgICAgICAgICAgICAgICBmb3JtYXQ6ICd7MH0nXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGxpbmU6IHtcblx0ICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG5cdCAgICAgICAgICAgIH0sXG5cdFx0XHRcdG1pbjogMCxcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGNhdGVnb3J5QXhpczoge1xuXHQgICAgICAgICAgICBtYWpvckdyaWRMaW5lczoge1xuXHQgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2Vcblx0ICAgICAgICAgICAgfSxcblx0XHRcdFx0bWFqb3JUaWNrczoge1xuXHRcdFx0XHRcdHZpc2libGU6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxhYmVsczoge1xuXHRcdFx0XHRcdHZpc2libGU6IGZhbHNlXG5cdFx0XHRcdH1cblx0ICAgICAgICB9LFxuXHRcdFx0dG9vbHRpcDoge1xuXHRcdFx0XHR2aXNpYmxlOiBmYWxzZSxcblx0ICAgICAgICB9XG5cdCAgICB9KS5kYXRhKCdrZW5kb0NoYXJ0Jyk7XG5cblx0XHR0aGlzLl93cml0dGVuRGF0YUNoYXJ0ID0gJCgnI3pubS13cml0dGVuRGF0YUNoYXJ0Jykua2VuZG9DaGFydCh7XG5cdFx0XHR0cmFuc2l0aW9uczogZmFsc2UsXG5cdFx0XHRjaGFydEFyZWE6IHtcblx0XHRcdFx0aGVpZ2h0OiAxMDBcblx0XHRcdH0sXG5cdCAgICAgICAgbGVnZW5kOiB7XG5cdCAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXJpZXNEZWZhdWx0czoge1xuXHQgICAgICAgICAgICB0eXBlOiAnYmFyJyxcblx0ICAgICAgICAgICAgbGFiZWxzOiB7XG5cdCAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICAgICAgZm9ybWF0OiAnezB9Jyxcblx0ICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICd0cmFuc3BhcmVudCcsXG5cdFx0XHRcdFx0cG9zaXRpb246ICdpbnNpZGVCYXNlJyxcblx0XHRcdFx0XHR0ZW1wbGF0ZTogZ2V0V1JCeXRlc0xhYmVsVGVtcGxhdGUoKSxcblx0ICAgICAgICAgICAgfSxcblx0XHRcdFx0Z2FwOiAuNSxcblx0XHRcdFx0c3BhY2luZzogMCxcblx0XHRcdFx0b3ZlcmxheToge1xuXHRcdFx0XHRcdGdyYWRpZW50OiAnbm9uZSdcblx0XHRcdFx0fSxcblx0XHRcdFx0Ym9yZGVyOiB7XG5cdFx0XHRcdFx0d2lkdGg6IDBcblx0XHRcdFx0fVxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2VyaWVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiAnV3JpdHRlbiBkYXRhJyxcblx0XHQgICAgICAgICAgICBmaWVsZDogJ3ZhbHVlJyxcblx0XHQgICAgICAgICAgICBjYXRlZ29yeUZpZWxkOiAnY2F0ZWdvcnknLFxuXHRcdFx0XHRcdGNvbG9yOiAnI0ZCN0QzMydcblx0XHQgICAgICAgIH1cblx0XHRcdF0sXG5cdCAgICAgICAgdmFsdWVBeGlzOiB7XG5cdCAgICAgICAgICAgIGxhYmVsczoge1xuXHQgICAgICAgICAgICAgICAgZm9ybWF0OiAnezB9J1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBsaW5lOiB7XG5cdCAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZVxuXHQgICAgICAgICAgICB9LFxuXHRcdFx0XHRtaW46IDAsXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBjYXRlZ29yeUF4aXM6IHtcblx0ICAgICAgICAgICAgbWFqb3JHcmlkTGluZXM6IHtcblx0ICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG5cdCAgICAgICAgICAgIH0sXG5cdFx0XHRcdG1ham9yVGlja3M6IHtcblx0XHRcdFx0XHR2aXNpYmxlOiBmYWxzZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRsYWJlbHM6IHtcblx0XHRcdFx0XHR2aXNpYmxlOiBmYWxzZVxuXHRcdFx0XHR9XG5cdCAgICAgICAgfSxcblx0XHRcdHRvb2x0aXA6IHtcblx0XHRcdFx0dmlzaWJsZTogZmFsc2UsXG5cdCAgICAgICAgfVxuXHQgICAgfSkuZGF0YSgna2VuZG9DaGFydCcpO1xuXG5cdFx0dGhpcy5fcmVhZERhdGFDaGFydCA9ICQoJyN6bm0tcmVhZERhdGFDaGFydCcpLmtlbmRvQ2hhcnQoe1xuXHRcdFx0dHJhbnNpdGlvbnM6IGZhbHNlLFxuXHRcdFx0Y2hhcnRBcmVhOiB7XG5cdFx0XHRcdGhlaWdodDogMTAwXG5cdFx0XHR9LFxuXHQgICAgICAgIGxlZ2VuZDoge1xuXHQgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZVxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2VyaWVzRGVmYXVsdHM6IHtcblx0ICAgICAgICAgICAgdHlwZTogJ2JhcicsXG5cdCAgICAgICAgICAgIGxhYmVsczoge1xuXHQgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcblx0ICAgICAgICAgICAgICAgIGZvcm1hdDogJ3swfScsXG5cdCAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLFxuXHRcdFx0XHRcdHBvc2l0aW9uOiAnaW5zaWRlQmFzZScsXG5cdFx0XHRcdFx0dGVtcGxhdGU6IGdldFdSQnl0ZXNMYWJlbFRlbXBsYXRlKCksXG5cdCAgICAgICAgICAgIH0sXG5cdFx0XHRcdGdhcDogLjUsXG5cdFx0XHRcdHNwYWNpbmc6IDAsXG5cdFx0XHRcdG92ZXJsYXk6IHtcblx0XHRcdFx0XHRncmFkaWVudDogJ25vbmUnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJvcmRlcjoge1xuXHRcdFx0XHRcdHdpZHRoOiAwXG5cdFx0XHRcdH1cblx0ICAgICAgICB9LFxuXHQgICAgICAgIHNlcmllczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogJ1JlYWQgZGF0YScsXG5cdFx0ICAgICAgICAgICAgZmllbGQ6ICd2YWx1ZScsXG5cdFx0ICAgICAgICAgICAgY2F0ZWdvcnlGaWVsZDogJ2NhdGVnb3J5Jyxcblx0XHRcdFx0XHRjb2xvcjogJyNGQjdEMzMnXG5cdFx0ICAgICAgICB9XG5cdFx0XHRdLFxuXHQgICAgICAgIHZhbHVlQXhpczoge1xuXHQgICAgICAgICAgICBsYWJlbHM6IHtcblx0ICAgICAgICAgICAgICAgIGZvcm1hdDogJ3swfSdcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgbGluZToge1xuXHQgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2Vcblx0ICAgICAgICAgICAgfSxcblx0XHRcdFx0bWluOiAwLFxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgY2F0ZWdvcnlBeGlzOiB7XG5cdCAgICAgICAgICAgIG1ham9yR3JpZExpbmVzOiB7XG5cdCAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZVxuXHQgICAgICAgICAgICB9LFxuXHRcdFx0XHRtYWpvclRpY2tzOiB7XG5cdFx0XHRcdFx0dmlzaWJsZTogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0bGFiZWxzOiB7XG5cdFx0XHRcdFx0dmlzaWJsZTogZmFsc2Vcblx0XHRcdFx0fVxuXHQgICAgICAgIH0sXG5cdFx0XHR0b29sdGlwOiB7XG5cdFx0XHRcdHZpc2libGU6IGZhbHNlLFxuXHQgICAgICAgIH1cblx0ICAgIH0pLmRhdGEoJ2tlbmRvQ2hhcnQnKTtcblxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0Ly8gQWRkIGxpc3RlbmVyIHRvIHJlZHJhdyBhbGwgY2hhcnRzIGluIGNhc2Ugb2Ygd2luZG93IHJlc2l6ZVxuXHRcdCQod2luZG93KS5vbigncmVzaXplJywgJC5wcm94eSh0aGlzLl9vbldpbmRvd1Jlc2l6ZSwgdGhpcykpO1xuXHRcdHRoaXMuX29uV2luZG93UmVzaXplKCk7IC8vIEFsc28gZG8gaXQgaW1tZWRpYXRlbHlcblxuXHRcdC8vIFJlcXVlc3QgZGF0YSB0byBzZXJ2ZXJcblx0XHR0aGlzLl9yZXF1ZXN0RGF0YSh0cnVlKTtcblx0fVxuXG5cdGRlc3Ryb3koKVxuXHR7XG5cdFx0Ly8gQ2FsbCBzdXBlciBtZXRob2Rcblx0XHRzdXBlci5kZXN0cm95KCk7XG5cblx0XHQvLyBDbG9zZSBtb25pdG9yaW5nXG5cdFx0dGhpcy5fb25DbG9zZU1vbml0b3JCdENsaWNrKCk7XG5cblx0XHQvLyBSZW1vdmUgZG91YmxlY2xpY2sgZXZlbnQgbGlzdGVuZXJzXG5cdFx0dGhpcy5fem9uZUxpc3RCb3gud3JhcHBlci5maW5kKCcuay1saXN0Jykub2ZmKCdkYmxjbGljaycpO1xuXHRcdHRoaXMuX3Jvb21MaXN0Qm94LndyYXBwZXIuZmluZCgnLmstbGlzdCcpLm9mZignZGJsY2xpY2snKTtcblx0XHR0aGlzLl91c2VyTGlzdEJveC53cmFwcGVyLmZpbmQoJy5rLWxpc3QnKS5vZmYoJ2RibGNsaWNrJyk7XG5cblx0XHQvLyBSZW1vdmUgb3RoZXIgZXZlbnQgbGlzdGVuZXJzXG5cdFx0JCgnI3pubS1jcmVhdGVSb29tQnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI3pubS1yZW1vdmVSb29tQnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI3pubS1yb29tQ3JlYXRvckNyZWF0ZUJ0Jykub2ZmKCdjbGljaycpO1xuXHRcdCQoJyN6bm0tZmlsdGVyUm9vbUJ0Jykub2ZmKCdjbGljaycpO1xuXHRcdCQoJyN6bm0tYXBwbHlSb29tRmlsdGVyQ0InKS5vZmYoJ2NoYW5nZScpO1xuXHRcdCQoJyN6bm0tZmlsdGVyVXNlckJ0Jykub2ZmKCdjbGljaycpO1xuXHRcdCQoJyN6bm0tYXBwbHlVc2VyRmlsdGVyQ0InKS5vZmYoJ2NoYW5nZScpO1xuXHRcdCQoJyN6bm0tbW9uaXRvckJ0Jykub2ZmKCdjbGljaycpO1xuXHRcdCQoJyN6bm0tc2VuZE1lc3NhZ2VCdCcpLm9mZignY2xpY2snKTtcblx0XHQkKCcjem5tLW1lc3NhZ2VJbicpLm9mZigna2V5dXAnKTtcblx0XHQkKCcjem5tLWNsb3NlTW9uaXRvckJ0Jykub2ZmKCdjbGljaycpO1xuXHRcdCQoJyN6bm0tZWRpdEJ0Jykub2ZmKCdjbGljaycpO1xuXHRcdCQoJyN6bm0tY2FuY2VsQnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI3pubS1zdWJtaXRCdCcpLm9mZignY2xpY2snKTtcblx0XHQkKHdpbmRvdykub2ZmKCdyZXNpemUnKTtcblx0XHQkKCcjem5tLXJlbG9hZFdvcmRzQnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI3pubS1yZWxvYWRab25lRXh0QnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI3pubS1kaXNjb25uZWN0QnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI3pubS1raWNrQnQnKS5vZmYoJ2NsaWNrJyk7XG5cdFx0JCgnI3pubS1iYW5CdCcpLm9mZignY2xpY2snKTtcblxuXHRcdC8vIENsZWFyIHJlcXVlc3Qgc2NoZWR1bGluZ1xuXHRcdGNsZWFyVGltZW91dCh0aGlzLl9yZXF1ZXN0VGltZXIpO1xuXG5cdFx0Ly8gSGlkZSByb29tIGNyZWF0aW9uIHBhbmVsXG5cdFx0JCgnI3pubS1jcmVhdGVSb29tTW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG5cdFx0Ly8gUmVtb3ZlIHJvb20gY3JlYXRpb24gcGFuZWwgbGlzdGVuZXJcblx0XHQkKCcjem5tLWNyZWF0ZVJvb21Nb2RhbCcpLm9mZignaGlkZGVuLmJzLm1vZGFsJyk7XG5cblx0XHQvLyBSZW1vdmUgZmlsdGVyIHBhbmVscyBsaXN0ZW5lcnNcblx0XHQkKHRoaXMuX3Jvb21GaWx0ZXIpLm9mZih0aGlzLl9yb29tRmlsdGVyLkVYUFJFU1NJT05fVVBEQVRFRF9FVkVOVCk7XG5cdFx0JCh0aGlzLl91c2VyRmlsdGVyKS5vZmYodGhpcy5fdXNlckZpbHRlci5FWFBSRVNTSU9OX1VQREFURURfRVZFTlQpO1xuXHR9XG5cblx0b25FeHRlbnNpb25Db21tYW5kKGNvbW1hbmQsIGRhdGEpXG5cdHtcblx0XHQvLyBEYXRhIHJlY2VpdmVkXG5cdFx0aWYgKGNvbW1hbmQgPT0gdGhpcy5SRVNQX0RBVEEpXG5cdFx0e1xuXHRcdFx0Ly8gV2UgaGF2ZSB0byBjaGVjayBpZiB0aGUgcmVzcG9uc2UgaWQgY29ycmVzcG9uZHMgdG8gdGhlIGN1cnJlbnQgcmVxdWVzdCBpZDtcblx0XHRcdC8vIGlmIG5vdCwgdGhlIHJlc3BvbnNlIGlzIGRpc2NhcmRlZCBhcyBpdCByZWZlcnMgdG8gYW4gb3V0ZGF0ZXQgcmVxdWVzdFxuXHRcdFx0Y29uc3QgcmVzcG9uc2VJZCA9IGRhdGEuZ2V0SW50KCdpZCcpO1xuXG5cdFx0XHRpZiAocmVzcG9uc2VJZCA9PSB0aGlzLl9jdXJyZW50UmVxdWVzdElkKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyAtLS0gWk9ORVMgTElTVCAtLS1cblx0XHRcdFx0aWYgKGRhdGEuY29udGFpbnNLZXkoJ3pvbmVzJykpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGlzLl9zZXRab25lc0RhdGFQcm92aWRlcihkYXRhLmdldFNGU0FycmF5KCd6b25lcycpKTtcblxuXHRcdFx0XHRcdGlmICh0aGlzLl9zZWxlY3RlZFpvbmUpXG5cdFx0XHRcdFx0XHR0aGlzLl9zZXRTY29wZUxhYmVsKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyAtLS0gUk9PTVMgTElTVCAtLS1cblx0XHRcdFx0aWYgKGRhdGEuY29udGFpbnNLZXkoJ3Jvb21zJykpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGlzLl9zZXRHcm91cHNEYXRhUHJvdmlkZXIoZGF0YS5nZXRVdGZTdHJpbmdBcnJheSgnZ3JvdXBzJykpO1xuXG5cdFx0XHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0XHRcdFx0Ly8gSWYgYSBudWxsIHJvb21zIGxpc3QgaXMgcmV0dXJuZWQsIHRoZSB6b25lIG11c3QgaGF2ZSBiZWVuIGRlbGV0ZWQhXG5cdFx0XHRcdFx0aWYgKCFkYXRhLmlzTnVsbCgncm9vbXMnKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0aGlzLl9zZXRSb29tc0RhdGFQcm92aWRlcihkYXRhLmdldFNGU0FycmF5KCdyb29tcycpKTtcblxuXHRcdFx0XHRcdFx0aWYgKCF0aGlzLl9zZWxlY3RlZFJvb20pXG5cdFx0XHRcdFx0XHRcdHRoaXMuX3NldFNjb3BlTGFiZWwoKTtcblxuXHRcdFx0XHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0XHRcdFx0XHQvLyBTaG93IHdhcm5pbmcgaWYgdGhlIHJvb21zIGxpc3QgZXhjZWVkcyB0aGUgc2VydmVyLXNpZGUgbGltaXRcblx0XHRcdFx0XHRcdGlmIChkYXRhLmNvbnRhaW5zS2V5KCdyU2l6ZScpKVxuXHRcdFx0XHRcdFx0XHR0aGlzLl9zaG93TGltaXRFeGNlZWRlZFdhcm5pbmcoJCgnI3pubS1yb29tTGlzdFdhcm5pbmcnKSwgJ1RoZSByZWNlaXZlZCBsaXN0IGlzIGluY29tcGxldGUsIGJlY2F1c2UgaXRzIHNpemUgKCcgKyBkYXRhLmdldEludCgnclNpemUnKSArICcgUm9vbXMpIGV4Y2VlZGVkIHRoaXMgY2xpZW50XFwncyBsaW1pdCBvZiAnICsgZGF0YS5nZXRJbnQoJ3JMaW1pdCcpICsgJzsgeW91IHNob3VsZCByZWZpbmUgeW91ciBzZWFyY2gnKTtcblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0dGhpcy5fc2hvd0xpbWl0RXhjZWVkZWRXYXJuaW5nKCQoJyN6bm0tcm9vbUxpc3RXYXJuaW5nJyksICcnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmICh0aGlzLl9hY3RpdmVQYW5lbFR5cGUgPT0gJ3Jvb20nKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9hY2NvcmRpb24uc2VsZWN0KCdbZGF0YS1pdGVtLXR5cGU9XCJ6b25lXCJdJyk7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2FjY29yZGlvbi5leHBhbmQoJ1tkYXRhLWl0ZW0tdHlwZT1cInpvbmVcIl0nKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5fb25ab25lU2VsZWN0ZWQoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5fb25FbnRpdGllc1BhbmVsQ2hhbmdlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gLS0tIFVTRVJTIExJU1QgLS0tXG5cdFx0XHRcdGlmIChkYXRhLmNvbnRhaW5zS2V5KCd1c2VycycpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly8gSWYgYSBudWxsIHVzZXJzIGxpc3QgaXMgcmV0dXJuZWQsIHRoZSByb29tIG11c3QgaGF2ZSBiZWVuIGRlbGV0ZWQhXG5cdFx0XHRcdFx0aWYgKCFkYXRhLmlzTnVsbCgndXNlcnMnKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0aGlzLl9zZXRVc2Vyc0RhdGFQcm92aWRlcihkYXRhLmdldFNGU0FycmF5KCd1c2VycycpKTtcblxuXHRcdFx0XHRcdFx0Ly8gU2hvdyB3YXJuaW5nIGlmIHRoZSB1c2VycyBsaXN0IGV4Y2VlZHMgdGhlIHNlcnZlci1zaWRlIGxpbWl0XG5cdFx0XHRcdFx0XHRpZiAoZGF0YS5jb250YWluc0tleSgndVNpemUnKSlcblx0XHRcdFx0XHRcdFx0dGhpcy5fc2hvd0xpbWl0RXhjZWVkZWRXYXJuaW5nKCQoJyN6bm0tdXNlckxpc3RXYXJuaW5nJyksICdUaGUgcmVjZWl2ZWQgbGlzdCBpcyBpbmNvbXBsZXRlLCBiZWNhdXNlIGl0cyBzaXplICgnICsgZGF0YS5nZXRJbnQoJ3VTaXplJykgKyAnIHVzZXJzKSBleGNlZWRzIHRoaXMgY2xpZW50XFwncyBsaW1pdCBvZiAnICsgZGF0YS5nZXRJbnQoJ3VMaW1pdCcpICsgJzsgeW91IHNob3VsZCByZWZpbmUgeW91ciBzZWFyY2gnKTtcblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0dGhpcy5fc2hvd0xpbWl0RXhjZWVkZWRXYXJuaW5nKCQoJyN6bm0tdXNlckxpc3RXYXJuaW5nJyksICcnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmICh0aGlzLl9hY3RpdmVQYW5lbFR5cGUgPT0gJ3VzZXInKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9hY2NvcmRpb24uc2VsZWN0KCdbZGF0YS1pdGVtLXR5cGU9XCJyb29tXCJdJyk7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2FjY29yZGlvbi5leHBhbmQoJ1tkYXRhLWl0ZW0tdHlwZT1cInJvb21cIl0nKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5fb25Sb29tU2VsZWN0ZWQoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5fb25FbnRpdGllc1BhbmVsQ2hhbmdlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gLS0tIE1PTklUT1JFRCBEQVRBIC0tLVxuXHRcdFx0XHRpZiAoZGF0YS5jb250YWluc0tleSgnbW9uaXRvcmVkJykpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zdCB6b25lID0gZGF0YS5nZXRTRlNPYmplY3QoJ21vbml0b3JlZCcpLmdldFV0ZlN0cmluZygnem9uZScpO1xuXHRcdFx0XHRcdGNvbnN0IHR5cGUgPSBkYXRhLmdldFNGU09iamVjdCgnbW9uaXRvcmVkJykuZ2V0VXRmU3RyaW5nKCd0eXBlJyk7XG5cdFx0XHRcdFx0Y29uc3QgbmFtZSA9IGRhdGEuZ2V0U0ZTT2JqZWN0KCdtb25pdG9yZWQnKS5nZXRVdGZTdHJpbmcoJ25hbWUnKTtcblxuXHRcdFx0XHRcdGlmICh6b25lID09IHRoaXMuX21vbml0b3JlZFpvbmUgJiYgdHlwZSA9PSB0aGlzLl9tb25pdG9yZWRUeXBlICYmIG5hbWUgPT0gdGhpcy5fbW9uaXRvcmVkTmFtZSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZiAoIWRhdGEuZ2V0U0ZTT2JqZWN0KCdtb25pdG9yZWQnKS5pc051bGwoJ3BhcmFtcycpKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRjb25zdCBwYXJhbXMgPSBkYXRhLmdldFNGU09iamVjdCgnbW9uaXRvcmVkJykuZ2V0U0ZTQXJyYXkoJ3BhcmFtcycpO1xuXG5cdFx0XHRcdFx0XHRcdHRoaXMuX3NldE1vbml0b3JpbmdJbnRlcmZhY2UoKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBCdWlsZCBpbnRlcmZhY2Vcblx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLl9pc0VkaXRpbmcpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9pbnRlcmZhY2VCdWlsZGVyLmJ1aWxkSW50ZXJmYWNlKHBhcmFtcywgYHpubS0ke3RoaXMuX21vbml0b3JlZFR5cGV9VGFiTmF2aWdhdG9yYCwgdHJ1ZSk7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuX3NraXBJbml0VGFicylcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHQkKGAjem5tLSR7dGhpcy5fbW9uaXRvcmVkVHlwZX1UYWJOYXZpZ2F0b3IgI3RhYnNgKS5zY3JvbGxpbmdUYWJzKHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ym9vdHN0cmFwVmVyc2lvbjogNCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsVG9UYWJFZGdlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbmFibGVTd2lwaW5nOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkaXNhYmxlU2Nyb2xsQXJyb3dzT25GdWxseVNjcm9sbGVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjc3NDbGFzc0xlZnRBcnJvdzogJ2ZhIGZhLWNoZXZyb24tbGVmdCcsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNzc0NsYXNzUmlnaHRBcnJvdzogJ2ZhIGZhLWNoZXZyb24tcmlnaHQnXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fc2tpcEluaXRUYWJzID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2V0IGZpcnN0IHRhYiBwYW5lbCBhcyBhY3RpdmVcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuX2ludGVyZmFjZUJ1aWxkZXIuYWN0aXZhdGVGaXJzdFRhYlBhbmVsKCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlZHJhdyB0aW1lIHJhbmdlIHNsaWRlciB0byBzZXQgaXRzIHdpZHRoXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl90aW1lU2xpZGVyLnJlc2l6ZSgpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgbGlzdGVuZXIgdG8gcmVkcmF3IGFsbCBjaGFydHMgb24gdGFiIGNoYW5nZVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gKHRvIHdvcmsgYXJvdW5kIGFuIGlzc3VlIHdpdGggdGhlIGNoYXJ0IHJlc2l6aW5nIHRvIGRlZmF1bHQgd2lkdGggd2hlbiBwYW5lIGlzIGhpZGRlbilcblx0XHRcdFx0XHRcdFx0XHRcdCQoJ2FbZGF0YS10b2dnbGU9XCJ0YWJcIl0nKS5vbignc2hvd24uYnMudGFiJywgJC5wcm94eSh0aGlzLl9vbldpbmRvd1Jlc2l6ZSwgdGhpcykpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIERpc2FibGUgY2F0ZWdvcmllc1xuXHRcdFx0XHRcdFx0XHRsZXQgZGlzYWJsZWRDYXQgPSAoZGF0YS5nZXRTRlNPYmplY3QoJ21vbml0b3JlZCcpLmNvbnRhaW5zS2V5KCdleGNsdWRlJykgPyBkYXRhLmdldFNGU09iamVjdCgnbW9uaXRvcmVkJykuZ2V0VXRmU3RyaW5nQXJyYXkoJ2V4Y2x1ZGUnKSA6IFtdKTtcblxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBjYXQgb2YgZGlzYWJsZWRDYXQpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgbmF2TGluayA9ICQoYCN6bm0tJHt0aGlzLl9tb25pdG9yZWRUeXBlfVRhYk5hdmlnYXRvciAjdGFicyAjdGFiLSR7Y2F0fWApO1xuXG5cdFx0XHRcdFx0XHRcdFx0bmF2TGluay5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdFx0XHRuYXZMaW5rLmF0dHIoJ3RhYmluZGV4JywgLTEpO1xuXHRcdFx0XHRcdFx0XHRcdG5hdkxpbmsuYXR0cignYXJpYS1kaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuX21vbml0b3JlZFR5cGUgPT0gdGhpcy5NT05JVE9SRURfVFlQRV9aT05FKVxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX3Nob3dab25lVHJhZmZpY0RhdGEoZGF0YS5nZXRTRlNPYmplY3QoJ21vbml0b3JlZCcpLmdldFNGU09iamVjdCgndHJhZmZpYycpKTtcblxuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5fbW9uaXRvcmVkVHlwZSA9PSB0aGlzLk1PTklUT1JFRF9UWVBFX1VTRVIpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHQvLyBTdGF0c1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX3Nob3dVc2VyU3RhdHNEYXRhKGRhdGEuZ2V0U0ZTT2JqZWN0KCdtb25pdG9yZWQnKS5nZXRTRlNPYmplY3QoJ3N0YXRzJykpO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gTlBDXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXNOcGMgPSBkYXRhLmdldFNGU09iamVjdCgnbW9uaXRvcmVkJykuZ2V0Qm9vbCgnbnBjJyk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBEaXNhYmxlIGRpc2Nvbm5lY3QsIGtpY2sgYW5kIGJhbiBidXR0b25zXG5cdFx0XHRcdFx0XHRcdFx0JCgnI3pubS1kaXNjb25uZWN0QnQnKS5hdHRyKCdkaXNhYmxlZCcsIGlzTnBjKTtcblx0XHRcdFx0XHRcdFx0XHQkKCcjem5tLWtpY2tCdCcpLmF0dHIoJ2Rpc2FibGVkJywgaXNOcGMpO1xuXHRcdFx0XHRcdFx0XHRcdCQoJyN6bm0tYmFuQnQnKS5hdHRyKCdkaXNhYmxlZCcsIGlzTnBjKTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEdlby1sb2NhdGlvblxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGdlb0xvY0RhdGEgPSBkYXRhLmdldFNGU09iamVjdCgnbW9uaXRvcmVkJykuZ2V0U0ZTT2JqZWN0KCdnZW9Mb2MnKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9zZXRHZW9Mb2NhdGlvblVJKGdlb0xvY0RhdGEpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdC8vIFNob3cgYWxlcnRcblx0XHRcdFx0XHRcdFx0dGhpcy5zaGVsbEN0cmwuc2hvd1NpbXBsZUFsZXJ0KGBUaGUgJHtjYXBpdGFsaXplRmlyc3QodGhpcy5fbW9uaXRvcmVkVHlwZSl9IGJlaW5nIG1vbml0b3JlZCBpcyBubyBtb3JlIGF2YWlsYWJsZSBvbiB0aGUgc2VydmVyLCBwbGVhc2Ugc2VsZWN0IGFub3RoZXIgb25lLmAsIGZhbHNlKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBDYW5jZWwgbW9uaXRvcmluZ1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9vbkNsb3NlTW9uaXRvckJ0Q2xpY2soKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRlbHNlIGlmIChjb21tYW5kID09IHRoaXMuUkVTUF9VUERBVEVfRVJST1IpXG5cdFx0e1xuXHRcdFx0aWYgKGRhdGEuZ2V0VXRmU3RyaW5nKCd6b25lJykgPT0gdGhpcy5fbW9uaXRvcmVkWm9uZVxuXHRcdFx0XHQmJiBkYXRhLmdldFV0ZlN0cmluZygndHlwZScpID09ICB0aGlzLl9tb25pdG9yZWRUeXBlXG5cdFx0XHRcdCYmIGRhdGEuZ2V0VXRmU3RyaW5nKCduYW1lJykgPT0gIHRoaXMuX21vbml0b3JlZE5hbWUpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIFNob3cgYWxlcnRcblx0XHRcdFx0dGhpcy5zaGVsbEN0cmwuc2hvd1NpbXBsZUFsZXJ0KGBVbmFibGUgdG8gdXBkYXRlICR7Y2FwaXRhbGl6ZUZpcnN0KHRoaXMuX21vbml0b3JlZFR5cGUpfSBzZXR0aW5nczsgdGhlIGZvbGxvd2luZyBlcnJvciB3YXMgcmVwb3J0ZWQ6ICR7ZGF0YS5nZXRVdGZTdHJpbmcoJ21lc3NhZ2UnKX0uYCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZWxzZSBpZiAoY29tbWFuZCA9PSB0aGlzLlJFU1BfUk9PTV9DT05GSUcpXG5cdFx0e1xuXHRcdFx0Ly8gUmUtZW5hYmxlIENyZWF0ZSBidXR0b25cblx0XHRcdCQoJyN6bm0tY3JlYXRlUm9vbUJ0JykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG5cblx0XHRcdC8vIFNob3cgUm9vbSBjcmVhdGlvbiBwYW5lbFxuXHRcdFx0dGhpcy5fc2hvd1Jvb21DcmVhdGlvblBhbmVsKGRhdGEuZ2V0U0ZTQXJyYXkoJ3NldHRpbmdzJykpO1xuXHRcdH1cblxuXHRcdGVsc2UgaWYgKGNvbW1hbmQgPT0gdGhpcy5SRVNQX1JPT01fQ09ORklHX0VSUk9SKVxuXHRcdHtcblx0XHRcdC8vIFJlLWVuYWJsZSBDcmVhdGUgYnV0dG9uXG5cdFx0XHQkKCcjem5tLWNyZWF0ZVJvb21CdCcpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXG5cdFx0XHQvLyBTaG93IGFuIGFsZXJ0XG5cdFx0XHR0aGlzLnNoZWxsQ3RybC5zaG93U2ltcGxlQWxlcnQoZGF0YS5nZXRVdGZTdHJpbmcoJ2Vycm9yJykpO1xuXHRcdH1cblxuXHRcdGVsc2UgaWYgKGNvbW1hbmQgPT0gdGhpcy5SRVNQX1JPT01fQ1JFQVRFRClcblx0XHR7XG5cdFx0XHQvLyBSZS1lbmFibGUgcm9vbSBjcmVhdGlvbiBwYW5lbFxuXHRcdFx0dGhpcy5fZW5hYmxlQ3JlYXRlUm9vbVBhbmVsKHRydWUpO1xuXG5cdFx0XHQvLyBIaWRlIHJvb20gY3JlYXRpb24gcGFuZWxcblx0XHRcdCQoJyN6bm0tY3JlYXRlUm9vbU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcblxuXHRcdFx0Ly8gVXBkYXRlIHJvb21zIGxpc3Rcblx0XHRcdHRoaXMuX3JlcXVlc3REYXRhKHRydWUpO1xuXHRcdH1cblxuXHRcdGVsc2UgaWYgKGNvbW1hbmQgPT0gdGhpcy5SRVNQX1JPT01fQ1JFQVRJT05fRVJST1IpXG5cdFx0e1xuXHRcdFx0Ly8gRGlzcGxheSBlcnJvciBtZXNzYWdlXG5cdFx0XHQkKCcjem5tLWNyZWF0ZVJvb21FcnJvcicpLnRleHQoZGF0YS5nZXRVdGZTdHJpbmcoJ2Vycm9yJykpO1xuXHRcdFx0JCgnI3pubS1jcmVhdGVSb29tRXJyb3InKS5zaG93KCk7XG5cblx0XHRcdC8vIFJlLWVuYWJsZSByb29tIGNyZWF0aW9uIHBhbmVsXG5cdFx0XHR0aGlzLl9lbmFibGVDcmVhdGVSb29tUGFuZWwodHJ1ZSk7XG5cdFx0fVxuXG5cdFx0Ly8gVW5leHBlY3RlZCBlcnJvciByZWNlaXZlZFxuXHRcdC8vIFRoaXMgZXJyb3IgaXMgcmV0dXJuZWQgaW4gY2FzZSBzb21ldGhpbmcgd2VudCB3cm9uZyB3aGVuIHJldHJpZXZpbmcgdGhlIG1vbml0b3JlZCBlbnRpdHkgcGFyYW1ldGVycyxcblx0XHQvLyBzbyB3ZSBoYXZlIHRvIHN0b3AgcmVxdWVzdGluZyB0aGUgc2FtZSBlbnRpdHlcblx0XHRlbHNlIGlmIChjb21tYW5kID09IHRoaXMuUkVTUF9VTkVYUEVDVEVEX0VSUk9SKVxuXHRcdHtcblx0XHRcdC8vIENhbmNlbCBtb25pdG9yaW5nXG5cdFx0XHR0aGlzLl9vbkNsb3NlTW9uaXRvckJ0Q2xpY2soKTtcblxuXHRcdFx0Ly8gU2hvdyBhbiBhbGVydFxuXHRcdFx0dGhpcy5zaGVsbEN0cmwuc2hvd1NpbXBsZUFsZXJ0KGRhdGEuZ2V0VXRmU3RyaW5nKCdlcnJvcicpKTtcblx0XHR9XG5cblx0XHQvLyBFeHRlbnNpb24gKFpvbmUgb3IgUm9vbSkgbG9nIG1lc3NhZ2VzIHJlY2VpdmVkXG5cdFx0ZWxzZSBpZiAoY29tbWFuZCA9PSB0aGlzLlJFU1BfTE9HX01FU1NBR0VTKVxuXHRcdHtcblx0XHRcdGxldCBsb2dFbnRyaWVzID0gZGF0YS5nZXRTRlNBcnJheSgnZW50cmllcycpO1xuXG5cdFx0XHRmb3IgKGxldCBlID0gMDsgZSA8IGxvZ0VudHJpZXMuc2l6ZSgpOyBlKyspXG5cdFx0XHR7XG5cdFx0XHRcdGxldCBsb2dFbnRyeSA9IGxvZ0VudHJpZXMuZ2V0U0ZTT2JqZWN0KGUpO1xuXG5cdFx0XHRcdGNvbnN0IGxvZ1pvbmUgPSBsb2dFbnRyeS5nZXRVdGZTdHJpbmcoJ3pvbmUnKTtcblx0XHRcdFx0Y29uc3QgbG9nUm9vbSA9IGxvZ0VudHJ5LmdldFV0ZlN0cmluZygncm9vbScpO1xuXG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoZSB6b25lIGlzIGN1cnJlbnRseSBtb25pdG9yZWRcblx0XHRcdFx0aWYgKHRoaXMuX21vbml0b3JlZFpvbmUgPT0gbG9nWm9uZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKGxvZ0VudHJ5LmdldExvbmcoJ3RpbWUnKSlcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhuZXcgRGF0ZShsb2dFbnRyeS5nZXRMb25nKCd0aW1lJykpXG5cblx0XHRcdFx0XHRsZXQgZWxlID0ge1xuXHRcdFx0XHRcdFx0dGltZXN0YW1wOiBrZW5kby50b1N0cmluZyhuZXcgRGF0ZShsb2dFbnRyeS5nZXRMb25nKCd0aW1lJykpLCAnZGQvTU0veXl5eSBISDptbTpzcycpLFxuXHRcdFx0XHRcdFx0bGV2ZWw6IGxvZ0VudHJ5LmdldFV0ZlN0cmluZygnbGV2ZWwnKSxcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IGxvZ0VudHJ5LmdldFV0ZlN0cmluZygnbXNnJyksXG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdGlmICh0aGlzLl9tb25pdG9yZWRUeXBlID09IHRoaXMuTU9OSVRPUkVEX1RZUEVfWk9ORSAmJiBsb2dSb29tID09ICcnKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIEFkZCB0byB6b25lIGV4dGVuc2lvbiBsb2dcblx0XHRcdFx0XHRcdHRoaXMuX2FkZExvZ0VudHJ5VG9HcmlkKHRoaXMuX3pvbmVFeHRMb2dHcmlkLCBlbGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuX21vbml0b3JlZFR5cGUgPT0gdGhpcy5NT05JVE9SRURfVFlQRV9ST09NICYmIHRoaXMuX21vbml0b3JlZE5hbWUgPT0gbG9nUm9vbSlcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Ly8gQWRkIHRvIHJvb20gZXh0ZW5zaW9uIGxvZ1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9hZGRMb2dFbnRyeVRvR3JpZCh0aGlzLl9yb29tRXh0TG9nR3JpZCwgZWxlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBVSSBFVkVOVCBMSVNURU5FUlNcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRfb25VcGRhdGVJbnRlcnZhbENoYW5nZSgpXG5cdHtcblx0XHQvLyBSZXF1ZXN0IGRhdGEgdG8gc2VydmVyXG5cdFx0dGhpcy5fcmVxdWVzdERhdGEoZmFsc2UpO1xuXHR9XG5cblx0X29uRW50aXRpZXNQYW5lbENoYW5nZSgpXG5cdHtcblx0XHQvLyBTZXQgbWFpbiBjb250cm9scyBzdGF0ZVxuXHRcdHRoaXMuX3NldE1haW5Db250cm9sc0VuYWJsZWQoKTtcblxuXHRcdC8vIFJlcXVlc3QgZGF0YSB0byBzZXJ2ZXJcblx0XHR0aGlzLl9yZXF1ZXN0RGF0YSh0cnVlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgdGhlIFNjb3BlIGxhYmVsIGluIHRoZSBSb29tcyBwYW5lbC5cblx0ICovXG5cdF9vblpvbmVTZWxlY3RlZCgpXG5cdHtcblx0XHQvLyBDbGVhciBSb29tIGFuZCBVc2VyIGxpc3RzXG5cdFx0dGhpcy5fcmVzZXRSb29tTGlzdCgpO1xuXHRcdHRoaXMuX3Jlc2V0VXNlckxpc3QoKTtcblxuXHRcdC8vIFNldCBzY29wZSBsYWJlbFxuXHRcdHRoaXMuX3NldFNjb3BlTGFiZWwoKTtcblxuXHRcdC8vIEVuYWJsZS9kaXNhYmxlIFJvb20gYW5kIFVzZXIgdG9vbHNcblx0XHRjb25zdCBkaXNhYmxlZCA9IHRoaXMuX3NlbGVjdGVkWm9uZSA9PSB1bmRlZmluZWQ7XG5cblx0XHQvLyAoTk9URTogdGhpcyBlbmFibGVzL2Rpc2FibGVzIHdob2xlIGZpZWxkc2V0OyB0aGlzIGRvZXNuJ3QgYWZmZWN0IEtlbmRvIERyb3BEb3duLCBzbyB3ZSBoYXZlIHRvIGRvIGl0IG1hbnVhbGx5KVxuXHRcdCQoJyNyb29tVG9vbHMnKS5hdHRyKCdkaXNhYmxlZCcsIGRpc2FibGVkKTtcblx0XHQkKCcjdXNlclRvb2xzJykuYXR0cignZGlzYWJsZWQnLCBkaXNhYmxlZCk7XG5cblx0XHR0aGlzLl9ncm91cHNEcm9wRG93bi5lbmFibGUoIWRpc2FibGVkKTtcblxuXHRcdC8vIFNldCBtYWluIGNvbnRyb2xzIHN0YXRlXG5cdFx0dGhpcy5fc2V0TWFpbkNvbnRyb2xzRW5hYmxlZCgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0aGUgU2NvcGUgbGFiZWwgaW4gdGhlIFVzZXJzIHBhbmVsLlxuXHQgKi9cblx0X29uUm9vbVNlbGVjdGVkKClcblx0e1xuXHRcdC8vIENsZWFyIFVzZXIgbGlzdFxuXHRcdHRoaXMuX3Jlc2V0VXNlckxpc3QoKTtcblxuXHRcdC8vIFNldCBzY29wZSBsYWJlbFxuXHRcdHRoaXMuX3NldFNjb3BlTGFiZWwoKTtcblxuXHRcdC8vIEVuYWJsZSBSZW1vdmUgYnV0dG9uXG5cdFx0JCgnI3pubS1yZW1vdmVSb29tQnQnKS5hdHRyKCdkaXNhYmxlZCcsIHRoaXMuX3NlbGVjdGVkUm9vbSA9PSB1bmRlZmluZWQpO1xuXG5cdFx0Ly8gU2V0IG1haW4gY29udHJvbHMgc3RhdGVcblx0XHR0aGlzLl9zZXRNYWluQ29udHJvbHNFbmFibGVkKCk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIHRoZSBzY29wZSBsYWJlbCBpbiB0aGUgVXNlcnMgcGFuZWwuXG5cdCAqL1xuXHRfb25Hcm91cENoYW5nZSgpXG5cdHtcblx0XHQvLyBDbGVhciBSb29tIGFuZCBVc2VyIGxpc3RzXG5cdFx0dGhpcy5fcmVzZXRSb29tTGlzdCgpO1xuXHRcdHRoaXMuX3Jlc2V0VXNlckxpc3QoKTtcblxuXHRcdC8vIFNldCBzY29wZSBsYWJlbFxuXHRcdHRoaXMuX3NldFNjb3BlTGFiZWwoKTtcblxuXHRcdC8vIFJlcXVlc3QgZGF0YSB0byBzZXJ2ZXJcblx0XHR0aGlzLl9yZXF1ZXN0RGF0YSh0cnVlKTtcblxuXHRcdC8vIFNldCBtYWluIGNvbnRyb2xzIHN0YXRlXG5cdFx0dGhpcy5fc2V0TWFpbkNvbnRyb2xzRW5hYmxlZCgpO1xuXHR9XG5cblx0X29uVXNlclNlbGVjdGVkKClcblx0e1xuXHRcdC8vIFNldCBtYWluIGNvbnRyb2xzIHN0YXRlXG5cdFx0dGhpcy5fc2V0TWFpbkNvbnRyb2xzRW5hYmxlZCgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNob3cgcm9vbSBjcmVhdGlvbiBwYW5lbC5cblx0ICovXG5cdF9vbkNyZWF0ZVJvb21CdENsaWNrKClcblx0e1xuXHRcdC8vIERpc2FibGUgQ3JlYXRlIGJ1dHRvblxuXHRcdCQoJyN6bm0tY3JlYXRlUm9vbUJ0JykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcblxuXHRcdC8vIFJlcXVlc3QgZGVmYXVsdCByb29tIHNldHRpbmdzIHRvIGV4dGVuc2lvblxuXHRcdHRoaXMuc2VuZEV4dGVuc2lvblJlcXVlc3QodGhpcy5SRVFfR0VUX1JPT01fQ09ORklHKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgZXhpc3Rpbmcgcm9vbS5cblx0ICovXG5cdF9vblJlbW92ZVJvb21CdENsaWNrKClcblx0e1xuXHRcdHRoaXMuc2hlbGxDdHJsLnNob3dDb25maXJtV2FybmluZygnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlbW92ZSB0aGUgc2VsZWN0ZWQgUm9vbT8nLCAkLnByb3h5KHRoaXMuX29uUmVtb3ZlUmVtb3ZlQ29uZmlybSwgdGhpcykpO1xuXHR9XG5cblx0X29uUmVtb3ZlUmVtb3ZlQ29uZmlybSgpXG5cdHtcblx0XHRjb25zdCBzZWxlY3RlZFpvbmUgPSB0aGlzLl96b25lTGlzdEJveC5kYXRhSXRlbSh0aGlzLl96b25lTGlzdEJveC5zZWxlY3QoKSk7XG5cdFx0bGV0IHNlbGVjdGVkUm9vbSA9IHRoaXMuX3Jvb21MaXN0Qm94LmRhdGFJdGVtKHRoaXMuX3Jvb21MaXN0Qm94LnNlbGVjdCgpKTtcblxuXHRcdGlmIChzZWxlY3RlZFJvb20pXG5cdFx0e1xuXHRcdFx0Ly8gU2VuZCByZXF1ZXN0IHRvIHNlcnZlclxuXHRcdFx0bGV0IHBhcmFtcyA9IG5ldyBTRlMyWC5TRlNPYmplY3QoKTtcblx0XHRcdHBhcmFtcy5wdXRVdGZTdHJpbmcoJ3pvbmUnLCBzZWxlY3RlZFpvbmUubmFtZSk7XG5cdFx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCdyb29tJywgc2VsZWN0ZWRSb29tLm5hbWUpO1xuXG5cdFx0XHR0aGlzLnNlbmRFeHRlbnNpb25SZXF1ZXN0KHRoaXMuUkVRX1JFTU9WRV9ST09NLCBwYXJhbXMpO1xuXG5cdFx0XHQvLyBSZXF1ZXN0IGRhdGEgdG8gc2VydmVyIHRvIHVwZGF0ZSB0aGUgcm9vbXMgbGlzdFxuXHRcdFx0dGhpcy5fcmVxdWVzdERhdGEodHJ1ZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSBjb250ZW50IG9mIHJvb20gY3JlYXRpb24gcGFuZWwuXG5cdCAqL1xuXHRfb25DcmVhdGVSb29tTW9kYWxIaWRkZW4oZSlcblx0e1xuXHRcdC8vIElmIGEgbmVzdGVkIG1vZGFsIGlzIG9wZW5lZCwgaXRzIGNsb3NpbmcgY2F1c2VzIHRoZSBwYXJlbnQgbW9kYWwgdG8gYmUgY2xvc2VkIHRvbyAoQm9vdHN0cmFwIGRvZXNuJ3Qgc3VwcG9ydCBuZXN0ZWQgbW9kYWxzKVxuXHRcdC8vIEFzIGEgd29ya2Fyb3VuZCwgaGVyZSB3ZSByZXNldCB0aGUgY3NzIGNsYXNzICdtb2RhbC1vcGVuJyB3aGVuIHRoZSBuZXN0ZWQgbW9kYWwgaXMgY2xvc2VkIGFuZCBza2lwIGV2ZXJ5dGhpbmcgZWxzZVxuXHRcdC8vIEluIGFkZGl0aW9uIHdlIGhhZCB0byB1c2UgYSBjdXN0b20gbGlzdGVuZXIgb24gdGhlIGNsb3NlL2NhbmNlbCBidXR0b25zIG9mIHRoZSBuZXN0ZWQgbW9kYWwgKHNlZSBjb25maWctZ3JpZC5qcyBmb3IgZXhhbXBsZSlcblx0XHRpZiAoZS50YXJnZXQgIT09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd6bm0tY3JlYXRlUm9vbU1vZGFsJykpXG5cdFx0e1xuXHRcdFx0JCgnYm9keScpLmFkZENsYXNzKCdtb2RhbC1vcGVuJylcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXN0cm95IHNjcm9sbGluZyB0YWJzIGluIHJvb20gY3JlYXRpb24gcGFuZWxcblx0XHQkKCcjem5tLXJvb21DcmVhdG9yVGFiTmF2ICN0YWJzJykuc2Nyb2xsaW5nVGFicygnZGVzdHJveScpO1xuXG5cdFx0Ly8gUmVtb3ZlIGFsbCB0YWIgbmF2aWdhdG9yIGNvbnRlbnRcblx0XHR0aGlzLl9yb29tQ3JlYXRpb25JQnVpbGRlci5kZXN0cm95SW50ZXJmYWNlKCk7XG5cblx0XHQvLyBSZW1vdmUgbGlzdGVuZXIgZm9yIGN1c3RvbSBhY3Rpb25zIHRyaWdnZXJlZCBieSBjb25maWd1cmF0aW9uIGludGVyZmFjZVxuXHRcdCQoJyN6bm0tcm9vbUNyZWF0b3JUYWJOYXYnKS5vZmYoJ3ZhbHVlLXNldCcpO1xuXG5cdFx0Ly8gUmVzZXQgYW5kIGhpZGUgZXJyb3IgbWVzc2FnZVxuXHRcdHRoaXMuX3Jlc2V0Um9vbUNyZWF0aW9uRXJyb3IoKTtcblx0fVxuXG5cdF9vbkNvbmZpZ1ZhbHVlU2V0KGUpIC8vIFNBTUUgTUVUSE9EIERVUExJQ0FURUQgSU4gem9uZS1jb25maWd1cmF0b3IuanNcblx0e1xuXHRcdGNvbnN0IGNvbmZpZ1BhcmFtID0gZS50YXJnZXQuZGF0YTtcblxuXHRcdC8vIEhhbmRsZSBleHRlbnNpb24gbmFtZS90eXBlIGRyb3Bkb3ducyB1cGRhdGUgYW5kIHVwZGF0ZSB0aGUgbWFpbiBjbGFzcyBkcm9wZG93biBkYXRhc291cmNlIGFjY29yZGluZ2x5XG5cdFx0aWYgKGNvbmZpZ1BhcmFtLm5hbWUgPT0gJ2V4dGVuc2lvbi5uYW1lJyB8fCBjb25maWdQYXJhbS5uYW1lID09ICdleHRlbnNpb24udHlwZScgfHwgY29uZmlnUGFyYW0ubmFtZSA9PSAnZXh0ZW5zaW9uLmZpbHRlckNsYXNzJylcblx0XHR7XG5cdFx0XHQvLyBBbGwgaW52b2x2ZWQgQ29uZmlnRm9ybUl0ZW1zIG11c3QgYmUgYXZhaWxhYmxlIGFuZCBpbml0aWFsaXplZCB0byBwcm9jZWVkXG5cdFx0XHRjb25zdCBuYW1lRm9ybUl0ZW0gPSB0aGlzLl9yb29tQ3JlYXRpb25JQnVpbGRlci5nZXRDb25maWdGb3JtSXRlbSgnZXh0ZW5zaW9uLm5hbWUnKTtcblx0XHRcdGNvbnN0IHR5cGVGb3JtSXRlbSA9IHRoaXMuX3Jvb21DcmVhdGlvbklCdWlsZGVyLmdldENvbmZpZ0Zvcm1JdGVtKCdleHRlbnNpb24udHlwZScpO1xuXHRcdFx0Y29uc3QgY2xhc3NGb3JtSXRlbSA9IHRoaXMuX3Jvb21DcmVhdGlvbklCdWlsZGVyLmdldENvbmZpZ0Zvcm1JdGVtKCdleHRlbnNpb24uZmlsZScpO1xuXHRcdFx0Y29uc3QgZmlsdGVyRm9ybUl0ZW0gPSB0aGlzLl9yb29tQ3JlYXRpb25JQnVpbGRlci5nZXRDb25maWdGb3JtSXRlbSgnZXh0ZW5zaW9uLmZpbHRlckNsYXNzJyk7XG5cblx0XHRcdGlmIChuYW1lRm9ybUl0ZW0gIT0gbnVsbCAmJiB0eXBlRm9ybUl0ZW0gIT0gbnVsbCAmJiBjbGFzc0Zvcm1JdGVtICE9IG51bGwgJiYgZmlsdGVyRm9ybUl0ZW0gIT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0Y29uc3Qgc291cmNlID0gbmFtZUZvcm1JdGVtLmRhdGE7XG5cdFx0XHRcdGxldCBjbGFzc2VzTGlzdCA9IFtdO1xuXG5cdFx0XHRcdGxldCBkYXRhID0gc291cmNlLnRyaWdnZXJEYXRhO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuc2l6ZSgpOyBpKyspXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsZXQgZXh0ID0gZGF0YS5nZXRTRlNPYmplY3QoaSk7XG5cblx0XHRcdFx0XHRpZiAoZXh0LmdldFV0ZlN0cmluZygnbmFtZScpID09IG5hbWVGb3JtSXRlbS5kYXRhLnZhbHVlICYmIGV4dC5nZXRVdGZTdHJpbmcoJ3R5cGUnKSA9PSB0eXBlRm9ybUl0ZW0uZGF0YS52YWx1ZSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRsZXQgY2xhc3NlcyA9IGV4dC5nZXQoJ2NsYXNzZXNTdHJpbmcnKS5zcGxpdCgnLCcpOyAvLyBXZSBkb24ndCB1c2UgXCJnZXRVVGZTdHJpbmdcIiBiZWNhdXNlIHRoZSB0eXBlIGlzIFRleHQgaW4gY2FzZSBhIHZlcnkgbGFyZ2UgbGlzdCBvZiBjbGFzc2VzIGlzIHJldHVybmVkXG5cblx0XHRcdFx0XHRcdGlmIChmaWx0ZXJGb3JtSXRlbS5kYXRhLnZhbHVlID09IHRydWUpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGxldCBmaWx0ZXJlZENsYXNzZXMgPSBjbGFzc2VzLmZpbHRlcihmaWx0ZXJDbGFzc05hbWUpO1xuXHRcdFx0XHRcdFx0XHRjbGFzc2VzID0gZmlsdGVyZWRDbGFzc2VzO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjbGFzc2VzTGlzdCA9IGNsYXNzZXNMaXN0LmNvbmNhdChjbGFzc2VzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQgY3VycmVudENsYXNzID0gY2xhc3NGb3JtSXRlbS5kYXRhLnZhbHVlO1xuXG5cdFx0XHRcdC8vIElmIHRoZSBjbGFzc2VzIGxpc3QgZG9lc24ndCBjb250YWluIHRoZSBjdXJyZW50IHZhbHVlLCBjcmVhdGUgYW4gZW1wdHkgZW50cnkgYW5kIHJlc2V0IHRoZSB2YWx1ZVxuXHRcdFx0XHRpZiAoY2xhc3Nlc0xpc3QuaW5kZXhPZihjdXJyZW50Q2xhc3MpIDwgMClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChjbGFzc2VzTGlzdC5sZW5ndGggPT0gMClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRjbGFzc2VzTGlzdC5wdXNoKCcnKTtcblx0XHRcdFx0XHRcdGN1cnJlbnRDbGFzcyA9ICcnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRjdXJyZW50Q2xhc3MgPSBjbGFzc2VzTGlzdFswXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGxldCBtYWluQ2xhc3NEcm9wRG93biA9IGNsYXNzRm9ybUl0ZW0uX2lubmVyV2lkZ2V0O1xuXHRcdFx0XHRtYWluQ2xhc3NEcm9wRG93bi5zZXREYXRhU291cmNlKGNsYXNzZXNMaXN0KTtcblxuXHRcdFx0XHRjbGFzc0Zvcm1JdGVtLmRhdGEudmFsdWUgPSBjdXJyZW50Q2xhc3M7XG5cdFx0XHRcdGNsYXNzRm9ybUl0ZW0uX3NldFdpZGdldFZhbHVlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0X29uUm9vbUNyZWF0b3JDcmVhdGVCdENsaWNrKClcblx0e1xuXHRcdC8vIFJlc2V0IGFuZCBoaWRlIGVycm9yIG1lc3NhZ2Vcblx0XHR0aGlzLl9yZXNldFJvb21DcmVhdGlvbkVycm9yKCk7XG5cblx0XHQvLyBDaGVjayB2YWxpZGl0eVxuXHRcdGlmICh0aGlzLl9yb29tQ3JlYXRpb25JQnVpbGRlci5jaGVja0lzVmFsaWQoKSlcblx0XHR7XG5cdFx0XHRsZXQgY2hhbmdlcyA9IHRoaXMuX3Jvb21DcmVhdGlvbklCdWlsZGVyLmdldENoYW5nZWREYXRhKCk7XG5cblx0XHRcdGlmIChjaGFuZ2VzLnNpemUoKSA+IDApXG5cdFx0XHR7XG5cdFx0XHRcdC8vIENoZWNrIHRoZSByb29tIG5hbWUgYWdhaW5zdCB0aGUgcm9vbXMgbGlzdCAoZHVwbGljYXRlIG5hbWVzIG5vdCBhbGxvd2VkISlcblx0XHRcdFx0aWYgKHRydWUpLy90aGlzLl92YWxpZGF0ZU5ld1Jvb21OYW1lKGNoYW5nZXMpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly8gRGlzYWJsZSByb29tIGNyZWF0aW9uIHBhbmVsXG5cdFx0XHRcdFx0dGhpcy5fZW5hYmxlQ3JlYXRlUm9vbVBhbmVsKGZhbHNlKTtcblxuXHRcdFx0XHRcdC8vIFNlbmQgc2V0dGluZ3MgdG8gc2VydmVyIGluc3RhbmNlXG5cdFx0XHRcdFx0bGV0IHBhcmFtcyA9IG5ldyBTRlMyWC5TRlNPYmplY3QoKTtcblx0XHRcdFx0XHRwYXJhbXMucHV0U0ZTQXJyYXkoJ3NldHRpbmdzJywgY2hhbmdlcyk7XG5cdFx0XHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnek5hbWUnLCB0aGlzLl96b25lTGlzdEJveC5kYXRhSXRlbSh0aGlzLl96b25lTGlzdEJveC5zZWxlY3QoKSkubmFtZSk7XG5cdFx0XHRcdFx0cGFyYW1zLnB1dEJvb2woJ25vdGlmeScsICQoJyN6bm0tbm90aWZ5Q2xpZW50c0NCJykucHJvcCgnY2hlY2tlZCcpKTtcblxuXHRcdFx0XHRcdC8vIFNlbmQgc2V0dGluZ3MgdG8gZXh0ZW5zaW9uXG5cdFx0XHRcdFx0dGhpcy5zZW5kRXh0ZW5zaW9uUmVxdWVzdCh0aGlzLlJFUV9DUkVBVEVfUk9PTSwgcGFyYW1zKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyBTaG93IGFsZXJ0XG5cdFx0XHRcdFx0dGhpcy5zaGVsbEN0cmwuc2hvd1NpbXBsZUFsZXJ0KCdVbmFibGUgdG8gc3VibWl0IGNvbmZpZ3VyYXRpb24gYmVjYXVzZSB0aGUgUm9vbSBuYW1lIGFscmVhZHkgZXhpc3RzOyBkdXBsaWNhdGUgbmFtZXMgYXJlIG5vdCBhbGxvd2VkLicsIHRydWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHQvLyBTaG93IGFsZXJ0XG5cdFx0XHR0aGlzLnNoZWxsQ3RybC5zaG93U2ltcGxlQWxlcnQoJ1VuYWJsZSB0byBzdWJtaXQgUm9vbSBjb25maWd1cmF0aW9uIGR1ZSB0byBhbiBpbnZhbGlkIHZhbHVlOyBwbGVhc2UgdmVyaWZ5IHRoZSBoaWdobGlnaHRlZCBmb3JtIGZpZWxkcyBpbiBhbGwgdGFicy4nLCB0cnVlKTtcblx0XHR9XG5cdH1cblxuXHRfb25TaG93Um9vbUZpbHRlckJ0Q2xpY2soKVxuXHR7XG5cdFx0dGhpcy5fcm9vbUZpbHRlci5zaG93KCk7XG5cdH1cblxuXHRfb25TaG93VXNlckZpbHRlckJ0Q2xpY2soKVxuXHR7XG5cdFx0dGhpcy5fdXNlckZpbHRlci5zaG93KCk7XG5cdH1cblxuXHRfb25BcHBseUJ0Q2hhbmdlKClcblx0e1xuXHRcdC8vIFJlcXVlc3QgZGF0YSB0byBzZXJ2ZXJcblx0XHR0aGlzLl9yZXF1ZXN0RGF0YSh0cnVlKTtcblx0fVxuXG5cdF9vblJvb21GaWx0ZXJVcGRhdGVkKClcblx0e1xuXHRcdC8vIEVuYWJsZS9kaXNhYmxlIFwiQXBwbHlcIiBjaGVja2JveFxuXHRcdCQoJyN6bm0tYXBwbHlSb29tRmlsdGVyQ0InKS5hdHRyKCdkaXNhYmxlZCcsIHRoaXMuX3Jvb21GaWx0ZXIuZmlsdGVyRXhwcmVzc2lvbiA9PSBudWxsKTtcblxuXHRcdC8vIFJlcXVlc3QgZGF0YSB0byBzZXJ2ZXJcblx0XHR0aGlzLl9yZXF1ZXN0RGF0YSh0cnVlKTtcblx0fVxuXG5cdF9vblVzZXJGaWx0ZXJVcGRhdGVkKClcblx0e1xuXHRcdC8vIEVuYWJsZS9kaXNhYmxlIFwiQXBwbHlcIiBjaGVja2JveFxuXHRcdCQoJyN6bm0tYXBwbHlVc2VyRmlsdGVyQ0InKS5hdHRyKCdkaXNhYmxlZCcsIHRoaXMuX3VzZXJGaWx0ZXIuZmlsdGVyRXhwcmVzc2lvbiA9PSBudWxsKTtcblxuXHRcdC8vIFJlcXVlc3QgZGF0YSB0byBzZXJ2ZXJcblx0XHR0aGlzLl9yZXF1ZXN0RGF0YSh0cnVlKTtcblx0fVxuXG5cdF9vbk1vbml0b3JTZWxlY3Rpb25CdENsaWNrKClcblx0e1xuXHRcdGlmICh0aGlzLl9zZWxlY3RlZFpvbmUpXG5cdFx0e1xuXHRcdFx0Ly8gQ2FuY2VsIHByZXZpb3VzIG1vbml0b3Jpbmdcblx0XHRcdHRoaXMuX29uQ2xvc2VNb25pdG9yQnRDbGljaygpO1xuXG5cdFx0XHRsZXQgZ2V0Wm9uZVVzZXJDb3VudEhpc3RvcnkgPSBmYWxzZTtcblxuXHRcdFx0dGhpcy5fbW9uaXRvcmVkWm9uZSA9IHRoaXMuX3NlbGVjdGVkWm9uZS5uYW1lO1xuXG5cdFx0XHQvLyBab25lIG11c3QgYmUgbW9uaXRvcmVkXG5cdFx0XHRpZiAodGhpcy5fYWN0aXZlUGFuZWxUeXBlID09ICd6b25lJylcblx0XHRcdHtcblx0XHRcdFx0dGhpcy5fbW9uaXRvcmVkVHlwZSA9IHRoaXMuTU9OSVRPUkVEX1RZUEVfWk9ORTtcblx0XHRcdFx0dGhpcy5fbW9uaXRvcmVkTmFtZSA9IHRoaXMuX21vbml0b3JlZFpvbmU7XG5cblx0XHRcdFx0Z2V0Wm9uZVVzZXJDb3VudEhpc3RvcnkgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSb29tIG11c3QgYmUgbW9uaXRvcmVkXG5cdFx0XHRpZiAodGhpcy5fYWN0aXZlUGFuZWxUeXBlID09ICdyb29tJyAmJiB0aGlzLl9zZWxlY3RlZFJvb20gIT0gdW5kZWZpbmVkKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGlzLl9tb25pdG9yZWRUeXBlID0gdGhpcy5NT05JVE9SRURfVFlQRV9ST09NO1xuXHRcdFx0XHR0aGlzLl9tb25pdG9yZWROYW1lID0gdGhpcy5fc2VsZWN0ZWRSb29tLm5hbWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVzZXIgbXVzdCBiZSBtb25pdG9yZWRcblx0XHRcdGlmICh0aGlzLl9hY3RpdmVQYW5lbFR5cGUgPT0gJ3VzZXInICYmIHRoaXMuX3NlbGVjdGVkVXNlciAhPSB1bmRlZmluZWQpXG5cdFx0XHR7XG5cdFx0XHRcdHRoaXMuX21vbml0b3JlZFR5cGUgPSB0aGlzLk1PTklUT1JFRF9UWVBFX1VTRVI7XG5cdFx0XHRcdHRoaXMuX21vbml0b3JlZE5hbWUgPSB0aGlzLl9zZWxlY3RlZFVzZXIubmFtZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2hvdyBsb2FkaW5nIGJhclxuXHRcdFx0dGhpcy5fc3dpdGNoVmlldygnem5tLWxvYWRpbmcnKTtcblxuXHRcdFx0Ly8gUmVxdWVzdCBkYXRhIHRvIHNlcnZlclxuXHRcdFx0dGhpcy5fcmVxdWVzdERhdGEodHJ1ZSwgZ2V0Wm9uZVVzZXJDb3VudEhpc3RvcnkpO1xuXHRcdH1cblx0fVxuXG5cdF9vblNlbmRBZG1pbk1zZ0luS2V5VXAoZXZlbnQpXG5cdHtcblx0XHRpZiAoZXZlbnQua2V5ICE9PSAnRW50ZXInKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHR0aGlzLl9vblNlbmRBZG1pbk1zZ0J0Q2xpY2soKTtcblx0fVxuXG5cdF9vblNlbmRBZG1pbk1zZ0J0Q2xpY2soKVxuXHR7XG5cdFx0aWYgKHRoaXMuX3NlbGVjdGVkWm9uZSAmJiAkKCcjem5tLW1lc3NhZ2VJbicpLnZhbCgpICE9ICcnKVxuXHRcdHtcblx0XHRcdC8vIEJ1aWxkIHJlcXVlc3QgcGFyYW1ldGVyc1xuXHRcdFx0bGV0IHBhcmFtcyA9IG5ldyBTRlMyWC5TRlNPYmplY3QoKTtcblxuXHRcdFx0Ly8gQWx3YXlzIGluY2x1ZGUgem9uZVxuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnem9uZScsIHRoaXMuX3NlbGVjdGVkWm9uZS5uYW1lKTtcblxuXHRcdFx0Ly8gU2VuZCBtZXNzYWdlIHRvIHJvb20/XG5cdFx0XHRpZiAodGhpcy5fYWN0aXZlUGFuZWxUeXBlID09ICdyb29tJyAmJiB0aGlzLl9zZWxlY3RlZFJvb20gIT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCdyb29tJywgdGhpcy5fc2VsZWN0ZWRSb29tLm5hbWUpO1xuXG5cdFx0XHQvLyBTZW5kIG1lc3NhZ2UgdG8gdXNlcj9cblx0XHRcdGlmICh0aGlzLl9hY3RpdmVQYW5lbFR5cGUgPT0gJ3VzZXInICYmIHRoaXMuX3NlbGVjdGVkVXNlciAhPSB1bmRlZmluZWQpXG5cdFx0XHRcdHBhcmFtcy5wdXRVdGZTdHJpbmcoJ3VzZXInLCB0aGlzLl9zZWxlY3RlZFVzZXIubmFtZSk7XG5cblx0XHRcdC8vIEFkZCBtZXNzYWdlXG5cdFx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCdtc2cnLCAkKCcjem5tLW1lc3NhZ2VJbicpLnZhbCgpKTtcblxuXHRcdFx0Ly8gU2VuZCByZXF1ZXN0IHRvIGV4dGVuc2lvblxuXHRcdFx0dGhpcy5zZW5kRXh0ZW5zaW9uUmVxdWVzdCh0aGlzLlJFUV9BRE1JTl9NU0csIHBhcmFtcyk7XG5cblx0XHRcdC8vIENsZWFyIHRleHQgaW5wdXRcblx0XHRcdCQoJyN6bm0tbWVzc2FnZUluJykudmFsKCcnKTtcblx0XHR9XG5cdH1cblxuXHRfb25DbG9zZU1vbml0b3JCdENsaWNrKClcblx0e1xuXHRcdC8vIFNhdmUgcmVmLiBmb3IgbGF0ZXIgdXNhZ2Vcblx0XHRjb25zdCBtb25pdG9yZWRUeXBlID0gdGhpcy5fbW9uaXRvcmVkVHlwZTtcblxuXHRcdHRoaXMuX21vbml0b3JlZFpvbmUgPSBudWxsO1xuXHRcdHRoaXMuX21vbml0b3JlZFR5cGUgPSBudWxsO1xuXHRcdHRoaXMuX21vbml0b3JlZE5hbWUgPSBudWxsO1xuXG5cdFx0Ly8gQ2xlYXIgZ2VvbG9jYXRpb24gVUlcblx0XHR0aGlzLl9jbGVhckdlb0xvY2F0aW9uVUkoKTtcblxuXHRcdC8vIENsZWFyIGxvZyBkYXRhZ3JpZHMgZGF0YXByb3ZpZGVyc1xuXHRcdC8vIE5PVEU6IGEgdHJ5LWNhdGNoIGlzIHVzZWQgaGVyZSBiZWNhdXNlLCBmb3IgYW4gdW5rbm93biByZWFzb24sIEtlbmRvIGlzIHRocm93aW5nIGFuIGVycm9yIHdoZW4gcmVzZXR0aW5nIHRoZSBkYXRhIHNvdXJjZXMgd2hlbiB0aGUgbW9kdWxlIGlzIGRlc3Ryb3llZFxuXHRcdHRyeVxuXHRcdHtcblx0XHRcdHRoaXMuX3pvbmVFeHRMb2dHcmlkLnNldERhdGFTb3VyY2UoW10pO1xuXHRcdFx0dGhpcy5fcm9vbUV4dExvZ0dyaWQuc2V0RGF0YVNvdXJjZShbXSk7XG5cdFx0fVxuXHRcdGNhdGNoIChlKSB7IC8qIElnbm9yZSAqLyB9XG5cblx0XHQvLyBMZWF2ZSBlZGl0IG1vZGVcblx0XHR0aGlzLl9vbkNhbmNlbEJ0Q2xpY2soKTtcblxuXHRcdC8vIFJlYXJyYW5nZSBtb25pdG9yaW5nIGludGVyZmFjZVxuXHRcdHRoaXMuX3NldE1vbml0b3JpbmdJbnRlcmZhY2UoKTtcblxuXHRcdC8vIENsZWFyIHRhYiBuYXZpZ2F0b3Jcblx0XHR0aGlzLl9jbGVhclRhYnMobW9uaXRvcmVkVHlwZSk7XG5cdH1cblxuXHRfb25FZGl0QnRDbGljaygpXG5cdHtcblx0XHRpZiAoIXRoaXMuX2lzRWRpdGluZylcblx0XHR7XG5cdFx0XHQvLyBTaG93IGVkaXQgY29udHJvbHNcblx0XHRcdCQoJyN6bm0tZWRpdENvbnRyb2xzJykuc2hvdygpO1xuXG5cdFx0XHQvLyBIaWRlIGVkaXQgYnV0dG9uXG5cdFx0XHQkKCcjem5tLWVkaXRCdCcpLmhpZGUoKTtcblxuXHRcdFx0Ly8gRW5hYmxlIGVkaXRhYmxlIGZpZWxkc1xuXHRcdFx0dGhpcy5faW50ZXJmYWNlQnVpbGRlci5kaXNhYmxlSW50ZXJmYWNlKGZhbHNlKTtcblxuXHRcdFx0dGhpcy5faXNFZGl0TW9kZSA9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0X29uQ2FuY2VsQnRDbGljaygpXG5cdHtcblx0XHRpZiAodGhpcy5faXNFZGl0aW5nKVxuXHRcdHtcblx0XHRcdC8vIEhpZGUgZWRpdCBjb250cm9sc1xuXHRcdFx0JCgnI3pubS1lZGl0Q29udHJvbHMnKS5oaWRlKCk7XG5cblx0XHRcdC8vIFNob3cgZWRpdCBidXR0b25cblx0XHRcdCQoJyN6bm0tZWRpdEJ0Jykuc2hvdygpO1xuXG5cdFx0XHQvLyBEaXNhYmxlIGVkaXRhYmxlIGZpZWxkc1xuXHRcdFx0dGhpcy5faW50ZXJmYWNlQnVpbGRlci5kaXNhYmxlSW50ZXJmYWNlKHRydWUpO1xuXG5cdFx0XHR0aGlzLl9pc0VkaXRNb2RlID0gZmFsc2U7XG5cblx0XHRcdC8vIEhpZGUgdmFsaWRhdGlvbiBtZXNzYWdlc1xuXHRcdFx0dGhpcy5faW50ZXJmYWNlQnVpbGRlci5yZXNldFZhbGlkYXRpb24oKTtcblxuXHRcdFx0Ly8gUmVxdWVzdCBkYXRhIHRvIHVwZGF0ZSBpbnRlcmZhY2UgKHVwZGF0aW5nIHN1c3BlbmRlZCBpbiBlZGl0IG1vZGUpXG5cdFx0XHR0aGlzLl9yZXF1ZXN0RGF0YSh0cnVlKTtcblx0XHR9XG5cdH1cblxuXHRfb25TdWJtaXRCdENsaWNrKClcblx0e1xuXHRcdGlmICh0aGlzLl9pc0VkaXRpbmcpXG5cdFx0e1xuXHRcdFx0Ly8gQ2hlY2sgdmFsaWRpdHlcblx0XHRcdGlmICh0aGlzLl9pbnRlcmZhY2VCdWlsZGVyLmNoZWNrSXNWYWxpZCgpKVxuXHRcdFx0e1xuXHRcdFx0XHRsZXQgY2hhbmdlcyA9IHRoaXMuX2ludGVyZmFjZUJ1aWxkZXIuZ2V0Q2hhbmdlZERhdGEoKTtcblxuXHRcdFx0XHRpZiAoY2hhbmdlcy5zaXplKCkgPiAwKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhjaGFuZ2VzLmdldER1bXAoKSlcblxuXHRcdFx0XHRcdC8vIFNlbmQgc2V0dGluZ3MgdG8gc2VydmVyIGluc3RhbmNlXG5cdFx0XHRcdFx0bGV0IHBhcmFtcyA9IG5ldyBTRlMyWC5TRlNPYmplY3QoKTtcblx0XHRcdFx0XHRwYXJhbXMucHV0U0ZTQXJyYXkoJ3NldHRpbmdzJywgY2hhbmdlcyk7XG5cdFx0XHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnem9uZScsIHRoaXMuX21vbml0b3JlZFpvbmUpO1xuXG5cdFx0XHRcdFx0aWYgKHRoaXMuX21vbml0b3JlZFR5cGUgPT0gdGhpcy5NT05JVE9SRURfVFlQRV9ST09NKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIFN1Ym1pdCByb29tIHNldHRpbmdzXG5cdFx0XHRcdFx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCdyb29tJywgdGhpcy5fbW9uaXRvcmVkTmFtZSk7XG5cdFx0XHRcdFx0XHR0aGlzLnNlbmRFeHRlbnNpb25SZXF1ZXN0KHRoaXMuUkVRX1NFVF9ST09NX1NFVFRJTkdTLCBwYXJhbXMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIGlmICh0aGlzLl9tb25pdG9yZWRUeXBlID09IHRoaXMuTU9OSVRPUkVEX1RZUEVfVVNFUilcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHQvLyBTdWJtaXQgdXNlciBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygndXNlcicsIHRoaXMuX21vbml0b3JlZE5hbWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5zZW5kRXh0ZW5zaW9uUmVxdWVzdCh0aGlzLlJFUV9TRVRfVVNFUl9TRVRUSU5HUywgcGFyYW1zKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdC8vIFN1Ym1pdCB6b25lIHNldHRpbmdzXG5cdFx0XHRcdFx0XHR0aGlzLnNlbmRFeHRlbnNpb25SZXF1ZXN0KHRoaXMuUkVRX1NFVF9aT05FX1NFVFRJTkdTLCBwYXJhbXMpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIExlYXZlIGVkaXQgbW9kZVxuXHRcdFx0XHRcdHRoaXMuX29uQ2FuY2VsQnRDbGljaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIFNob3cgYWxlcnRcblx0XHRcdFx0dGhpcy5zaGVsbEN0cmwuc2hvd1NpbXBsZUFsZXJ0KCdVbmFibGUgdG8gc3VibWl0IGNoYW5nZXMgZHVlIHRvIGFuIGludmFsaWQgdmFsdWU7IHBsZWFzZSB2ZXJpZnkgdGhlIGhpZ2hsaWdodGVkIGZvcm0gZmllbGRzIGluIGFsbCB0YWJzLicsIHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdF9vblRpbWVSYW5nZUNoYW5nZSgpXG5cdHtcblx0XHRsZXQgdmFsdWVzID0gdGhpcy5fdGltZVNsaWRlci52YWx1ZSgpO1xuXG5cdFx0aWYgKHZhbHVlc1swXSA9PSB2YWx1ZXNbMV0pXG5cdFx0e1xuXHRcdFx0aWYgKHZhbHVlc1sxXSA9PSAtMjQpXG5cdFx0XHRcdHZhbHVlc1sxXSA9IC0yMztcblxuXHRcdFx0dmFsdWVzWzBdID0gdmFsdWVzWzFdIC0gMTtcblxuXHRcdFx0Ly8gUmVzZXQgdGhlIHRpbWUgcmFuZ2Ugc2xpZGVyIHZhbHVlICh3ZSBuZWVkIHRvIHVzZSBzZXRUaW1lb3V0XG5cdFx0XHQvLyBiYWNhdXNlIGRvaW5nIGl0IGluIHRoZSBjaGFuZ2UgZXZlbnQgbGlzdGVuZXIgZG9lc24ndCByZWRyYXcgdGhlIHNsaWRlcilcblx0XHRcdHNldFRpbWVvdXQoJC5wcm94eSggZnVuY3Rpb24odmFsdWVzKSB7IHRoaXMuX3RpbWVTbGlkZXIudmFsdWUodmFsdWVzKTsgfSwgdGhpcyksIDEwLCB2YWx1ZXMpO1xuXHRcdH1cblxuXHRcdHRoaXMuX3VzZXJDb3VudENoYXJ0LnJhbmdlID0gdmFsdWVzO1xuXHR9XG5cblx0X29uV2luZG93UmVzaXplKClcblx0e1xuXHRcdC8vIFJlZHJhdyBjaGFydHNcblx0XHR0aGlzLl91c2VyQ291bnRDaGFydC5yZWRyYXcoKTtcblx0XHR0aGlzLl9wYWNrZXRRdWV1ZUNoYXJ0LnJlZHJhdygpO1xuXHRcdHRoaXMuX2Ryb3BwZWRNc2dDaGFydC5yZWRyYXcoKTtcblx0XHR0aGlzLl93cml0dGVuRGF0YUNoYXJ0LnJlZHJhdygpO1xuXHRcdHRoaXMuX3JlYWREYXRhQ2hhcnQucmVkcmF3KCk7XG5cblx0XHQvLyBSZWRyYXcgdGltZSByYW5nZSBzbGlkZXJcblx0XHR0aGlzLl90aW1lU2xpZGVyLnJlc2l6ZSgpO1xuXHR9XG5cblx0X29uV29yZHNSZWxvYWRCdENsaWNrKClcblx0e1xuXHRcdGlmICh0aGlzLl9tb25pdG9yZWRUeXBlID09IHRoaXMuTU9OSVRPUkVEX1RZUEVfWk9ORSlcblx0XHR7XG5cdFx0XHQvLyBTZW5kIHJlcXVlc3QgdG8gZXh0ZW5zaW9uXG5cdFx0XHRsZXQgcGFyYW1zID0gbmV3IFNGUzJYLlNGU09iamVjdCgpO1xuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnem9uZScsIHRoaXMuX21vbml0b3JlZE5hbWUpO1xuXG5cdFx0XHR0aGlzLnNlbmRFeHRlbnNpb25SZXF1ZXN0KHRoaXMuUkVRX1JFTE9BRF9XT1JEUywgcGFyYW1zKTtcblx0XHR9XG5cdH1cblxuXHRfb25ab25lRXh0UmVsb2FkQnRDbGljaygpXG5cdHtcblx0XHRpZiAodGhpcy5fbW9uaXRvcmVkVHlwZSA9PSB0aGlzLk1PTklUT1JFRF9UWVBFX1pPTkUpXG5cdFx0e1xuXHRcdFx0Ly8gU2VuZCByZXF1ZXN0IHRvIGV4dGVuc2lvblxuXHRcdFx0bGV0IHBhcmFtcyA9IG5ldyBTRlMyWC5TRlNPYmplY3QoKTtcblx0XHRcdHBhcmFtcy5wdXRVdGZTdHJpbmcoJ3pvbmUnLCB0aGlzLl9tb25pdG9yZWROYW1lKTtcblxuXHRcdFx0dGhpcy5zZW5kRXh0ZW5zaW9uUmVxdWVzdCh0aGlzLlJFUV9SRUxPQURfWk9ORV9FWFQsIHBhcmFtcyk7XG5cdFx0fVxuXHR9XG5cblx0X29uRGlzY29ubmVjdEJ0Q2xpY2soKVxuXHR7XG5cdFx0aWYgKHRoaXMuX21vbml0b3JlZFR5cGUgPT0gdGhpcy5NT05JVE9SRURfVFlQRV9VU0VSKVxuXHRcdHtcblx0XHRcdC8vIFNlbmQgcmVxdWVzdCB0byBleHRlbnNpb25cblx0XHRcdGxldCBwYXJhbXMgPSBuZXcgU0ZTMlguU0ZTT2JqZWN0KCk7XG5cdFx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCd6b25lJywgdGhpcy5fbW9uaXRvcmVkWm9uZSk7XG5cdFx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCd1c2VyJywgdGhpcy5fbW9uaXRvcmVkTmFtZSk7XG5cblx0XHRcdHRoaXMuc2VuZEV4dGVuc2lvblJlcXVlc3QodGhpcy5SRVFfRElTQ09OTkVDVF9VU0VSLCBwYXJhbXMpO1xuXHRcdH1cblx0fVxuXG5cdF9vbktpY2tCdENsaWNrKClcblx0e1xuXHRcdGlmICh0aGlzLl9tb25pdG9yZWRUeXBlID09IHRoaXMuTU9OSVRPUkVEX1RZUEVfVVNFUilcblx0XHR7XG5cdFx0XHQvLyBTZW5kIHJlcXVlc3QgdG8gZXh0ZW5zaW9uXG5cdFx0XHRsZXQgcGFyYW1zID0gbmV3IFNGUzJYLlNGU09iamVjdCgpO1xuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnem9uZScsIHRoaXMuX21vbml0b3JlZFpvbmUpO1xuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygndXNlcicsIHRoaXMuX21vbml0b3JlZE5hbWUpO1xuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnbXNnJywgJCgnI3pubS1raWNrTXNnSW4nKS52YWwoKSk7XG5cdFx0XHRwYXJhbXMucHV0SW50KCdkZWxheScsICh0aGlzLl9raWNrRGVsYXlJbi52YWx1ZSgpICE9IG51bGwgPyBOdW1iZXIodGhpcy5fa2lja0RlbGF5SW4udmFsdWUoKSkgOiB0aGlzLktJQ0tfQkFOX0RFRkFVTFRfREVMQVkpKTtcblxuXHRcdFx0dGhpcy5zZW5kRXh0ZW5zaW9uUmVxdWVzdCh0aGlzLlJFUV9LSUNLX1VTRVIsIHBhcmFtcyk7XG5cblx0XHRcdC8vIFJlc2V0IG1lc3NhZ2Vcblx0XHRcdCQoJyN6bm0ta2lja01zZ0luJykudmFsKCcnKTtcblx0XHR9XG5cdH1cblxuXHRfb25CYW5CdENsaWNrKClcblx0e1xuXHRcdGlmICh0aGlzLl9tb25pdG9yZWRUeXBlID09IHRoaXMuTU9OSVRPUkVEX1RZUEVfVVNFUilcblx0XHR7XG5cdFx0XHQvLyBTZW5kIHJlcXVlc3QgdG8gZXh0ZW5zaW9uXG5cdFx0XHRsZXQgcGFyYW1zID0gbmV3IFNGUzJYLlNGU09iamVjdCgpO1xuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnem9uZScsIHRoaXMuX21vbml0b3JlZFpvbmUpO1xuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygndXNlcicsIHRoaXMuX21vbml0b3JlZE5hbWUpO1xuXHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnbXNnJywgJCgnI3pubS1iYW5Nc2dJbicpLnZhbCgpKTtcblx0XHRcdHBhcmFtcy5wdXRVdGZTdHJpbmcoJ3JzbicsICQoJyN6bm0tYmFuUnNuSW4nKS52YWwoKSk7XG5cdFx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCdtb2RlJywgdGhpcy5fYmFuTW9kZURkLnNlbGVjdCgpID4gMCA/IHRoaXMuX2Jhbk1vZGVEZC52YWx1ZSgpIDogJ05BTUUnKTtcblx0XHRcdHBhcmFtcy5wdXRJbnQoJ2RlbGF5JywgKHRoaXMuX2JhbkRlbGF5SW4udmFsdWUoKSAhPSBudWxsID8gTnVtYmVyKHRoaXMuX2JhbkRlbGF5SW4udmFsdWUoKSkgOiB0aGlzLktJQ0tfQkFOX0RFRkFVTFRfREVMQVkpKTtcblxuXHRcdFx0bGV0IGR1cmF0aW9uID0gdGhpcy5fYmFuRHVyYXRpb25Jbi52YWx1ZSgpICE9IG51bGwgPyBOdW1iZXIodGhpcy5fYmFuRHVyYXRpb25Jbi52YWx1ZSgpKSA6IDE7XG5cblx0XHRcdGlmICh0aGlzLl9iYW5EdXJVbml0RGQudmFsdWUoKSA9PSAnaG91cnMnKVxuXHRcdFx0XHRkdXJhdGlvbiA9IGR1cmF0aW9uICogNjA7XG5cdFx0XHRlbHNlIGlmICh0aGlzLl9iYW5EdXJVbml0RGQudmFsdWUoKSA9PSAnZGF5cycpXG5cdFx0XHRcdGR1cmF0aW9uID0gZHVyYXRpb24gKiA2MCAqIDI0O1xuXG5cdFx0XHRwYXJhbXMucHV0SW50KCdkdXJhdGlvbicsIGR1cmF0aW9uKTtcblxuXHRcdFx0dGhpcy5zZW5kRXh0ZW5zaW9uUmVxdWVzdCh0aGlzLlJFUV9CQU5fVVNFUiwgcGFyYW1zKTtcblxuXHRcdFx0Ly8gUmVzZXQgbWVzc2FnZSBhbmQgcmVhc29uXG5cdFx0XHQkKCcjem5tLWJhbk1zZ0luJykudmFsKCcnKTtcblx0XHRcdCQoJyN6bm0tYmFuUnNuSW4nKS52YWwoJycpO1xuXHRcdH1cblx0fVxuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIFBSSVZBVEUgTUVUSE9EU1xuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdF9zZXRNb25pdG9yaW5nSW50ZXJmYWNlKClcblx0e1xuXHRcdGNvbnN0IGVuYWJsZWQgPSAodGhpcy5fbW9uaXRvcmVkVHlwZSAhPSBudWxsICYmIHRoaXMuX21vbml0b3JlZE5hbWUgIT0gbnVsbCk7XG5cblx0XHQvLyBTaG93L2hpZGUgaGVhZGVyIGFuZCBmb290ZXJcblx0XHRpZiAoZW5hYmxlZClcblx0XHR7XG5cdFx0XHR0aGlzLl9zd2l0Y2hWaWV3KGB6bm0tJHt0aGlzLl9tb25pdG9yZWRUeXBlfU1vbml0b3JgKTtcblxuXHRcdFx0Ly8gSGVhZGVyIHRpdGxlXG5cdFx0XHRsZXQgdGl0bGUgPSAnTm93IG1vbml0b3JpbmcgJztcblxuXHRcdFx0aWYgKHRoaXMuX21vbml0b3JlZFR5cGUgPT0gdGhpcy5NT05JVE9SRURfVFlQRV9VU0VSKVxuXHRcdFx0XHR0aXRsZSArPSBgVXNlcjogPHN0cm9uZz4ke3RoaXMuX21vbml0b3JlZE5hbWV9PC9zdHJvbmc+IChab25lOiAke3RoaXMuX21vbml0b3JlZFpvbmV9KWA7XG5cdFx0XHRlbHNlIGlmICh0aGlzLl9tb25pdG9yZWRUeXBlID09IHRoaXMuTU9OSVRPUkVEX1RZUEVfUk9PTSlcblx0XHRcdFx0dGl0bGUgKz0gYFJvb206IDxzdHJvbmc+JHt0aGlzLl9tb25pdG9yZWROYW1lfTwvc3Ryb25nPiAoWm9uZTogJHt0aGlzLl9tb25pdG9yZWRab25lfSlgO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHR0aXRsZSArPSBgWm9uZTogPHN0cm9uZz4ke3RoaXMuX21vbml0b3JlZFpvbmV9PC9zdHJvbmc+YDtcblxuXHRcdFx0JCgnI3pubS1tb25pdG9yZWRIZWFkZXInKS5odG1sKHRpdGxlKTtcblx0XHRcdCQoJyN6bm0tbW9uaXRvcmVkRm9vdGVyJykuc2hvdygpO1xuXG5cdFx0XHQvLyBTaG93IHBhbmVsXG5cdFx0XHR0aGlzLl9zd2l0Y2hQYW5lbCgnem5tLW1haW5QYW5lbCcpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhpcy5fc3dpdGNoVmlldygnem5tLXNlbGVjdCcpO1xuXG5cdFx0XHQkKCcjem5tLW1vbml0b3JlZEhlYWRlcicpLmh0bWwoJycpO1xuXHRcdFx0JCgnI3pubS1tb25pdG9yZWRGb290ZXInKS5oaWRlKCk7XG5cblx0XHRcdC8vIFNob3cgcGFuZWxcblx0XHRcdHRoaXMuX3N3aXRjaFBhbmVsKCd6bm0tc2lkZWJhclBhbmVsJyk7XG5cdFx0fVxuXHR9XG5cblx0X3N3aXRjaFZpZXcodmlld0lkKVxuXHR7XG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pubS12aWV3c3RhY2snKS5zZWxlY3RlZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh2aWV3SWQpO1xuXHR9XG5cblx0X3N3aXRjaFBhbmVsKHBhbmVsSWQpXG5cdHtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnem5tLXZpZXcnKS5zZWxlY3RlZFBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFuZWxJZCk7XG5cdH1cblxuXHQvKipcblx0ICogQnVpbGQgdGhlIHBvbGxpbmcgcmVxdWVzdCB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXIsIGJhc2VkIG9uIHRoZSBzZWxlY3Rpb25zIGFuZCBvdGhlciBzZXR0aW5ncyBpbiB0aGUgYWNjb3JkaW9uLlxuXHQgKi9cblx0X3JlcXVlc3REYXRhKG5ld0lkID0gZmFsc2UsIGdldFpvbmVVc2VyQ291bnRIaXN0b3J5ID0gZmFsc2UpXG5cdHtcblx0XHQvLyBDbGVhciBwcmV2aW91cyByZXF1ZXN0IHNjaGVkdWxpbmdcblx0XHRjbGVhclRpbWVvdXQodGhpcy5fcmVxdWVzdFRpbWVyKTtcblxuXHRcdC8vIENoZWNrIGlmIGNvbm5lY3Rpb24gaXMgc3RpbGwgYXZhaWxhYmxlXG5cdFx0aWYgKHRoaXMuc21hcnRGb3guaXNDb25uZWN0ZWQpXG5cdFx0e1xuXHRcdFx0aWYgKG5ld0lkKVxuXHRcdFx0XHR0aGlzLl9jdXJyZW50UmVxdWVzdElkKys7XG5cblx0XHRcdC8vIEJ1aWxkIHJlcXVlc3QgcGFyYW1ldGVyc1xuXHRcdFx0bGV0IHBhcmFtcyA9IG5ldyBTRlMyWC5TRlNPYmplY3QoKTtcblxuXHRcdFx0Ly8gVGhlIHVwZGF0ZWQgem9uZXMvcm9vbXMvdXNlcnMgbGlzdHMgYXJlIHJlcXVlc3RlZCBpZiB0aGUgY29ycmVzcG9uZGluZyBwYW5lbCBpcyBkaXNwbGF5ZWQgb25seVxuXHRcdFx0Y29uc3QgZ2V0Wm9uZXMgPSAodGhpcy5fYWN0aXZlUGFuZWxUeXBlID09ICd6b25lJyk7XG5cdFx0XHRjb25zdCBnZXRSb29tcyA9ICh0aGlzLl9hY3RpdmVQYW5lbFR5cGUgPT0gJ3Jvb20nICYmIHRoaXMuX3NlbGVjdGVkWm9uZSAhPSB1bmRlZmluZWQpO1xuXHRcdFx0Y29uc3QgZ2V0VXNlcnMgPSAodGhpcy5fYWN0aXZlUGFuZWxUeXBlID09ICd1c2VyJyAmJiB0aGlzLl9zZWxlY3RlZFpvbmUgIT0gdW5kZWZpbmVkKTtcblxuXHRcdFx0Ly8gLS0tIFpPTkVTIC0tLVxuXHRcdFx0cGFyYW1zLnB1dEJvb2woJ3pvbmVzJywgZ2V0Wm9uZXMpO1xuXG5cdFx0XHQvLyBST09NUyAmIFVTRVJTXG5cdFx0XHRpZiAoZ2V0Um9vbXMgfHwgZ2V0VXNlcnMpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIENvbW1vbiBmaWx0ZXJpbmcgcGFyYW1zOlxuXG5cdFx0XHRcdC8vIGEpIHpvbmUgbmFtZVxuXHRcdFx0XHRwYXJhbXMucHV0VXRmU3RyaW5nKCd6b25lJywgdGhpcy5fc2VsZWN0ZWRab25lLm5hbWUpO1xuXG5cdFx0XHRcdC8vIGIpIGdyb3VwIG5hbWVcblx0XHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygnZ3JvdXAnLCB0aGlzLl9zZWxlY3RlZEdyb3VwLm5hbWUpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBST09NU1xuXHRcdFx0cGFyYW1zLnB1dEJvb2woJ3Jvb21zJywgZ2V0Um9vbXMpO1xuXHRcdFx0aWYgKGdldFJvb21zKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBGaWx0ZXJpbmcgcGFyYW1zOlxuXG5cdFx0XHRcdC8vIGMpIGFkdmFuY2VkIGZpbHRlcmluZyBwYXJhbXNcblx0XHRcdFx0aWYgKCQoJyN6bm0tYXBwbHlSb29tRmlsdGVyQ0InKS5wcm9wKCdjaGVja2VkJykgJiYgdGhpcy5fcm9vbUZpbHRlci5maWx0ZXJFeHByZXNzaW9uICE9IG51bGwpXG5cdFx0XHRcdFx0cGFyYW1zLnB1dFNGU0FycmF5KCdyRmlsdGVyJywgdGhpcy5fcm9vbUZpbHRlci5maWx0ZXJFeHByZXNzaW9uLnRvU0ZTQXJyYXkoKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVTRVJTXG5cdFx0XHRwYXJhbXMucHV0Qm9vbCgndXNlcnMnLCBnZXRVc2Vycyk7XG5cdFx0XHRpZiAoZ2V0VXNlcnMpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIEZpbHRlcmluZyBwYXJhbXM6XG5cblx0XHRcdFx0Ly8gYykgcm9vbSBuYW1lXG5cdFx0XHRcdGlmICh0aGlzLl9zZWxlY3RlZFJvb20pXG5cdFx0XHRcdFx0cGFyYW1zLnB1dFV0ZlN0cmluZygncm9vbScsIHRoaXMuX3NlbGVjdGVkUm9vbS5uYW1lKTtcblxuXHRcdFx0XHQvLyBkKSBhZHZhbmNlZCBmaWx0ZXJpbmcgcGFyYW1zXG5cdFx0XHRcdGlmICgkKCcjem5tLWFwcGx5VXNlckZpbHRlckNCJykucHJvcCgnY2hlY2tlZCcpICYmIHRoaXMuX3VzZXJGaWx0ZXIuZmlsdGVyRXhwcmVzc2lvbiAhPSBudWxsKVxuXHRcdFx0XHRcdHBhcmFtcy5wdXRTRlNBcnJheSgndUZpbHRlcicsIHRoaXMuX3VzZXJGaWx0ZXIuZmlsdGVyRXhwcmVzc2lvbi50b1NGU0FycmF5KCkpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyAtLS0gQ1VSUkVOVExZIE1PTklUT1JFRCBEQVRBIC0tLVxuXHRcdFx0aWYgKHRoaXMuX21vbml0b3JlZFR5cGUgIT0gbnVsbCAmJiB0aGlzLl9tb25pdG9yZWROYW1lICE9IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdGxldCBtb25pdG9yZWRPYmogPSB0aGlzLl9nZXRCYXNpY01vbml0b3JlZE9iamVjdCgpO1xuXG5cdFx0XHRcdGlmICh0aGlzLl9tb25pdG9yZWRUeXBlID09IHRoaXMuTU9OSVRPUkVEX1RZUEVfWk9ORSlcblx0XHRcdFx0XHRtb25pdG9yZWRPYmoucHV0Qm9vbCgndWMnLCBnZXRab25lVXNlckNvdW50SGlzdG9yeSk7XG5cblx0XHRcdFx0cGFyYW1zLnB1dFNGU09iamVjdCgnbW9uaXRvcmVkJywgbW9uaXRvcmVkT2JqKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHJlcXVlc3QgaWQ7IHdoZW4gYSByZXNwb25zZSBpcyByZWNlaXZlZCwgd2UgY2hlY2sgaXRzIGlkIG1hdGNoZXMgdGhlIGN1cnJlbnQgcmVxdWVzdCBpZDogaWYgbm90LCB0aGUgcmVzcG9uc2UgaXMgZGlzY2FyZGVkXG5cdFx0XHRwYXJhbXMucHV0SW50KCdpZCcsIHRoaXMuX2N1cnJlbnRSZXF1ZXN0SWQpO1xuXG5cdFx0XHQvLyBTZW5kIHJlcXVlc3QgdG8gZXh0ZW5zaW9uXG5cdFx0XHR0aGlzLnNlbmRFeHRlbnNpb25SZXF1ZXN0KHRoaXMuUkVRX0dFVF9EQVRBLCBwYXJhbXMpO1xuXG5cdFx0XHQvLyBTY2hlZHVsZSBuZXh0IHJlcXVlc3Rcblx0XHRcdHRoaXMuX3JlcXVlc3RUaW1lciA9IHNldFRpbWVvdXQoJC5wcm94eSh0aGlzLl9yZXF1ZXN0RGF0YSwgdGhpcyksIE51bWJlcih0aGlzLl9pbnRlcnZhbERyb3BEb3duLnZhbHVlKCkpICogMTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0X2dldEJhc2ljTW9uaXRvcmVkT2JqZWN0KClcblx0e1xuXHRcdGxldCBtb25pdG9yZWRPYmogPSBuZXcgU0ZTMlguU0ZTT2JqZWN0KCk7XG5cblx0XHRtb25pdG9yZWRPYmoucHV0VXRmU3RyaW5nKCd6b25lJywgdGhpcy5fbW9uaXRvcmVkWm9uZSk7XG5cdFx0bW9uaXRvcmVkT2JqLnB1dFV0ZlN0cmluZygndHlwZScsIHRoaXMuX21vbml0b3JlZFR5cGUpO1xuXHRcdG1vbml0b3JlZE9iai5wdXRVdGZTdHJpbmcoJ25hbWUnLCB0aGlzLl9tb25pdG9yZWROYW1lKTtcblxuXHRcdHJldHVybiBtb25pdG9yZWRPYmo7XG5cdH1cblxuXHRfc2V0Wm9uZXNEYXRhUHJvdmlkZXIoem9uZXNEYXRhKVxuXHR7XG5cdFx0dGhpcy5fc2V0TGlzdERhdGFQcm92aWRlcih0aGlzLl96b25lTGlzdEJveCwgem9uZXNEYXRhLCB0cnVlKTtcblx0fVxuXG5cdF9zZXRSb29tc0RhdGFQcm92aWRlcihyb29tc0RhdGEpXG5cdHtcblx0XHR0aGlzLl9zZXRMaXN0RGF0YVByb3ZpZGVyKHRoaXMuX3Jvb21MaXN0Qm94LCByb29tc0RhdGEsIHRydWUpO1xuXG5cdFx0Ly8gU2V0IFJlbW92ZSBidXR0b24gc3RhdGVcblx0XHQkKCcjem5tLXJlbW92ZVJvb21CdCcpLmF0dHIoJ2Rpc2FibGVkJywgdGhpcy5fc2VsZWN0ZWRSb29tID09IHVuZGVmaW5lZCk7XG5cdH1cblxuXHRfc2V0VXNlcnNEYXRhUHJvdmlkZXIodXNlcnNEYXRhKVxuXHR7XG5cdFx0dGhpcy5fc2V0TGlzdERhdGFQcm92aWRlcih0aGlzLl91c2VyTGlzdEJveCwgdXNlcnNEYXRhKTtcblx0fVxuXG5cdF9zZXRMaXN0RGF0YVByb3ZpZGVyKGxpc3RXaWRnZXQsIGxpc3REYXRhLCBjb3VudFVzZXJzID0gZmFsc2UpXG5cdHtcblx0XHQvLyBTYXZlIHJlZmVyZW5jZSB0byBzZWxlY3RlZCBpdGVtIG5hbWVcblx0XHQvLyBOT1RFOiBhcyB3ZSBhcmUgc3Vic3RpdHV0aW5nIHRoZSB3aG9sZSBkYXRhIHNvdXJjZSwgd2UgbmVlZCBpdCB0byByZS1zZWxlY3QgdGhlIHNhbWUgaXRlbSBhZnRlciB1cGRhdGVcblx0XHRsZXQgc2VsZWN0ZWREYXRhSXRlbSA9IGxpc3RXaWRnZXQuZGF0YUl0ZW0obGlzdFdpZGdldC5zZWxlY3QoKSk7XG5cdFx0bGV0IHNlbGVjdGVkRGF0YUl0ZW1OYW1lID0gc2VsZWN0ZWREYXRhSXRlbSA/IHNlbGVjdGVkRGF0YUl0ZW0ubmFtZSA6IG51bGw7XG5cblx0XHRsZXQgZGF0YUFycmF5ID0gW107XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgY29taW5nIGZyb20gc2VydmVyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0RGF0YS5zaXplKCk7IGkrKylcblx0XHR7XG5cdFx0XHRsZXQgaXRlbURhdGEgPSBsaXN0RGF0YS5nZXRTRlNPYmplY3QoaSk7XG5cblx0XHRcdGxldCBpdGVtID0ge307XG5cdFx0XHRpdGVtLm5hbWUgPSBpdGVtRGF0YS5nZXRVdGZTdHJpbmcoJ25hbWUnKTtcblxuXHRcdFx0aWYgKGNvdW50VXNlcnMpXG5cdFx0XHRcdGl0ZW0udXNlcnMgPSBpdGVtRGF0YS5nZXRJbnQoJ3VzZXJzJyk7XG5cblx0XHRcdGRhdGFBcnJheS5wdXNoKGl0ZW0pO1xuXHRcdH1cblxuXHRcdC8vIENyZWF0ZSBuZXcgZGF0YSBzb3VyY2Vcblx0XHRsZXQgbGlzdERTID0gbmV3IGtlbmRvLmRhdGEuRGF0YVNvdXJjZSh7XG5cdFx0XHRkYXRhOiBkYXRhQXJyYXksXG5cdFx0XHRzY2hlbWE6IHtcblx0XHRcdFx0bW9kZWw6IHtcblx0XHRcdFx0XHRpZDogJ25hbWUnXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRzb3J0OiB7XG5cdFx0XHRcdGZpZWxkOiAnbmFtZScsXG5cdFx0XHRcdGRpcjogJ2FzYydcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEFzc2lnbiBkYXRhIHNvdXJjZSB0byBsaXN0XG5cdFx0bGlzdFdpZGdldC5zZXREYXRhU291cmNlKGxpc3REUyk7XG5cblx0XHQvLyBTZWxlY3QgYWdhaW4gcHJldmlvdXNseSBzZWxlY3RlZCBpdGVtXG5cdFx0aWYgKHNlbGVjdGVkRGF0YUl0ZW1OYW1lICE9IG51bGwpXG5cdFx0e1xuXHRcdFx0c2VsZWN0ZWREYXRhSXRlbSA9IGxpc3REUy5nZXQoc2VsZWN0ZWREYXRhSXRlbU5hbWUpO1xuXG5cdFx0XHRpZiAoc2VsZWN0ZWREYXRhSXRlbSlcblx0XHRcdHtcblx0XHRcdFx0bGV0IHNlbGVjdGVkRWxlbWVudCA9IGxpc3RXaWRnZXQud3JhcHBlci5maW5kKCdbZGF0YS11aWQ9XCInICsgc2VsZWN0ZWREYXRhSXRlbS51aWQgKyAnXCJdJyk7XG5cdFx0XHRcdGxpc3RXaWRnZXQuc2VsZWN0KHNlbGVjdGVkRWxlbWVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVzZXQgbWFpbiBjb250cm9sIHN0YXRlXG5cdFx0dGhpcy5fc2V0TWFpbkNvbnRyb2xzRW5hYmxlZCgpO1xuXHR9XG5cblx0X3NldEdyb3Vwc0RhdGFQcm92aWRlcihncm91cHNEYXRhKVxuXHR7XG5cdFx0Ly8gQ3JlYXRlIEdyb3VwcyBhcnJheSwgYWRkaW5nIGNvbW1vbiBlbnRyaWVzXG5cdFx0bGV0IGdyb3Vwc0FycmF5ID0gW1xuXHRcdFx0dGhpcy5fZ2V0R3JvdXBPYmooJycsIHRoaXMuQU5ZX0xBQkVMKSxcblx0XHRcdHRoaXMuX2dldEdyb3VwT2JqKHRoaXMuREVGQVVMVF9HUk9VUF9OQU1FKVxuXHRcdF07XG5cblx0XHQvLyBTYXZlIHJlZmVyZW5jZSB0byBzZWxlY3RlZCBncm91cCBuYW1lXG5cdFx0Ly8gTk9URTogYXMgd2UgYXJlIHN1YnN0aXR1dGluZyB0aGUgd2hvbGUgZGF0YSBzb3VyY2UsIHdlIG5lZWQgaXQgdG8gcmUtc2VsZWN0IHRoZSBzYW1lIGl0ZW0gYWZ0ZXIgdXBkYXRlXG5cdFx0bGV0IHNlbGVjdGVkRGF0YUl0ZW0gPSB0aGlzLl9zZWxlY3RlZEdyb3VwO1xuXHRcdGxldCBzZWxlY3RlZERhdGFJdGVtTmFtZSA9IHNlbGVjdGVkRGF0YUl0ZW0gPyBzZWxlY3RlZERhdGFJdGVtLm5hbWUgOiBudWxsO1xuXG5cdFx0aWYgKGdyb3Vwc0RhdGEgIT0gbnVsbClcblx0XHR7XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGdyb3Vwc0RhdGEubGVuZ3RoOyBpKyspXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChncm91cHNEYXRhW2ldICE9IHRoaXMuREVGQVVMVF9HUk9VUF9OQU1FKSAvLyBEZWZhdWx0IGdyb3VwIHdhcyBhZGRlZCBiZWZvcmVcblx0XHRcdFx0XHRncm91cHNBcnJheS5wdXNoKHRoaXMuX2dldEdyb3VwT2JqKGdyb3Vwc0RhdGFbaV0pKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgbmV3IGRhdGEgc291cmNlXG5cdFx0bGV0IGdyb3VwRFMgPSBuZXcga2VuZG8uZGF0YS5EYXRhU291cmNlKHtcblx0XHRcdGRhdGE6IGdyb3Vwc0FycmF5LFxuXHRcdFx0c2NoZW1hOiB7XG5cdFx0XHRcdG1vZGVsOiB7XG5cdFx0XHRcdFx0aWQ6ICduYW1lJ1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBBc3NpZ24gZGF0YSBzb3VyY2UgdG8gZHJvcGRvd25cblx0XHR0aGlzLl9ncm91cHNEcm9wRG93bi5zZXREYXRhU291cmNlKGdyb3VwRFMpO1xuXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0Ly8gU2VsZWN0IHByZXZpb3VzbHkgc2VsZWN0ZWQgaXRlbVxuXHRcdHNlbGVjdGVkRGF0YUl0ZW0gPSBncm91cERTLmdldChzZWxlY3RlZERhdGFJdGVtTmFtZSk7XG5cblx0XHQvLyBJZiBncm91cCBpcyBub3QgZm91bmQsIHNlbGVjdCB0aGUgZGVmYXVsdCBvbmVcblx0XHRpZiAoc2VsZWN0ZWREYXRhSXRlbSA9PSB1bmRlZmluZWQpXG5cdFx0XHRzZWxlY3RlZERhdGFJdGVtID0gZ3JvdXBEUy5nZXQodGhpcy5ERUZBVUxUX0dST1VQX05BTUUpO1xuXG5cdFx0dGhpcy5fZ3JvdXBzRHJvcERvd24uc2VsZWN0KGZ1bmN0aW9uKGRhdGFJdGVtKSB7XG5cdFx0XHRyZXR1cm4gZGF0YUl0ZW0ubmFtZSA9PT0gc2VsZWN0ZWREYXRhSXRlbS5uYW1lO1xuXHRcdH0pO1xuXHR9XG5cblx0X2dldEdyb3VwT2JqKG5hbWUsIGxhYmVsID0gbnVsbClcblx0e1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiBuYW1lLFxuXHRcdFx0bGFiZWw6IChsYWJlbCAhPSBudWxsID8gbGFiZWwgOiBuYW1lKVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgdGhlIFNjb3BlIGxhYmVsIGluIHRoZSBSb29tcyBwYW5lbCBhbmQgaW4gdGhlIFVzZXJzIHBhbmVsLlxuXHQgKi9cblx0X3NldFNjb3BlTGFiZWwoKVxuXHR7XG5cdFx0bGV0IHJvb21TY29wZSA9ICcnO1xuXHRcdGxldCB1c2VyU2NvcGUgPSAnJztcblxuXHRcdGlmICh0aGlzLl9zZWxlY3RlZFpvbmUpXG5cdFx0e1xuXHRcdFx0bGV0IHpvbmVOYW1lID0gdGhpcy5fc2VsZWN0ZWRab25lLm5hbWU7XG5cdFx0XHRyb29tU2NvcGUgPSB0aGlzLl9nZXRTY29wZUxhYmVsUGFydCgnWm9uZTonLCB6b25lTmFtZSk7XG5cblx0XHRcdGxldCBzZWxlY3RlZEdyb3VwID0gdGhpcy5fc2VsZWN0ZWRHcm91cDtcblx0XHRcdGxldCBncm91cE5hbWUgPSAoc2VsZWN0ZWRHcm91cCAmJiBzZWxlY3RlZEdyb3VwLm5hbWUgIT0gJycpID8gc2VsZWN0ZWRHcm91cC5uYW1lIDogdGhpcy5BTllfTEFCRUw7XG5cdFx0XHRsZXQgcm9vbU5hbWUgPSAodGhpcy5fc2VsZWN0ZWRSb29tKSA/IHRoaXMuX3NlbGVjdGVkUm9vbS5uYW1lIDogdGhpcy5BTllfTEFCRUw7XG5cblx0XHRcdHVzZXJTY29wZSA9IHRoaXMuX2dldFNjb3BlTGFiZWxQYXJ0KCdab25lOicsIHpvbmVOYW1lKSArICc8YnI+JyArIHRoaXMuX2dldFNjb3BlTGFiZWxQYXJ0KCdHcm91cDonLCBncm91cE5hbWUpICsgJzxicj4nICsgdGhpcy5fZ2V0U2NvcGVMYWJlbFBhcnQoJ1Jvb206Jywgcm9vbU5hbWUpO1xuXHRcdH1cblxuXHRcdCQoJyN6bm0tcm9vbVNjb3BlTGInKS5odG1sKHJvb21TY29wZSk7XG5cdFx0JCgnI3pubS11c2VyU2NvcGVMYicpLmh0bWwodXNlclNjb3BlKTtcblx0fVxuXG5cdF9nZXRTY29wZUxhYmVsUGFydChsYWJlbCwgdGV4dClcblx0e1xuXHRcdHJldHVybiBgPHNwYW4gY2xhc3M9XCJ0ZXh0LW11dGVkXCI+JHtsYWJlbH08L3NwYW4+IDxzcGFuPiR7dGV4dH08L3NwYW4+YDtcblx0fVxuXG5cdF9yZXNldFJvb21MaXN0KClcblx0e1xuXHRcdHRoaXMuX3Jvb21MaXN0Qm94LnNldERhdGFTb3VyY2UoW10pO1xuXG5cdFx0Ly8gQWxzbyBkaXNhYmxlIFJlbW92ZSBidXR0b25cblx0XHQkKCcjem5tLXJlbW92ZVJvb21CdCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdH1cblxuXHRfcmVzZXRVc2VyTGlzdCgpXG5cdHtcblx0XHR0aGlzLl91c2VyTGlzdEJveC5zZXREYXRhU291cmNlKFtdKTtcblx0fVxuXG5cdF9zZXRNYWluQ29udHJvbHNFbmFibGVkKClcblx0e1xuXHRcdGxldCBlbmFibGVkID0gKHRoaXMuX2FjdGl2ZVBhbmVsVHlwZSA9PSAnem9uZScgJiYgdGhpcy5fc2VsZWN0ZWRab25lICE9IHVuZGVmaW5lZClcblx0XHRcdFx0XHR8fCAodGhpcy5fYWN0aXZlUGFuZWxUeXBlID09ICdyb29tJyAmJiB0aGlzLl9zZWxlY3RlZFJvb20gIT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdHx8ICh0aGlzLl9hY3RpdmVQYW5lbFR5cGUgPT0gJ3VzZXInICYmIHRoaXMuX3NlbGVjdGVkVXNlciAhPSB1bmRlZmluZWQpO1xuXG5cdFx0JCgnI3pubS1tYWluQ29udHJvbHMnKS5hdHRyKCdkaXNhYmxlZCcsICFlbmFibGVkKTtcblxuXHRcdCQoJyN6bm0tbW9uaXRvclRhcmdldExiJykudGV4dChlbmFibGVkID8gY2FwaXRhbGl6ZUZpcnN0KHRoaXMuX2FjdGl2ZVBhbmVsVHlwZSkgOiAnc2VsZWN0aW9uJyk7XG5cdFx0JCgnI3pubS1tZXNzYWdlSW4nKS5hdHRyKCdwbGFjZWhvbGRlcicsICdNZXNzYWdlIHRvICcgKyAoZW5hYmxlZCA/IGNhcGl0YWxpemVGaXJzdCh0aGlzLl9hY3RpdmVQYW5lbFR5cGUpIDogJ3NlbGVjdGlvbicpKTtcblx0fVxuXG5cdF9zaG93TGltaXRFeGNlZWRlZFdhcm5pbmcoaWNvbiwgdGl0bGUpXG5cdHtcblx0XHRpY29uLmF0dHIoJ3RpdGxlJywgdGl0bGUpO1xuXG5cdFx0aWYgKHRpdGxlICE9ICcnKVxuXHRcdFx0aWNvbi5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cdFx0ZWxzZVxuXHRcdFx0aWNvbi5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdH1cblxuXHRfc2hvd1Jvb21DcmVhdGlvblBhbmVsKHJvb21TZXR0aW5ncylcblx0e1xuXHRcdC8vIEJ1aWxkIHVzZXIgaW50ZXJmYWNlIGJhc2VkIG9uIHBhc3NlZCBkYXRhXG5cdFx0dGhpcy5fcm9vbUNyZWF0aW9uSUJ1aWxkZXIuYnVpbGRJbnRlcmZhY2Uocm9vbVNldHRpbmdzLCAnem5tLXJvb21DcmVhdG9yVGFiTmF2JywgZmFsc2UsICdyYycpO1xuXG5cdFx0Ly8gRW5hYmxlIHNjcm9sbGluZyB0YWJzXG5cdFx0JCgnI3pubS1yb29tQ3JlYXRvclRhYk5hdiA+ICN0YWJzJykuc2Nyb2xsaW5nVGFicyh7XG5cdFx0XHRib290c3RyYXBWZXJzaW9uOiA0LFxuXHRcdFx0c2Nyb2xsVG9UYWJFZGdlOiB0cnVlLFxuXHRcdFx0ZW5hYmxlU3dpcGluZzogdHJ1ZSxcblx0XHRcdGRpc2FibGVTY3JvbGxBcnJvd3NPbkZ1bGx5U2Nyb2xsZWQ6IHRydWUsXG5cdFx0XHRjc3NDbGFzc0xlZnRBcnJvdzogJ2ZhIGZhLWNoZXZyb24tbGVmdCcsXG5cdFx0XHRjc3NDbGFzc1JpZ2h0QXJyb3c6ICdmYSBmYS1jaGV2cm9uLXJpZ2h0J1xuXHRcdH0pO1xuXG5cdFx0Ly8gUmVzZXQgTm90aWZ5IGNsaWVudHMgY2hlY2tib3hcblx0XHQkKCcjem5tLW5vdGlmeUNsaWVudHNDQicpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcblxuXHRcdC8vIFNldCBsaXN0ZW5lciBmb3IgY3VzdG9tIGFjdGlvbnMgdHJpZ2dlcmVkIGJ5IGNvbmZpZ3VyYXRpb24gaW50ZXJmYWNlXG5cdFx0JCgnI3pubS1yb29tQ3JlYXRvclRhYk5hdicpLm9uKCd2YWx1ZS1zZXQnLCAkLnByb3h5KHRoaXMuX29uQ29uZmlnVmFsdWVTZXQsIHRoaXMpKTtcblxuXHRcdC8vIERpc3BsYXkgcGFuZWxcblx0XHQkKCcjem5tLWNyZWF0ZVJvb21Nb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG5cblx0XHQvLyBSZXNldCBhbmQgaGlkZSBlcnJvciBtZXNzYWdlXG5cdFx0dGhpcy5fcmVzZXRSb29tQ3JlYXRpb25FcnJvcigpO1xuXHR9XG5cblx0X3Jlc2V0Um9vbUNyZWF0aW9uRXJyb3IoKVxuXHR7XG5cdFx0Ly8gUmVzZXQgYW5kIGhpZGUgZXJyb3IgbWVzc2FnZVxuXHRcdCQoJyN6bm0tY3JlYXRlUm9vbUVycm9yJykudGV4dCgnJyk7XG5cdFx0JCgnI3pubS1jcmVhdGVSb29tRXJyb3InKS5oaWRlKCk7XG5cdH1cblxuXHRfdmFsaWRhdGVOZXdSb29tTmFtZShjaGFuZ2VzKVxuXHR7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjaGFuZ2VzLnNpemUoKTsgaSsrKVxuXHRcdHtcblx0XHRcdGNvbnN0IHNldHRpbmcgPSBjaGFuZ2VzLmdldFNGU09iamVjdChpKTtcblxuXHRcdFx0aWYgKHNldHRpbmcuY29udGFpbnNLZXkoJ25hbWUnKSAmJiBzZXR0aW5nLmdldFV0ZlN0cmluZygnbmFtZScpID09ICduYW1lJylcblx0XHRcdHtcblx0XHRcdFx0Ly8gR2V0IG5hbWUgdmFsdWVcblx0XHRcdFx0Y29uc3QgbmFtZSA9IHNldHRpbmcuZ2V0VGV4dCgndmFsdWUnKTtcblxuXHRcdFx0XHQvLyBHZXQgZGF0YSBzb3VyY2Vcblx0XHRcdFx0Y29uc3QgZHMgPSB0aGlzLl9yb29tTGlzdEJveC5kYXRhU291cmNlLmRhdGEoKTtcblxuXHRcdFx0XHQvLyBDaGVjayBpZiBuYW1lIGV4aXN0cyBpbiBkYXRhIHNvdXJjZVxuXHRcdFx0XHRmb3IgKGxldCBqID0gMDsgaiA8IGRzLmxlbmd0aDsgaisrKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYgKGRzW2pdLm5hbWUgPT0gbmFtZSlcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0X2VuYWJsZUNyZWF0ZVJvb21QYW5lbChlbmFibGUpXG5cdHtcblx0XHRsZXQgbW9kYWxFbGVtZW50ID0gJCgnI3pubS1jcmVhdGVSb29tTW9kYWwnKTtcblxuXHRcdC8vIEVuYWJsZSBtb2RhbCBjbG9zZSBidXR0b25zXG5cdFx0JCgnYnV0dG9uW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJywgbW9kYWxFbGVtZW50KS5hdHRyKCdkaXNhYmxlZCcsICFlbmFibGUpO1xuXG5cdFx0Ly8gRW5hYmxlIGNyZWF0ZSBidXR0b25cblx0XHQkKCcjem5tLXJvb21DcmVhdG9yQ3JlYXRlQnQnLCBtb2RhbEVsZW1lbnQpLmF0dHIoJ2Rpc2FibGVkJywgIWVuYWJsZSk7XG5cblx0XHQvLyBFbmFibGUgY2hlY2tib3hcblx0XHQkKCcjem5tLW5vdGlmeUNsaWVudHNDQicsIG1vZGFsRWxlbWVudCkuYXR0cignZGlzYWJsZWQnLCAhZW5hYmxlKTtcblxuXHRcdC8vIEVuYWJsZSBjb25maWd1cmF0aW9uIGludGVyZmFjZVxuXHRcdHRoaXMuX3Jvb21DcmVhdGlvbklCdWlsZGVyLmRpc2FibGVJbnRlcmZhY2UoIWVuYWJsZSk7XG5cdH1cblxuXHRfY2xlYXJUYWJzKG1vbml0b3JlZFR5cGUpXG5cdHtcblx0XHQvLyBEZXN0cm95IHNjcm9sbGluZyB0YWJzXG5cdFx0JChgI3pubS0ke21vbml0b3JlZFR5cGV9VGFiTmF2aWdhdG9yICN0YWJzYCkuc2Nyb2xsaW5nVGFicygnZGVzdHJveScpO1xuXG5cdFx0Ly8gUmVtb3ZlIGFsbCB0YWIgbmF2aWdhdG9yIGNvbnRlbnRcblx0XHR0aGlzLl9pbnRlcmZhY2VCdWlsZGVyLmRlc3Ryb3lJbnRlcmZhY2UoKTtcblxuXHRcdC8vIFNldCBhbGwgdGFiIHBhbmVscyBhcyBpbmFjdGl2ZVxuXHRcdCQoYCN6bm0tJHttb25pdG9yZWRUeXBlfVRhYk5hdmlnYXRvciAjdGFiUGFuZWxzIC50YWItcGFuZWApLnJlbW92ZUNsYXNzKCdzaG93IGFjdGl2ZScpO1xuXG5cdFx0Ly8gUmVtb3ZlIHRhYiBjaGFuZ2UgZXZlbnQgbGlzdGVuZXJcblx0XHQkKCdhW2RhdGEtdG9nZ2xlPVwidGFiXCJdJykub2ZmKCdzaG93bi5icy50YWInKTtcblxuXHRcdHRoaXMuX3NraXBJbml0VGFicyA9IGZhbHNlO1xuXHR9XG5cblx0X3Nob3dab25lVHJhZmZpY0RhdGEoZGF0YSlcblx0e1xuXHRcdC8vIEJ1aWxkIHVzZXIgY291bnQgbW9uaXRvciBoaXN0b3J5XG5cdFx0aWYgKGRhdGEuY29udGFpbnNLZXkoJ2hpc3RvcnknKSlcblx0XHR7XG5cdFx0XHRsZXQgdXNlckNvdW50RGF0YSA9IGRhdGEuZ2V0SW50QXJyYXkoJ2hpc3RvcnknKTtcblx0XHRcdGxldCBzYW1wbGluZ1JhdGVNaW5zID0gZGF0YS5nZXRJbnQoJ3JhdGUnKTtcblxuXHRcdFx0dGhpcy5fdXNlckNvdW50Q2hhcnQuYWRkSGlzdG9yeUVudHJpZXModXNlckNvdW50RGF0YSwgc2FtcGxpbmdSYXRlTWlucyAqIDYwKTtcblx0XHR9XG5cblx0XHQvLyBBZGQgbGFzdCB1c2VyIGNvdW50IHZhbHVlXG5cdFx0dGhpcy5fdXNlckNvdW50Q2hhcnQuYWRkRW50cnkoZGF0YS5nZXRJbnQoJ2N1cnJlbnQnKSk7XG5cdH1cblxuXHRfYWRkTG9nRW50cnlUb0dyaWQoZ3JpZCwgaXRlbSlcblx0e1xuXHRcdGxldCBkcyA9IGdyaWQuZGF0YVNvdXJjZTtcblxuXHRcdC8vIENoZWNrIGl0ZW1zIGxpbWl0XG5cdFx0aWYgKGRzLnRvdGFsKCkgPT0gdGhpcy5NQVhfRVhURU5TSU9OX0xPR19TSVpFKVxuXHRcdFx0ZHMucmVtb3ZlKGRzLmF0KDApKTtcblxuXHRcdGRzLmFkZChpdGVtKTtcblx0fVxuXG5cdF9zaG93VXNlclN0YXRzRGF0YShkYXRhKVxuXHR7XG5cdFx0Ly8gUGFja2V0IHF1ZXVlIGZpbGxpbmcgJVxuXHRcdGxldCBwYWNrZXRRdWV1ZSA9IHJvdW5kVG9EZWNpbWFscyhkYXRhLmdldEZsb2F0KCdwYWNrZXQnKSwgMik7XG5cdFx0dGhpcy5fcGFja2V0UXVldWVDaGFydC5zZXREYXRhU291cmNlKFt7Y2F0ZWdvcnk6ICdRdWV1ZScsIHZhbHVlOiBwYWNrZXRRdWV1ZX1dKTtcblxuXHRcdC8vIERyb3BwZWQgbWVzc2FnZXNcblx0XHRsZXQgZHJvcHBlZE1zZyA9IGRhdGEuZ2V0SW50KCdkcm9wcGVkJyk7XG5cdFx0dGhpcy5fZHJvcHBlZE1zZ0NoYXJ0LnNldERhdGFTb3VyY2UoW3tjYXRlZ29yeTogJ0Ryb3BwZWQnLCB2YWx1ZTogZHJvcHBlZE1zZ31dKTtcblxuXHRcdC8vIFdyaXR0ZW4gZGF0YSBhbW91bnRcblx0XHRsZXQgd3JpdHRlbkRhdGFPYmogPSBzY2FsZUJ5dGVzKGRhdGEuZ2V0TG9uZygnd0J5dGVzJyksIDIpO1xuXHRcdHRoaXMuX3dyaXR0ZW5EYXRhQ2hhcnQuc2V0RGF0YVNvdXJjZShbe2NhdGVnb3J5OiAnV3JpdHRlbicsIHZhbHVlOiB3cml0dGVuRGF0YU9iai52YWx1ZSwgdW5pdDogd3JpdHRlbkRhdGFPYmoudW5pdH1dKTtcblxuXHRcdC8vIFJlYWQgZGF0YSBhbW91bnRcblx0XHRsZXQgcmVhZERhdGFPYmogPSBzY2FsZUJ5dGVzKGRhdGEuZ2V0TG9uZygnckJ5dGVzJyksIDIpO1xuXHRcdHRoaXMuX3JlYWREYXRhQ2hhcnQuc2V0RGF0YVNvdXJjZShbe2NhdGVnb3J5OiAnUmVhZCcsIHZhbHVlOiByZWFkRGF0YU9iai52YWx1ZSwgdW5pdDogcmVhZERhdGFPYmoudW5pdH1dKTtcblx0fVxuXG5cdF9zZXRHZW9Mb2NhdGlvblVJKGdlb0xvY0RhdGEpXG5cdHtcblx0XHRjb25zdCBsb2NhdGlvbiA9IGdlb0xvY0RhdGEuZ2V0VXRmU3RyaW5nKCdsb2NhdGlvbicpO1xuXHRcdGNvbnN0IGVycm9yID0gZ2VvTG9jRGF0YS5nZXRVdGZTdHJpbmcoJ2Vycm9yJyk7XG5cdFx0Y29uc3QgbGF0aXR1ZGUgPSBnZW9Mb2NEYXRhLmdldFV0ZlN0cmluZygnbGF0aXR1ZGUnKTtcblx0XHRjb25zdCBsb25naXR1ZGUgPSBnZW9Mb2NEYXRhLmdldFV0ZlN0cmluZygnbG9uZ2l0dWRlJyk7XG5cblx0XHQvLyBTaG93IGxvY2F0aW9uXG5cdFx0JCgnI3pubS1nZW9Mb2NhdGlvbkxiJykudGV4dChsb2NhdGlvbik7XG5cblx0XHQvLyBMb2cgZXJyb3Jcblx0XHRpZiAoZXJyb3IgIT0gJycpXG5cdFx0XHR0aGlzLnNoZWxsQ3RybC5sb2dNZXNzYWdlKGVycm9yLCAnd2FybicpO1xuXG5cdFx0Ly8gRW5hYmxlL2Rpc2FibGUgU2hvdyBtYXAgYnV0dG9uXG5cdFx0aWYgKGxhdGl0dWRlICE9ICcnICYmIGxvbmdpdHVkZSAhPSAnJylcblx0XHR7XG5cdFx0XHQkKCcjem5tLXNob3dNYXBCdCcpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXG5cdFx0XHRjb25zdCB1cmwgPSBgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9tYXBzL3NlYXJjaC8/YXBpPTEmcXVlcnk9JHtOdW1iZXIobGF0aXR1ZGUpICsgJywnICsgTnVtYmVyKGxvbmdpdHVkZSl9YDtcblx0XHRcdCQoJyN6bm0tc2hvd01hcEJ0JykuYXR0cignaHJlZicsIHVybCk7XG5cdFx0fVxuXHR9XG5cblx0X2NsZWFyR2VvTG9jYXRpb25VSSgpXG5cdHtcblx0XHQkKCcjem5tLWdlb0xvY2F0aW9uTGInKS50ZXh0KCcnKTtcblx0XHQkKCcjem5tLXNob3dNYXBCdCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0JCgnI3pubS1zaG93TWFwQnQnKS5hdHRyKCdocmVmJywgJyMnKTtcblx0fVxuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIFBSSVZBVEUgR0VUVEVSU1xuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdGdldCBfYWN0aXZlUGFuZWxUeXBlKClcblx0e1xuXHRcdHJldHVybiB0aGlzLl9hY2NvcmRpb24uc2VsZWN0KCkuZGF0YSgnaXRlbVR5cGUnKTtcblx0fVxuXG5cdGdldCBfc2VsZWN0ZWRab25lKClcblx0e1xuXHRcdHJldHVybiB0aGlzLl96b25lTGlzdEJveC5kYXRhSXRlbSh0aGlzLl96b25lTGlzdEJveC5zZWxlY3QoKSk7XG5cdH1cblxuXHRnZXQgX3NlbGVjdGVkR3JvdXAoKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2dyb3Vwc0Ryb3BEb3duLmRhdGFJdGVtKHRoaXMuX2dyb3Vwc0Ryb3BEb3duLnNlbGVjdCgpKTtcblx0fVxuXG5cdGdldCBfc2VsZWN0ZWRSb29tKClcblx0e1xuXHRcdHJldHVybiB0aGlzLl9yb29tTGlzdEJveC5kYXRhSXRlbSh0aGlzLl9yb29tTGlzdEJveC5zZWxlY3QoKSk7XG5cdH1cblxuXHRnZXQgX3NlbGVjdGVkVXNlcigpXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fdXNlckxpc3RCb3guZGF0YUl0ZW0odGhpcy5fdXNlckxpc3RCb3guc2VsZWN0KCkpO1xuXHR9XG5cblx0Z2V0IF9pc0VkaXRpbmcoKVxuXHR7XG5cdFx0cmV0dXJuICh0aGlzLl9tb25pdG9yZWRUeXBlICE9IG51bGwgJiYgdGhpcy5fbW9uaXRvcmVkTmFtZSAhPSBudWxsICYmIHRoaXMuX2lzRWRpdE1vZGUpO1xuXHR9XG59XG4iLCJleHBvcnQgY2xhc3MgUm9vbVByb3BlcnRpZXNEYXRhXG57XG5cdHN0YXRpYyBnZXQgTEFCRUxTKCkge1xuXHRcdGxldCBtYXAgPSBuZXcgTWFwKCk7XG5cblx0XHRtYXAuc2V0KFNGUzJYLlJvb21Qcm9wZXJ0aWVzLk5BTUUsICduYW1lJyk7XG5cdFx0bWFwLnNldChTRlMyWC5Sb29tUHJvcGVydGllcy5HUk9VUF9JRCwgJ2dyb3VwSWQnKTtcblx0XHRtYXAuc2V0KFNGUzJYLlJvb21Qcm9wZXJ0aWVzLk1BWF9VU0VSUywgJ21heFVzZXJzJyk7XG5cdFx0bWFwLnNldChTRlMyWC5Sb29tUHJvcGVydGllcy5NQVhfU1BFQ1RBVE9SUywgJ21heFNwZWN0YXRvcnMnKTtcblx0XHRtYXAuc2V0KFNGUzJYLlJvb21Qcm9wZXJ0aWVzLlVTRVJfQ09VTlQsICd1c2VyQ291bnQnKTtcblx0XHRtYXAuc2V0KFNGUzJYLlJvb21Qcm9wZXJ0aWVzLlNQRUNUQVRPUl9DT1VOVCwgJ3NwZWN0YXRvckNvdW50Jyk7XG5cdFx0bWFwLnNldChTRlMyWC5Sb29tUHJvcGVydGllcy5JU19HQU1FLCAnaXNHYW1lJyk7XG5cdFx0bWFwLnNldChTRlMyWC5Sb29tUHJvcGVydGllcy5JU19QUklWQVRFLCAnaXNQcml2YXRlJyk7XG5cdFx0bWFwLnNldChTRlMyWC5Sb29tUHJvcGVydGllcy5IQVNfRlJFRV9QTEFZRVJfU0xPVFMsICdoYXNGcmVlUGxheWVyU2xvdHMnKTtcblx0XHRtYXAuc2V0KFNGUzJYLlJvb21Qcm9wZXJ0aWVzLklTX1RZUEVfU0ZTR0FNRSwgJ2lzU0ZTR2FtZVR5cGUnKTtcblxuXHRcdHJldHVybiBtYXA7XG5cdH1cblxuXHRzdGF0aWMgZ2V0TGFiZWwocHJvcE5hbWUpXG5cdHtcblx0XHRyZXR1cm4gJ1Jvb20uJyArIFJvb21Qcm9wZXJ0aWVzRGF0YS5MQUJFTFMuZ2V0KHByb3BOYW1lKTtcblx0fVxuXG5cdHN0YXRpYyBnZXQgcHJvcGVydGllc0FycmF5KClcblx0e1xuXHRcdGNvbnN0IGFyciA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgUm9vbVByb3BlcnRpZXNEYXRhLkxBQkVMUy5lbnRyaWVzKCkpXG5cdFx0e1xuXHRcdFx0YXJyLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogUm9vbVByb3BlcnRpZXNEYXRhLmdldExhYmVsKGtleSksXG5cdFx0XHRcdHZhbHVlOiBrZXlcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBhcnI7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFVzZXJQcm9wZXJ0aWVzRGF0YVxue1xuXHRzdGF0aWMgZ2V0IExBQkVMUygpIHtcblx0XHRsZXQgbWFwID0gbmV3IE1hcCgpO1xuXG5cdFx0bWFwLnNldChTRlMyWC5Vc2VyUHJvcGVydGllcy5OQU1FLCAnbmFtZScpO1xuXHRcdG1hcC5zZXQoU0ZTMlguVXNlclByb3BlcnRpZXMuSVNfUExBWUVSLCAnaXNQbGF5ZXInKTtcblx0XHRtYXAuc2V0KFNGUzJYLlVzZXJQcm9wZXJ0aWVzLklTX1NQRUNUQVRPUiwgJ2lzU3BlY3RhdG9yJyk7XG5cdFx0bWFwLnNldChTRlMyWC5Vc2VyUHJvcGVydGllcy5JU19OUEMsICdpc05QQycpO1xuXHRcdG1hcC5zZXQoU0ZTMlguVXNlclByb3BlcnRpZXMuUFJJVklMRUdFX0lELCAncHJpdmlsZWdlSWQnKTtcblxuXHRcdHJldHVybiBtYXA7XG5cdH1cblxuXHRzdGF0aWMgZ2V0TGFiZWwocHJvcE5hbWUpXG5cdHtcblx0XHRyZXR1cm4gJ1VzZXIuJyArIFVzZXJQcm9wZXJ0aWVzRGF0YS5MQUJFTFMuZ2V0KHByb3BOYW1lKTtcblx0fVxuXG5cdHN0YXRpYyBnZXQgcHJvcGVydGllc0FycmF5KClcblx0e1xuXHRcdGNvbnN0IGFyciA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgVXNlclByb3BlcnRpZXNEYXRhLkxBQkVMUy5lbnRyaWVzKCkpXG5cdFx0e1xuXHRcdFx0YXJyLnB1c2goe1xuXHRcdFx0XHRsYWJlbDogVXNlclByb3BlcnRpZXNEYXRhLmdldExhYmVsKGtleSksXG5cdFx0XHRcdHZhbHVlOiBrZXlcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBhcnI7XG5cdH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzFKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNuS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUN0YUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3ZIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FDOS9EQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBIiwic291cmNlUm9vdCI6IiJ9